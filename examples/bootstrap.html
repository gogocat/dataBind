<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Bootstrap 5 dataBind Demo</title>
        <!-- Bootstrap 5 CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="bootstrap/css/open-iconic.css" />
        <link rel="stylesheet" href="bootstrap/css/homeservices.css" />
    </head>

    <body>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="#">Navbar</a>
            <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarsExampleDefault"
                aria-controls="navbarsExampleDefault"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#"
                            >Home
                            <span class="visually-hidden">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#">Disabled</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a
                            class="nav-link dropdown-toggle"
                            href="http://example.com"
                            id="dropdown01"
                            data-bs-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                            >Dropdown</a
                        >
                        <ul class="dropdown-menu" aria-labelledby="dropdown01">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main jumbotron for a primary marketing message or call to action -->
        <div class="jumbotron hero">
            <div class="container">
                <h1 class="display-3">Yes we can!</h1>
                <p>
                    Get service quotes in one click.
                </p>
            </div>
        </div>

        <div class="search-bar" data-bind-comp="search-bar" data-server-rendered>
            <div class="container">
                <form id="search-form" data-bind-submit="onSearchSubmit">
                    <div class="row g-2">
                        <div class="col-12 col-md-7 position-relative" id="scrollable-dropdown-menu">
                            <input
                                id="searchWord"
                                name="searchWord"
                                type="text"
                                class="form-control typeahead"
                                value=""
                                data-bind-model="searchWord"
                                data-bind-change="onSearchWordChange"
                                required
                            />
                            <label for="searchWord" class="search-bar__label search-bar__label--large"
                                >I'm looking for...</label
                            >
                            <span class="search-bar__focus-bar"></span>
                        </div>
                        <div class="col-8 col-md-3 position-relative">
                            <div class="d-flex">
                                <span class="oi search-bar__map-marker" data-glyph="map-marker"></span>
                                <input
                                    id="location"
                                    name="location"
                                    type="text"
                                    class="form-control"
                                    data-bind-model="searchLocation"
                                    data-bind-change="onSearchLocationChange"
                                    placeholder="Location"
                                    value="Sydney"
                                    aria-label="Location"
                                />
                            </div>
                            <span class="search-bar__focus-bar"></span>
                        </div>
                        <div class="col-4 col-md-2">
                            <button class="btn btn-success search-bar__btn" type="submit">
                                <span class="spinner spinner--search" data-bind-show="searching"></span>
                                <span data-bind-show="!searching">
                                    <span class="visually-hidden">Search</span>
                                    <span class="oi" data-glyph="magnifying-glass" aria-hidden="true"></span>
                                </span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="container search-result" data-bind-comp="search-results-component" data-server-rendered>
            <h4 id="searchResultTitle" class="text-center section-title" data-bind-text="searchResultTitle">
                Featured service providers
            </h4>

            <div
                id="search-result-columns"
                class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"
                data-bind-tmp="{id: 'searchResultItem', data: '$root', append: true}"
            >
                <div class="col">
                    <div class="card result-item h-100" data-index="0">
                        <img class="card-img-top result-item__img" src="bootstrap/images/pic-home.jpg" alt="Card image" />
                        <div class="card-body">
                            <h4 class="card-title">Card title that wraps to a new line</h4>
                            <p class="card-text">
                                This is a longer card with supporting text below as a natural lead-in to additional content.
                                This content is a little bit longer.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid0"
                                    name="adid0"
                                    data-index="0"
                                    data-bind-model="searchResults[0].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid0"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[0].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="0"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">99</span>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card result-item h-100" data-index="1">
                        <div class="card-body">
                            <h4 class="card-title">Card title</h4>
                            <p class="card-text">
                                This is a wider card with supporting text below as a natural lead-in to additional content.
                                This card has even longer content than the first to show that equal height action.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid1"
                                    name="adid1"
                                    data-index="1"
                                    data-bind-model="searchResults[1].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid1"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[1].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="1"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">9</span>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card result-item h-100" data-index="2">
                        <img class="card-img-top result-item__img" src="bootstrap/images/pic-deck.jpg" alt="Card image" />
                        <div class="card-body">
                            <h4 class="card-title">Card title</h4>
                            <p class="card-text">
                                This card has supporting text below as a natural lead-in to additional content.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid2"
                                    name="adid2"
                                    data-index="2"
                                    data-bind-model="searchResults[2].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid2"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[2].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="2"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">24</span>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card result-item result-item--highlight h-100" data-index="3">
                        <img
                            class="card-img-top result-item__img"
                            src="bootstrap/images/pic-carpenter.jpg"
                            alt="Card image"
                        />
                        <div class="card-body">
                            <h4 class="card-title">Card title</h4>
                            <p class="card-text">
                                This card has supporting text below as a natural lead-in to additional content.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid3"
                                    name="adid3"
                                    data-index="3"
                                    data-bind-model="searchResults[3].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid3"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[3].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="3"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">8</span>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card result-item h-100" data-index="4">
                        <div class="card-body">
                            <h4 class="card-title">Card title</h4>
                            <p class="card-text">
                                This card has supporting text below as a natural lead-in to additional content.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid4"
                                    name="adid4"
                                    data-index="4"
                                    data-bind-model="searchResults[4].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid4"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[4].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="4"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">68</span>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card result-item h-100" data-index="5">
                        <img
                            class="card-img-top result-item__img"
                            src="bootstrap/images/pic-bathrooms.jpg"
                            alt="Card image"
                        />
                        <div class="card-body">
                            <h4 class="card-title">Card title that wraps to a new line</h4>
                            <p class="card-text">
                                This is a longer card with supporting text below as a natural lead-in to additional content.
                                This content is a little bit longer.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid5"
                                    name="adid5"
                                    data-index="5"
                                    data-bind-model="searchResults[5].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid5"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon active"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[5].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="5"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">99+</span>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card result-item h-100" data-index="6">
                        <div class="card-body">
                            <h4 class="card-title">Card title</h4>
                            <p class="card-text">
                                This is a wider card with supporting text below as a natural lead-in to additional content.
                                This card has even longer content than the first to show that equal height action.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid6"
                                    name="adid6"
                                    data-index="6"
                                    data-bind-model="searchResults[6].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid6"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[6].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="6"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">9</span>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="card result-item h-100" data-index="7">
                        <img
                            class="card-img-top result-item__img"
                            src="bootstrap/images/pic-backyard.jpg"
                            alt="Card image"
                        />
                        <div class="card-body">
                            <h4 class="card-title">Card title</h4>
                            <p class="card-text">
                                This card has supporting text below as a natural lead-in to additional content.
                            </p>
                        </div>
                        <div class="card-footer result-item__footer">
                            <div class="result-item__icon-checkbox-wrap">
                                <input
                                    class="result-item__icon result-item__icon-checkbox"
                                    type="checkbox"
                                    id="adid7"
                                    name="adid7"
                                    data-index="7"
                                    data-bind-model="searchResults[7].selected"
                                    data-bind-change="onAdMessageCheck"
                                />
                                <label
                                    for="adid7"
                                    class="oi result-item__icon-checkbox-label"
                                    data-glyph="task"
                                    aria-label="Message this seller"
                                ></label>
                            </div>
                            <span
                                class="oi result-item__icon"
                                data-glyph="bookmark"
                                data-bind-css="searchResults[7].bookmarkedCss"
                                data-bind-click="onAdBookmarkClick"
                                data-index="7"
                            ></span>
                            <span class="oi result-item__icon" data-glyph="thumb-up">24</span>
                        </div>
                    </div>
                </div>
            </div>

            <button
                type="button"
                class="btn btn-outline-secondary search-result__btn-more"
                data-bind-show="showMore"
                data-bind-click="onMoreResults"
            >
                <span class="spinner" data-bind-show="loading"></span>
                <span data-bind-show="!loading">More</span>
            </button>

            <div
                class="mass-message__trigger-wrap"
                data-bind-css="messageTriggerCss"
                data-bind-click="onMessageTriggerClick"
                data-bs-toggle="modal"
                data-bs-target="#message-modal"
            >
                <div class="mass-message__trigger">
                    <span class="oi mass-message__trigger-icon" data-glyph="pencil" aria-label="write message"></span>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <span class="">Sticky footer</span>
            </div>
        </footer>

        <div
            id="message-modal"
            class="modal fade"
            data-bind-comp="message-dialog-component"
            tabindex="-1"
            role="dialog"
            aria-labelledby="myLargeModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-lg message-modal" role="document">
                <div class="modal-content message-modal__content">
                    <form id="formMessage" data-bind-submit="onMessageSubmit">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Send Message</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div data-bind-show="!sendingMessage">
                                <div class="alert alert-primary" role="alert">
                                    <h4 class="alert-heading">Well done!</h4>
                                    <p>
                                        Send a single message to all
                                        <strong data-bind-text="numSelectedProviders"></strong> selected service providers
                                        with just one click.
                                    </p>
                                    <p>
                                        This message will be send to
                                        <span data-bind-text="selectedProviders"></span>
                                    </p>
                                    <hr />
                                    <p class="mb-0">
                                        <strong>Tips:</strong> Provide details of your job request to have more accurate
                                        quotes.
                                    </p>
                                </div>
                                <div class="form-group">
                                    <label for="message">Message</label>
                                    <textarea
                                        class="form-control"
                                        id="message"
                                        name="message"
                                        rows="8"
                                        required
                                    ></textarea>
                                </div>
                            </div>
                            <div data-bind-show="sendingMessage" class="message-modal__content-success">
                                <span class="oi message-modal__icon-success" data-glyph="check"></span>
                                <p>
                                    Your message successfully send to
                                    <span data-bind-text="selectedProviders"></span>
                                </p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                    Close
                                </button>
                                <button
                                    type="submit"
                                    class="btn btn-success message-modal__btn-cta"
                                    data-bind-show="!sendingMessage"
                                >
                                    Send
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- searchResultItem test with deep nested templates -->
        <template id="searchResultItem">
            <div class="col">
                <div
                    class="card result-item h-100"
                    data-bind-css="$data.highlightCss"
                    data-bind-for="result of $root.searchResults"
                >
                    <img
                        data-bind-if="result.image"
                        data-bind-attr="{
                            src: $data.image,
                            alt: $data.title
                        }"
                        class="card-img-top result-item__img"
                    >
                    <div
                        class="card-body"
                        data-bind-tmp="{id: 'searchResultItemBody', data: 'result'}"
                    ></div>
                    <div data-bind-tmp="{id: 'searchResultItemFooter', data: 'result'}" ></div>
                </div>
            </div>
        </template>

        <template id="searchResultItemBody">
            <h4 class="card-title" data-bind-text="$data.title"></h4>
            <p class="card-text" data-bind-text="$data.description"></p>
        </template>

        <template id="searchResultItemFooter">
            <div class="card-footer result-item__footer">
                <div class="result-item__icon-checkbox-wrap">
                    <input 
                        class="result-item__icon result-item__icon-checkbox"
                        type="checkbox" 
                        data-bind-attr="{
                            id: $data.id,
                            name: $data.id,
                        }"
                        data-bind-model="$data.selected" 
                        data-bind-change="$root.onAdMessageCheck"
                    >
                    <label 
                        data-bind-attr="$root.getMessageCheckBoxLabelAttr($data)"
                        class="oi result-item__icon-checkbox-label" 
                        data-glyph="task" 
                        aria-label="Message this seller"
                    ></label>
                </div>
                <span 
                    data-bind-tmp="{id: 'searchResultItemBookMark', data: '$data'}" 
                ></span>
            </div>
        </template>

        <template id="searchResultItemBookMark">
            <span 
                class="oi result-item__icon" 
                data-glyph="bookmark" 
                data-bind-css="$data.bookmarkedCss" 
                data-bind-click="onAdBookmarkClick" 
            ></span>
            <span 
                class="oi result-item__icon" 
                data-glyph="thumb-up"
                data-bind-text="$data.numLikes"
            ></span>
        </template>

        <!-- Bootstrap 5 JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

        <!-- dataBind JavaScript -->
        <script src="../vendors/lodash.custom.min.js"></script>
        <!-- <script src="../dist/js/dataBind.js"></script> -->
        <script src="../dist/js/dataBind.min.js"></script>

        <!-- demo components JavaScript -->
        <script src="bootstrap/js/compSearchBar.js"></script>
        <script src="bootstrap/js/compSearchResults.js"></script>
        <script src="bootstrap/js/compMessageDialog.js"></script>
    </body>
</html>
