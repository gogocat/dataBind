{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/attrBinding.js","src/binder.js","src/blurBinding.js","src/changeBinding.js","src/clickBinding.js","src/commentWrapper.js","src/config.js","src/cssBinding.js","src/dbclickBinding.js","src/domWalker.js","src/focusBinding.js","src/forOfBinding.js","src/hoverBinding.js","src/ifBinding.js","src/index.js","src/modelBinding.js","src/pubSub.js","src/renderForOfBinding.js","src/renderIfBinding.js","src/renderTemplate.js","src/showBinding.js","src/submitBinding.js","src/switchBinding.js","src/textBinding.js","src/util.js"],"names":[],"mappings":"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","file":"dataBind.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {getViewModelPropValue, isPlainObject, isEmptyObject, each} from './util';\r\n\r\n/**\r\n * attrBinding\r\n * @description\r\n * DOM decleartive attr binding. update elenment attributes\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n */\r\nconst attrBinding = (cache, viewModel, bindingAttrs) => {\r\n    let dataKey = cache.dataKey;\r\n\r\n    if (!dataKey) {\r\n        return;\r\n    }\r\n\r\n    cache.elementData = cache.elementData || {};\r\n    cache.elementData.viewModelProValue = cache.elementData.viewModelProValue || {};\r\n\r\n    const oldAttrObj = cache.elementData.viewModelProValue;\r\n    const vmAttrObj = getViewModelPropValue(viewModel, cache);\r\n\r\n    if (!isPlainObject(vmAttrObj)) {\r\n        return;\r\n    }\r\n\r\n    // reject if nothing changed\r\n    if (JSON.stringify(oldAttrObj) === JSON.stringify(vmAttrObj)) {\r\n        return;\r\n    }\r\n\r\n    // reset old data and update it\r\n    cache.elementData.viewModelProValue = {};\r\n\r\n    if (isEmptyObject(oldAttrObj)) {\r\n        each(vmAttrObj, (key, value)=> {\r\n            cache.el.setAttribute(key, value);\r\n            // populate with vmAttrObj data\r\n            cache.elementData.viewModelProValue[key] = value;\r\n        });\r\n    } else {\r\n        each(oldAttrObj, (key, value)=> {\r\n            if (typeof vmAttrObj[key] === 'undefined') {\r\n                // remove attribute if not present in current vm\r\n                cache.el.removeAttribute(key);\r\n            }\r\n        });\r\n\r\n        each(vmAttrObj, (key, value)=> {\r\n            if (oldAttrObj[key] !== vmAttrObj[key]) {\r\n                // update attribute if value changed\r\n                cache.el.setAttribute(key, vmAttrObj[key]);\r\n            }\r\n            // populate with vmAttrObj data\r\n            cache.elementData.viewModelProValue[key] = value;\r\n        });\r\n    }\r\n};\r\n\r\nexport default attrBinding;\r\n","import * as config from './config';\r\nimport {debounceRaf, extend, each, throwErrorMessage} from './util';\r\nimport renderTemplate from './renderTemplate';\r\nimport clickBinding from './clickBinding';\r\nimport dblclickBinding from './dbclickBinding';\r\nimport blurBinding from './blurBinding';\r\nimport focusBinding from './focusBinding';\r\nimport hoverBinding from './hoverBinding';\r\nimport changeBinding from './changeBinding';\r\nimport modelBinding from './modelBinding';\r\nimport submitBinding from './submitBinding';\r\nimport textBinding from './textBinding';\r\nimport showBinding from './showBinding';\r\nimport cssBinding from './cssBinding';\r\nimport attrBinding from './attrBinding';\r\nimport forOfBinding from './forOfBinding';\r\nimport ifBinding from './ifBinding';\r\nimport switchBinding from './switchBinding';\r\nimport createBindingCache from './domWalker';\r\nimport * as pubSub from './pubSub';\r\n\r\nlet compIdIndex = 0;\r\n\r\nclass Binder {\r\n    constructor($rootElement, viewModel, bindingAttrs) {\r\n        if ($rootElement instanceof window.jQuery && $rootElement.length) {\r\n            $rootElement = $rootElement.eq(0)[0];\r\n        }\r\n\r\n        if (!$rootElement || $rootElement.nodeType !== 1 || viewModel === null || typeof viewModel !== 'object') {\r\n            throw new TypeError('$rootElement or viewModel is invalid');\r\n        }\r\n\r\n        this.initRendered = false;\r\n\r\n        this.compId = compIdIndex += 1;\r\n\r\n        this.$rootElement = $rootElement;\r\n\r\n        this.viewModel = viewModel;\r\n\r\n        this.bindingAttrs = bindingAttrs;\r\n\r\n        this.render = debounceRaf(this.render, this);\r\n\r\n        this.isServerRendered = this.$rootElement.getAttribute(config.serverRenderedAttr) !== null;\r\n\r\n        // inject instance into viewModel\r\n        this.viewModel.APP = this;\r\n\r\n        this.viewModel.$root = this.viewModel;\r\n\r\n        this.parseView();\r\n\r\n        // for jquery user set viewModel referece to $rootElement for easy debug\r\n        // otherwise use Expando to attach viewModel to $rootElement\r\n        if (window.jQuery) {\r\n            window.jQuery(this.$rootElement).data(config.bindingDataReference.rootDataKey, this.viewModel);\r\n        } else {\r\n            this.$rootElement[config.bindingDataReference.rootDataKey] = this.viewModel;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * parseView\r\n     * @description\r\n     * @return {this}\r\n     * traver from $rootElement to find each data-bind-* element\r\n     * then apply data binding\r\n     */\r\n    parseView() {\r\n        this.elementCache = createBindingCache({\r\n            rootNode: this.$rootElement,\r\n            bindingAttrs: this.bindingAttrs,\r\n        });\r\n\r\n        // updateElementCache if server rendered on init\r\n        if (this.isServerRendered && !this.initRendered) {\r\n            this.updateElementCache({\r\n                templateCache: true,\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * updateElementCache\r\n     * @param {object} opt\r\n     * @description call createBindingCache to parse view and generate bindingCache\r\n     */\r\n    updateElementCache(opt = {}) {\r\n        let elementCache = opt.elementCache || this.elementCache;\r\n\r\n        if (opt.allCache) {\r\n            // walk dom from root element to regenerate elementCache\r\n            this.elementCache = createBindingCache({\r\n                rootNode: this.$rootElement,\r\n                bindingAttrs: this.bindingAttrs,\r\n            });\r\n        }\r\n        // walk from first rendered template node to create/update child bindingCache\r\n        if (opt.allCache || opt.templateCache) {\r\n            if (elementCache[this.bindingAttrs.tmp] && elementCache[this.bindingAttrs.tmp].length) {\r\n                elementCache[this.bindingAttrs.tmp].forEach((cache) => {\r\n                    // set skipCheck as skipForOfParseFn whenever an node has\r\n                    // both template and forOf bindings\r\n                    // then the template bindingCache should be an empty object\r\n                    let skipForOfParseFn = null;\r\n                    if (cache.el.hasAttribute(this.bindingAttrs.forOf)) {\r\n                        skipForOfParseFn = () => {\r\n                            return true;\r\n                        };\r\n                    }\r\n                    cache.bindingCache = createBindingCache({\r\n                        rootNode: cache.el,\r\n                        bindingAttrs: this.bindingAttrs,\r\n                        skipCheck: skipForOfParseFn,\r\n                        isRenderedTemplate: opt.isRenderedTemplates,\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    render(opt = {}) {\r\n        let updateOption = {};\r\n        if (!this.initRendered) {\r\n            // only update eventsBinding if server rendered\r\n            if (this.isServerRendered) {\r\n                this.$rootElement.removeAttribute(config.serverRenderedAttr);\r\n                updateOption = createBindingOption(config.bindingUpdateConditions.serverRendered, opt);\r\n            } else {\r\n                updateOption = createBindingOption(config.bindingUpdateConditions.init, opt);\r\n            }\r\n        } else {\r\n            // when called again only update visualBinding options\r\n            updateOption = createBindingOption('', opt);\r\n        }\r\n\r\n        // create postProcessQueue before start rendering\r\n        this.postProcessQueue = [];\r\n\r\n        // render and apply binding to template(s)\r\n        // this is an share function therefore passing 'this' context\r\n        renderTemplatesBinding({\r\n            ctx: this,\r\n            elementCache: this.elementCache,\r\n            updateOption: updateOption,\r\n            bindingAttrs: this.bindingAttrs,\r\n            viewModel: this.viewModel,\r\n        });\r\n\r\n        // apply bindings to rest of the DOM\r\n        Binder.applyBinding({\r\n            ctx: this,\r\n            elementCache: this.elementCache,\r\n            updateOption: updateOption,\r\n            bindingAttrs: this.bindingAttrs,\r\n            viewModel: this.viewModel,\r\n        });\r\n\r\n        // trigger postProcess\r\n        Binder.postProcess(this.postProcessQueue);\r\n        // clear postProcessQueue\r\n        this.postProcessQueue.length = 0;\r\n        delete this.postProcessQueue;\r\n\r\n        this.initRendered = true;\r\n    }\r\n\r\n    static applyBinding({ctx, elementCache, updateOption, bindingAttrs, viewModel}) {\r\n        if (!elementCache || !updateOption) {\r\n            return;\r\n        }\r\n\r\n        // the follow binding should be in order for better efficiency\r\n\r\n        // apply forOf Binding\r\n        if (updateOption.forOfBinding && elementCache[bindingAttrs.forOf] && elementCache[bindingAttrs.forOf].length) {\r\n            elementCache[bindingAttrs.forOf].forEach((cache) => {\r\n                forOfBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply attr Binding\r\n        if (updateOption.attrBinding && elementCache[bindingAttrs.attr] && elementCache[bindingAttrs.attr].length) {\r\n            elementCache[bindingAttrs.attr].forEach((cache) => {\r\n                attrBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply if Binding\r\n        if (updateOption.ifBinding && elementCache[bindingAttrs.if] && elementCache[bindingAttrs.if].length) {\r\n            elementCache[bindingAttrs.if].forEach((cache) => {\r\n                ifBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply show Binding\r\n        if (updateOption.showBinding && elementCache[bindingAttrs.show] && elementCache[bindingAttrs.show].length) {\r\n            elementCache[bindingAttrs.show].forEach((cache) => {\r\n                showBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply switch Binding\r\n        if (\r\n            updateOption.switchBinding &&\r\n            elementCache[bindingAttrs.switch] &&\r\n            elementCache[bindingAttrs.switch].length\r\n        ) {\r\n            elementCache[bindingAttrs.switch].forEach((cache) => {\r\n                switchBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply text binding\r\n        if (updateOption.textBinding && elementCache[bindingAttrs.text] && elementCache[bindingAttrs.text].length) {\r\n            elementCache[bindingAttrs.text].forEach((cache) => {\r\n                textBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply cssBinding\r\n        if (updateOption.cssBinding && elementCache[bindingAttrs.css] && elementCache[bindingAttrs.css].length) {\r\n            elementCache[bindingAttrs.css].forEach((cache) => {\r\n                cssBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply model binding\r\n        if (updateOption.modelBinding && elementCache[bindingAttrs.model] && elementCache[bindingAttrs.model].length) {\r\n            elementCache[bindingAttrs.model].forEach((cache) => {\r\n                modelBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply change binding\r\n        if (\r\n            updateOption.changeBinding &&\r\n            elementCache[bindingAttrs.change] &&\r\n            elementCache[bindingAttrs.change].length\r\n        ) {\r\n            elementCache[bindingAttrs.change].forEach((cache) => {\r\n                changeBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply submit binding\r\n        if (\r\n            updateOption.submitBinding &&\r\n            elementCache[bindingAttrs.submit] &&\r\n            elementCache[bindingAttrs.submit].length\r\n        ) {\r\n            elementCache[bindingAttrs.submit].forEach((cache) => {\r\n                submitBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply click binding\r\n        if (updateOption.clickBinding && elementCache[bindingAttrs.click] && elementCache[bindingAttrs.click].length) {\r\n            elementCache[bindingAttrs.click].forEach((cache) => {\r\n                clickBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply double click binding\r\n        if (\r\n            updateOption.dblclickBinding &&\r\n            elementCache[bindingAttrs.dblclick] &&\r\n            elementCache[bindingAttrs.dblclick].length\r\n        ) {\r\n            elementCache[bindingAttrs.dblclick].forEach((cache) => {\r\n                dblclickBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply blur binding\r\n        if (updateOption.blurBinding && elementCache[bindingAttrs.blur] && elementCache[bindingAttrs.blur].length) {\r\n            elementCache[bindingAttrs.blur].forEach((cache) => {\r\n                blurBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply focus binding\r\n        if (updateOption.focusBinding && elementCache[bindingAttrs.focus] && elementCache[bindingAttrs.focus].length) {\r\n            elementCache[bindingAttrs.focus].forEach((cache) => {\r\n                focusBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n\r\n        // apply hover binding\r\n        if (updateOption.hoverBinding && elementCache[bindingAttrs.hover] && elementCache[bindingAttrs.hover].length) {\r\n            elementCache[bindingAttrs.hover].forEach((cache) => {\r\n                hoverBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\r\n            });\r\n        }\r\n    }\r\n\r\n    static postProcess(tasks) {\r\n        if (!tasks || !tasks.length) {\r\n            return;\r\n        }\r\n        each(tasks, (index, task) => {\r\n            if (typeof task === 'function') {\r\n                try {\r\n                    task();\r\n                } catch (err) {\r\n                    throwErrorMessage(err, 'Error postProcess: ' + String(task));\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    subscribe(eventName = '', fn) {\r\n        pubSub.subscribeEvent(this, eventName, fn);\r\n        return this;\r\n    }\r\n\r\n    subscribeOnce(eventName = '', fn) {\r\n        pubSub.subscribeEventOnce(this, eventName, fn);\r\n        return this;\r\n    }\r\n\r\n    unsubscribe(eventName = '') {\r\n        pubSub.unsubscribeEvent(this.compId, eventName);\r\n        return this;\r\n    }\r\n\r\n    unsubscribeAll() {\r\n        pubSub.unsubscribeAllEvent(this.compId);\r\n        return this;\r\n    }\r\n\r\n    publish(eventName = '', ...args) {\r\n        pubSub.publishEvent(eventName, ...args);\r\n        return this;\r\n    }\r\n}\r\n\r\nconst renderTemplatesBinding = ({ctx, elementCache, updateOption, bindingAttrs, viewModel}) => {\r\n    if (!elementCache || !bindingAttrs) {\r\n        return false;\r\n    }\r\n    // render and apply binding to template(s) and forOf DOM\r\n    if (elementCache[bindingAttrs.tmp] && elementCache[bindingAttrs.tmp].length) {\r\n        // when re-render call with {templateBinding: true}\r\n        // template and nested templates\r\n        if (updateOption.templateBinding) {\r\n            // overwrite updateOption with 'init' bindingUpdateConditions\r\n            updateOption = createBindingOption(config.bindingUpdateConditions.init);\r\n\r\n            elementCache[bindingAttrs.tmp].forEach(($element) => {\r\n                renderTemplate($element, viewModel, bindingAttrs, elementCache);\r\n            });\r\n            // update cache after all template(s) rendered\r\n            ctx.updateElementCache({\r\n                templateCache: true,\r\n                elementCache: elementCache,\r\n                isRenderedTemplates: true,\r\n            });\r\n        }\r\n        // enforce render even element is not in DOM tree\r\n        updateOption.forceRender = true;\r\n\r\n        // apply bindings to rendered templates element\r\n        elementCache[bindingAttrs.tmp].forEach((cache) => {\r\n            Binder.applyBinding({\r\n                elementCache: cache.bindingCache,\r\n                updateOption: updateOption,\r\n                bindingAttrs: bindingAttrs,\r\n                viewModel: viewModel,\r\n            });\r\n        });\r\n    }\r\n    return true;\r\n};\r\n\r\n/**\r\n * createBindingOption\r\n * @param {string} condition\r\n * @param {object} opt\r\n * @description\r\n * generate binding update option object by condition\r\n * @return {object} updateOption\r\n */\r\nconst createBindingOption = (condition = '', opt = {}) => {\r\n    let visualBindingOptions = {\r\n        templateBinding: false,\r\n        textBinding: true,\r\n        cssBinding: true,\r\n        ifBinding: true,\r\n        showBinding: true,\r\n        modelBinding: true,\r\n        attrBinding: true,\r\n        forOfBinding: true,\r\n        switchBinding: true,\r\n    };\r\n    let eventsBindingOptions = {\r\n        changeBinding: true,\r\n        clickBinding: true,\r\n        dblclickBinding: true,\r\n        blurBinding: true,\r\n        focusBinding: true,\r\n        hoverBinding: true,\r\n        submitBinding: true,\r\n    };\r\n    // this is visualBindingOptions but everything false\r\n    // concrete declear for performance purpose\r\n    let serverRenderedOptions = {\r\n        templateBinding: false,\r\n        textBinding: false,\r\n        cssBinding: false,\r\n        ifBinding: false,\r\n        showBinding: false,\r\n        modelBinding: false,\r\n        attrBinding: false,\r\n        forOfBinding: false,\r\n        switchBinding: false,\r\n    };\r\n    let updateOption = {};\r\n\r\n    switch (condition) {\r\n    case config.bindingUpdateConditions.serverRendered:\r\n        updateOption = extend({}, eventsBindingOptions, serverRenderedOptions, opt);\r\n        break;\r\n    case config.bindingUpdateConditions.init:\r\n        // flag templateBinding to true to render tempalte(s)\r\n        opt.templateBinding = true;\r\n        updateOption = extend({}, visualBindingOptions, eventsBindingOptions, opt);\r\n        break;\r\n    default:\r\n        // when called again only update visualBinding options\r\n        updateOption = extend({}, visualBindingOptions, opt);\r\n    }\r\n\r\n    return updateOption;\r\n};\r\n\r\n/**\r\n * renderIteration\r\n * @param {object} opt\r\n * @description\r\n * render element's binding by supplied elementCache\r\n * This function is desidned for FoOf, If, switch bindings\r\n */\r\nconst renderIteration = ({elementCache, iterationVm, bindingAttrs, isRegenerate}) => {\r\n    let bindingUpdateOption = isRegenerate\r\n        ? createBindingOption(config.bindingUpdateConditions.init)\r\n        : createBindingOption();\r\n\r\n    // enforce render even element is not in DOM tree\r\n    bindingUpdateOption.forceRender = true;\r\n\r\n    // render and apply binding to template(s)\r\n    // this is an share function therefore passing current APP 'this' context\r\n    // viewModel is a dynamic generated iterationVm\r\n    renderTemplatesBinding({\r\n        ctx: iterationVm.$root ? iterationVm.$root.APP : iterationVm.APP,\r\n        elementCache: elementCache,\r\n        updateOption: bindingUpdateOption,\r\n        bindingAttrs: bindingAttrs,\r\n        viewModel: iterationVm,\r\n    });\r\n\r\n    Binder.applyBinding({\r\n        elementCache: elementCache,\r\n        updateOption: bindingUpdateOption,\r\n        bindingAttrs: bindingAttrs,\r\n        viewModel: iterationVm,\r\n    });\r\n};\r\n\r\nexport {Binder, createBindingOption, renderTemplatesBinding, renderIteration};\r\n","/* eslint-disable no-invalid-this */\r\nimport {getViewModelValue, resolveViewModelContext, resolveParamList} from './util';\r\n\r\n/**\r\n * blurBinding\r\n * DOM decleartive on blur event binding\r\n * event handler bind to viewModel method according to the DOM attribute\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst blurBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let handlerName = cache.dataKey;\r\n    let paramList = cache.parameters;\r\n    let handlerFn;\r\n    let viewModelContext;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!handlerName || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    handlerFn = getViewModelValue(viewModel, handlerName);\r\n\r\n    if (typeof handlerFn === 'function') {\r\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n\r\n        $(cache.el)\r\n            .off('blur.databind')\r\n            .on('blur.databind', function(e) {\r\n                let args = [e, $(this)].concat(paramList);\r\n                handlerFn.apply(viewModelContext, args);\r\n            });\r\n    }\r\n};\r\n\r\nexport default blurBinding;\r\n","/* eslint-disable no-invalid-this */\r\nimport {getViewModelValue, setViewModelValue, resolveViewModelContext, resolveParamList} from './util';\r\n\r\n/**\r\n * changeBinding\r\n * @description input element on change event binding. DOM -> viewModel update\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst changeBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let handlerName = cache.dataKey;\r\n    let paramList = cache.parameters;\r\n    let modelDataKey = cache.el.getAttribute(bindingAttrs.model);\r\n    let handlerFn;\r\n    let newValue = '';\r\n    let oldValue = '';\r\n    let viewModelContext;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!handlerName || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    handlerFn = getViewModelValue(viewModel, handlerName);\r\n\r\n    if (typeof handlerFn === 'function') {\r\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n\r\n        // assing on change event\r\n        $(cache.el)\r\n            .off('change.databind')\r\n            .on('change.databind', function(e) {\r\n                let $this = $(this);\r\n                let isCheckbox = $this.is(':checkbox');\r\n                newValue = isCheckbox ? $this.prop('checked') : _.escape($this.val());\r\n                // set data to viewModel\r\n                if (modelDataKey) {\r\n                    oldValue = getViewModelValue(viewModel, modelDataKey);\r\n                    setViewModelValue(viewModel, modelDataKey, newValue);\r\n                }\r\n                let args = [e, $this, newValue, oldValue].concat(paramList);\r\n                handlerFn.apply(viewModelContext, args);\r\n                oldValue = newValue;\r\n            });\r\n    }\r\n};\r\n\r\nexport default changeBinding;\r\n","/* eslint-disable no-invalid-this */\r\nimport {getViewModelValue, resolveViewModelContext, resolveParamList} from './util';\r\n\r\n/**\r\n * clickBinding\r\n * @description\r\n * DOM decleartive click event binding\r\n * event handler bind to viewModel method according to the DOM attribute\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst clickBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let handlerName = cache.dataKey;\r\n    let paramList = cache.parameters;\r\n    let handlerFn;\r\n    let viewModelContext;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!handlerName || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    handlerFn = getViewModelValue(viewModel, handlerName);\r\n\r\n    if (typeof handlerFn === 'function') {\r\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n        $(cache.el)\r\n            .off('click.databind')\r\n            .on('click.databind', function(e) {\r\n                let args = [e, $(this)].concat(paramList);\r\n                handlerFn.apply(viewModelContext, args);\r\n            });\r\n    }\r\n};\r\n\r\nexport default clickBinding;\r\n","/* eslint-disable no-invalid-this */\r\nimport * as config from './config';\r\nimport * as util from './util';\r\n\r\nconst createClonedElementCache = (bindingData) => {\r\n    const clonedElement = bindingData.el.cloneNode(true);\r\n    bindingData.fragment = document.createDocumentFragment();\r\n    bindingData.fragment.appendChild(clonedElement);\r\n    return bindingData;\r\n};\r\n\r\nconst setCommentPrefix = (bindingData) => {\r\n    if (!bindingData || !bindingData.type) {\r\n        return;\r\n    }\r\n    let commentPrefix = '';\r\n    const dataKeyMarker = bindingData.dataKey ? bindingData.dataKey.replace(util.REGEX.WHITESPACES, '_') : '';\r\n\r\n    switch (bindingData.type) {\r\n    case config.bindingAttrs.forOf:\r\n        commentPrefix = config.commentPrefix.forOf;\r\n        break;\r\n    case config.bindingAttrs.if:\r\n        commentPrefix = config.commentPrefix.if;\r\n        break;\r\n    case config.bindingAttrs.case:\r\n        commentPrefix = config.commentPrefix.case;\r\n        break;\r\n    case config.bindingAttrs.default:\r\n        commentPrefix = config.commentPrefix.default;\r\n        break;\r\n    }\r\n    bindingData.commentPrefix = commentPrefix + dataKeyMarker;\r\n    return bindingData;\r\n};\r\n\r\n/**\r\n * setDocRangeEndAfter\r\n * @param {object} node\r\n * @param {object} bindingData\r\n * @description\r\n * recursive execution to find last wrapping comment node\r\n * and set as bindingData.docRange.setEndAfter\r\n * if not found deleteContents will has no operation\r\n * @return {undefined}\r\n */\r\nconst setDocRangeEndAfter = (node, bindingData) => {\r\n    if (!bindingData.commentPrefix) {\r\n        setCommentPrefix(bindingData);\r\n    }\r\n    let startTextContent = bindingData.commentPrefix;\r\n    let endTextContent = startTextContent + config.commentSuffix;\r\n    node = node.nextSibling;\r\n\r\n    // check last wrap comment node\r\n    if (node) {\r\n        if (node.nodeType === 8 && node.textContent === endTextContent) {\r\n            return bindingData.docRange.setEndBefore(node);\r\n        }\r\n        setDocRangeEndAfter(node, bindingData);\r\n    }\r\n};\r\n\r\n/**\r\n * wrapCommentAround\r\n * @param {object} bindingData\r\n * @param {Node} node\r\n * @return {object} DOM fragment\r\n * @description\r\n * wrap frament with comment node\r\n */\r\nconst wrapCommentAround = (bindingData, node) => {\r\n    let commentBegin;\r\n    let commentEnd;\r\n    let prefix = '';\r\n    if (!bindingData.commentPrefix) {\r\n        setCommentPrefix(bindingData);\r\n    }\r\n    prefix = bindingData.commentPrefix;\r\n    commentBegin = document.createComment(prefix);\r\n    commentEnd = document.createComment(prefix + config.commentSuffix);\r\n    // document fragment - logic for ForOf binding\r\n    // check node.parentNode because node could be from cache and no longer in DOM\r\n    if (node.nodeType === 11) {\r\n        node.insertBefore(commentBegin, node.firstChild);\r\n        node.appendChild(commentEnd);\r\n    } else if (node.parentNode) {\r\n        node.parentNode.insertBefore(commentBegin, node);\r\n        util.insertAfter(node.parentNode, commentEnd, node);\r\n        // update bindingData details\r\n        bindingData.previousNonTemplateElement = node.previousSibling;\r\n        bindingData.nextNonTemplateElement = node.nextSibling;\r\n        bindingData.parentElement = node.previousSibling.parentElement;\r\n    }\r\n\r\n    return node;\r\n};\r\n\r\n/**\r\n * removeElemnetsByCommentWrap\r\n * @param {object} bindingData\r\n * @return {undefined}\r\n * @description remove elments by range\r\n */\r\nconst removeElemnetsByCommentWrap = (bindingData) => {\r\n    if (!bindingData.docRange) {\r\n        bindingData.docRange = document.createRange();\r\n    }\r\n    try {\r\n        if (bindingData.previousNonTemplateElement) {\r\n            // update docRange start and end match the wrapped comment node\r\n            bindingData.docRange.setStartBefore(bindingData.previousNonTemplateElement.nextSibling);\r\n            setDocRangeEndAfter(bindingData.previousNonTemplateElement.nextSibling, bindingData);\r\n        } else {\r\n            // insert before next non template element\r\n            bindingData.docRange.setStartBefore(bindingData.parentElement.firstChild);\r\n            setDocRangeEndAfter(bindingData.parentElement.firstChild, bindingData);\r\n        }\r\n    } catch (err) {\r\n        console.log('error removeElemnetsByCommentWrap: ', err.message);\r\n    }\r\n\r\n    return bindingData.docRange.deleteContents();\r\n};\r\n\r\n/**\r\n * removeDomTemplateElement\r\n * @param {object} bindingData\r\n * @return {object} null\r\n */\r\nconst removeDomTemplateElement = (bindingData) => {\r\n    // first render - forElement is live DOM element so has parentNode\r\n    if (bindingData.el.parentNode) {\r\n        return bindingData.el.parentNode.removeChild(bindingData.el);\r\n    }\r\n    removeElemnetsByCommentWrap(bindingData);\r\n};\r\n\r\nconst insertRenderedElements = (bindingData, fragment) => {\r\n    // insert rendered fragment after the previousNonTemplateElement\r\n    if (bindingData.previousNonTemplateElement) {\r\n        util.insertAfter(bindingData.parentElement, fragment, bindingData.previousNonTemplateElement);\r\n    } else {\r\n        // insert before next non template element\r\n        if (bindingData.nextNonTemplateElement) {\r\n            bindingData.parentElement.insertBefore(fragment, bindingData.nextNonTemplateElement);\r\n        } else if (bindingData.parentElement) {\r\n            // insert from parent\r\n            bindingData.parentElement.appendChild(fragment);\r\n        }\r\n    }\r\n};\r\n\r\nexport {\r\n    createClonedElementCache,\r\n    setCommentPrefix,\r\n    wrapCommentAround,\r\n    removeElemnetsByCommentWrap,\r\n    removeDomTemplateElement,\r\n    setDocRangeEndAfter,\r\n    insertRenderedElements,\r\n};\r\n","const bindingAttrs = {\r\n    comp: 'data-jq-comp',\r\n    tmp: 'data-jq-tmp',\r\n    text: 'data-jq-text',\r\n    click: 'data-jq-click',\r\n    dblclick: 'data-jq-dblclick',\r\n    blur: 'data-jq-blur',\r\n    focus: 'data-jq-focus',\r\n    hover: 'data-jq-hover',\r\n    change: 'data-jq-change',\r\n    submit: 'data-jq-submit',\r\n    model: 'data-jq-model',\r\n    show: 'data-jq-show',\r\n    css: 'data-jq-css',\r\n    attr: 'data-jq-attr',\r\n    forOf: 'data-jq-for',\r\n    if: 'data-jq-if',\r\n    switch: 'data-jq-switch',\r\n    case: 'data-jq-case',\r\n    default: 'data-jq-default',\r\n};\r\nconst serverRenderedAttr = 'data-server-rendered';\r\nconst dataIndexAttr = 'data-index';\r\nconst commentPrefix = {\r\n    forOf: 'data-forOf_',\r\n    if: 'data-if_',\r\n    case: 'data-case_',\r\n    default: 'data-default_',\r\n};\r\nconst commentSuffix = '_end';\r\n\r\n// global setting of underscore template inteprolate default token\r\nconst templateSettings = {\r\n    evaluate: /<%([\\s\\S]+?)%>/g,\r\n    interpolate: /\\{\\{=(.+?)\\}\\}/g,\r\n    escape: /\\{\\{(.+?)\\}\\}/g,\r\n};\r\n\r\nconst bindingDataReference = {\r\n    rootDataKey: '$root',\r\n    currentData: '$data',\r\n    currentIndex: '$index',\r\n    mouseEnterHandlerName: 'in',\r\n    mouseLeaveHandlerName: 'out',\r\n};\r\n\r\nconst bindingUpdateConditions = {\r\n    serverRendered: 'SERVER-RENDERED',\r\n    init: 'INIT',\r\n};\r\n\r\n// maximum string length before running regex\r\nconst maxDatakeyLength = 50;\r\n\r\nconst constants = {\r\n    filters: {\r\n        ONCE: 'once',\r\n    },\r\n    PARENT_REF: '_parent',\r\n};\r\n\r\nexport {\r\n    bindingAttrs,\r\n    dataIndexAttr,\r\n    templateSettings,\r\n    serverRenderedAttr,\r\n    commentPrefix,\r\n    commentSuffix,\r\n    bindingUpdateConditions,\r\n    bindingDataReference,\r\n    maxDatakeyLength,\r\n    constants,\r\n};\r\n","import {getViewModelPropValue, isPlainObject, arrayRemoveMatch, each} from './util';\r\n\r\n/**\r\n * cssBinding\r\n * @description\r\n * DOM decleartive css binding. update classlist.\r\n * viewModel data can function but must return JSOL.\r\n * added css class if value is true\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst cssBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let dataKey = cache.dataKey;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!dataKey || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    cache.elementData = cache.elementData || {};\r\n    cache.elementData.viewModelPropValue = cache.elementData.viewModelPropValue || '';\r\n\r\n    // let $element = $(cache.el);\r\n    let oldCssList = cache.elementData.viewModelPropValue;\r\n    let newCssList = '';\r\n    let vmCssListObj = getViewModelPropValue(viewModel, cache);\r\n    let vmCssListArray = [];\r\n    let isViewDataObject = false;\r\n    let isViewDataString = false;\r\n    let cssList = [];\r\n\r\n    if (typeof vmCssListObj === 'string') {\r\n        isViewDataString = true;\r\n    } else if (isPlainObject(vmCssListObj)) {\r\n        isViewDataObject = true;\r\n    } else {\r\n        // reject if vmCssListObj is not an object or string\r\n        return;\r\n    }\r\n\r\n    if (isViewDataObject) {\r\n        newCssList = JSON.stringify(vmCssListObj);\r\n    } else {\r\n        newCssList = vmCssListObj.replace(/\\s\\s+/g, ' ').trim();\r\n        vmCssListArray = newCssList.split(' ');\r\n    }\r\n    // reject if nothing changed\r\n    if (oldCssList === newCssList) {\r\n        return;\r\n    }\r\n\r\n    // get current css classes from element\r\n    let domCssList = cache.el.classList;\r\n    // clone domCssList as new array\r\n    let domCssListLength = domCssList.length;\r\n    for (let i = 0; i < domCssListLength; i += 1) {\r\n        cssList.push(domCssList[i]);\r\n    }\r\n\r\n    if (isViewDataObject) {\r\n        each(vmCssListObj, function(k, v) {\r\n            let i = cssList.indexOf(k);\r\n            if (v === true) {\r\n                cssList.push(k);\r\n            } else if (i !== -1) {\r\n                cssList.splice(i, 1);\r\n            }\r\n        });\r\n    } else if (isViewDataString) {\r\n        // remove oldCssList items from cssList\r\n        cssList = arrayRemoveMatch(cssList, oldCssList);\r\n        cssList = cssList.concat(vmCssListArray);\r\n    }\r\n\r\n    // unique cssList array\r\n    cssList = cssList.filter((v, i, a) => {\r\n        return a.indexOf(v) === i;\r\n    });\r\n\r\n    cssList = cssList.join(' ');\r\n    // update element data\r\n    cache.elementData.viewModelPropValue = newCssList;\r\n    // replace all css classes\r\n    cache.el.setAttribute('class', cssList);\r\n};\r\n\r\nexport default cssBinding;\r\n","/* eslint-disable no-invalid-this */\r\nimport {getViewModelValue, resolveViewModelContext, resolveParamList} from './util';\r\n\r\n/**\r\n * dblclickBinding\r\n * DOM decleartive double click event binding\r\n * event handler bind to viewModel method according to the DOM attribute\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst dblclickBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let handlerName = cache.dataKey;\r\n    let paramList = cache.parameters;\r\n    let handlerFn;\r\n    let viewModelContext;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!handlerName || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    handlerFn = getViewModelValue(viewModel, handlerName);\r\n\r\n    if (typeof handlerFn === 'function') {\r\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n        $(cache.el)\r\n            .off('dblclick.databind')\r\n            .on('dblclick.databind', function(e) {\r\n                let args = [e, $(this)].concat(paramList);\r\n                handlerFn.apply(viewModelContext, args);\r\n            });\r\n    }\r\n};\r\n\r\nexport default dblclickBinding;\r\n","import {invertObj, extractFilterList, getFunctionParameterList, REGEX} from './util';\r\nimport {constants} from './config';\r\n\r\nlet bindingAttrsMap;\r\n\r\n/**\r\n * walkDOM\r\n * @description by Douglas Crockford - walk each DOM node and calls provided callback function\r\n * start walk from firstChild\r\n * @param {object} node\r\n * @param {function} func\r\n */\r\nconst walkDOM = (node, func) => {\r\n    let parseChildNode = true;\r\n    node = node.firstElementChild;\r\n    while (node) {\r\n        parseChildNode = func(node);\r\n        if (parseChildNode) {\r\n            walkDOM(node, func);\r\n        }\r\n        node = node.nextElementSibling;\r\n    }\r\n};\r\n\r\nconst getAttributesObject = (node) => {\r\n    let ret = {};\r\n    Array.prototype.slice.call(node.attributes).forEach((item) => {\r\n        ret[item.name] = item.value;\r\n    });\r\n    return ret;\r\n};\r\n\r\nconst checkSkipChildParseBindings = (attrObj = {}, bindingAttrs) => {\r\n    return [bindingAttrs.forOf, bindingAttrs.if, bindingAttrs.case, bindingAttrs.default].filter((type) => {\r\n        return typeof attrObj[type] !== 'undefined';\r\n    });\r\n};\r\n\r\nconst rootSkipCheck = (node) => {\r\n    return node.tagName === 'SVG';\r\n};\r\n\r\nconst defaultSkipCheck = (node, bindingAttrs) => {\r\n    return node.tagName === 'SVG' || node.hasAttribute(bindingAttrs.comp);\r\n};\r\n\r\nconst populateBindingCache = ({node, attrObj, bindingCache, type}) => {\r\n    let attrValue;\r\n    let cacheData;\r\n\r\n    if (bindingAttrsMap && bindingAttrsMap[type] && typeof attrObj[type] !== 'undefined') {\r\n        bindingCache[type] = bindingCache[type] || [];\r\n        attrValue = attrObj[type].trim();\r\n        cacheData = {\r\n            el: node,\r\n            dataKey: attrValue,\r\n        };\r\n\r\n        // populate cacheData.filters. update filterList first item as dataKey\r\n        cacheData = extractFilterList(cacheData);\r\n\r\n        // populate cacheData.parameters\r\n        // for store function call parameters eg. '$index', '$root'\r\n        // useful with DOM for-loop template as reference to binding data\r\n        let paramList = getFunctionParameterList(cacheData.dataKey);\r\n        if (paramList) {\r\n            cacheData.parameters = paramList;\r\n            cacheData.dataKey = cacheData.dataKey.replace(REGEX.FUNCTIONPARAM, '').trim();\r\n        }\r\n        // store parent array reference to cacheData\r\n        cacheData[constants.PARENT_REF] = bindingCache[type];\r\n        bindingCache[type].push(cacheData);\r\n    }\r\n    return bindingCache;\r\n};\r\n\r\nconst createBindingCache = ({rootNode = null, bindingAttrs = {}, skipCheck, isRenderedTemplate = false}) => {\r\n    let bindingCache = {};\r\n\r\n    if (!rootNode instanceof window.Node) {\r\n        throw new TypeError('walkDOM: Expected a DOM node');\r\n    }\r\n\r\n    bindingAttrsMap = bindingAttrsMap || invertObj(bindingAttrs);\r\n\r\n    const parseNode = (node, skipNodeCheckFn = defaultSkipCheck) => {\r\n        let attrObj;\r\n        let isSkipForOfChild = false;\r\n\r\n        if (node.nodeType !== 1 || !node.hasAttributes()) {\r\n            return true;\r\n        }\r\n        if (skipNodeCheckFn(node, bindingAttrs) || (typeof skipCheck === 'function' && skipCheck(node))) {\r\n            return false;\r\n        }\r\n\r\n        // when creating sub bindingCache if is for tmp binding\r\n        // skip same element that has forOf binding the  forOf is alredy parsed\r\n        attrObj = getAttributesObject(node);\r\n        const hasSkipChildParseBindings = checkSkipChildParseBindings(attrObj, bindingAttrs);\r\n        let iterateList = [];\r\n\r\n        if (hasSkipChildParseBindings.length) {\r\n            isSkipForOfChild = true;\r\n            iterateList = hasSkipChildParseBindings;\r\n        } else if (isRenderedTemplate && attrObj[bindingAttrs.tmp]) {\r\n            // skip current node parse if was called by node has template binding and already rendered\r\n            return true;\r\n        } else {\r\n            iterateList = Object.keys(attrObj);\r\n        }\r\n\r\n        iterateList.forEach((key) => {\r\n            // skip for switch case and default bining\r\n            if (key !== bindingAttrs.case && key !== bindingAttrs.default) {\r\n                bindingCache = populateBindingCache({\r\n                    node: node,\r\n                    attrObj: attrObj,\r\n                    bindingCache: bindingCache,\r\n                    type: key,\r\n                });\r\n            }\r\n        });\r\n\r\n        // after cache forOf skip parse child nodes\r\n        if (isSkipForOfChild) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    if (parseNode(rootNode, rootSkipCheck)) {\r\n        walkDOM(rootNode, parseNode);\r\n    }\r\n    return bindingCache;\r\n};\r\n\r\nexport default createBindingCache;\r\n","/* eslint-disable no-invalid-this */\r\nimport {getViewModelValue, resolveViewModelContext, resolveParamList} from './util';\r\n\r\n/**\r\n * focusBinding\r\n * DOM decleartive on focus event binding\r\n * event handler bind to viewModel method according to the DOM attribute\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst focusBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let handlerName = cache.dataKey;\r\n    let paramList = cache.parameters;\r\n    let handlerFn;\r\n    let viewModelContext;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!handlerName || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    handlerFn = getViewModelValue(viewModel, handlerName);\r\n\r\n    if (typeof handlerFn === 'function') {\r\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n        $(cache.el)\r\n            .off('focus.databind')\r\n            .on('focus.databind', function(e) {\r\n                let args = [e, $(this)].concat(paramList);\r\n                handlerFn.apply(viewModelContext, args);\r\n            });\r\n    }\r\n};\r\n\r\nexport default focusBinding;\r\n","import {maxDatakeyLength} from './config';\r\nimport {REGEX} from './util';\r\nimport renderForOfBinding from './renderForOfBinding';\r\n\r\n/**\r\n * forOfBinding\r\n * @description\r\n * DOM decleartive for binding.\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n */\r\nconst forOfBinding = (cache, viewModel, bindingAttrs) => {\r\n    let dataKey = cache.dataKey;\r\n\r\n    if (!dataKey || dataKey.length > maxDatakeyLength) {\r\n        return;\r\n    }\r\n\r\n    if (!cache.iterator) {\r\n        if (dataKey.length > maxDatakeyLength) {\r\n            return;\r\n        }\r\n        // replace mess spaces with single space\r\n        cache.dataKey = cache.dataKey.replace(REGEX.WHITESPACES, ' ');\r\n        let forExpMatch = dataKey.match(REGEX.FOROF);\r\n\r\n        if (!forExpMatch) {\r\n            return;\r\n        }\r\n\r\n        cache.iterator = {};\r\n        cache.iterator.alias = forExpMatch[1].trim();\r\n\r\n        if (forExpMatch[2]) {\r\n            cache.iterator.dataKey = forExpMatch[2].trim();\r\n            cache.parentElement = cache.el.parentElement;\r\n            cache.previousNonTemplateElement = cache.el.previousSibling;\r\n            cache.nextNonTemplateElement = cache.el.nextSibling;\r\n        }\r\n    }\r\n\r\n    renderForOfBinding({\r\n        bindingData: cache,\r\n        viewModel: viewModel,\r\n        bindingAttrs: bindingAttrs,\r\n    });\r\n};\r\n\r\nexport default forOfBinding;\r\n","/* eslint-disable no-invalid-this */\r\nimport {bindingDataReference} from './config';\r\nimport {getViewModelValue, resolveViewModelContext, resolveParamList} from './util';\r\n\r\n/**\r\n * blurBinding\r\n * DOM decleartive on blur event binding\r\n * event handler bind to viewModel method according to the DOM attribute\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst hoverBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let handlerName = cache.dataKey;\r\n    let paramList = cache.parameters;\r\n    const inHandlerName = bindingDataReference.mouseEnterHandlerName;\r\n    const outHandlerName = bindingDataReference.mouseLeaveHandlerName;\r\n    let handlers;\r\n    let viewModelContext;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    cache.elementData = cache.elementData || {};\r\n\r\n    if (!handlerName || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    handlers = getViewModelValue(viewModel, handlerName);\r\n\r\n    if (handlers && typeof handlers[inHandlerName] === 'function' && typeof handlers[outHandlerName] === 'function') {\r\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n\r\n        $(cache.el)\r\n            .off('mouseenter.databind mouseleave.databind')\r\n            .hover(\r\n                function enter(e) {\r\n                    let args = [e, cache.el].concat(paramList);\r\n                    handlers[inHandlerName].apply(viewModelContext, args);\r\n                },\r\n                function leave(e) {\r\n                    let args = [e, cache.el].concat(paramList);\r\n                    handlers[outHandlerName].apply(viewModelContext, args);\r\n                }\r\n            );\r\n    }\r\n};\r\n\r\nexport default hoverBinding;\r\n","import {bindingAttrs as configBindingAttrs, constants} from './config';\r\nimport {getViewModelPropValue, removeElement} from './util';\r\nimport {createClonedElementCache, wrapCommentAround} from './commentWrapper';\r\nimport {renderIfBinding, removeIfBinding} from './renderIfBinding';\r\n\r\n/**\r\n * if-Binding\r\n * @description\r\n * DOM decleartive for binding.\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n */\r\nconst ifBinding = (cache, viewModel, bindingAttrs) => {\r\n    let dataKey = cache.dataKey;\r\n\r\n    // isOnce only return if there is no child bindings\r\n    if (!dataKey || (cache.isOnce && cache.hasIterationBindingCache === false)) {\r\n        return;\r\n    }\r\n\r\n    cache.elementData = cache.elementData || {};\r\n    cache.type = cache.type || configBindingAttrs.if;\r\n\r\n    let oldViewModelProValue = cache.elementData.viewModelPropValue;\r\n    // getViewModelPropValue could be return undefined or null\r\n    let viewModelPropValue = getViewModelPropValue(viewModel, cache) || false;\r\n\r\n    // do nothing if viewModel value not changed and no child bindings\r\n    if (oldViewModelProValue === viewModelPropValue && !cache.hasIterationBindingCache) {\r\n        return;\r\n    }\r\n\r\n    let shouldRender = Boolean(viewModelPropValue);\r\n\r\n    // remove this cache from parent array\r\n    if (!shouldRender && cache.isOnce && cache.el.parentNode) {\r\n        removeElement(cache.el);\r\n        // delete cache.fragment;\r\n        removeBindingInQueue({\r\n            viewModel: viewModel,\r\n            cache: cache,\r\n        });\r\n        return;\r\n    }\r\n\r\n    // store new show status\r\n    cache.elementData.viewModelPropValue = viewModelPropValue;\r\n\r\n    // only create fragment once\r\n    // wrap comment tag around\r\n    // remove if attribute from original element to allow later dataBind parsing\r\n    if (!cache.fragment) {\r\n        wrapCommentAround(cache, cache.el);\r\n        cache.el.removeAttribute(bindingAttrs.if);\r\n        createClonedElementCache(cache);\r\n    }\r\n\r\n    if (!shouldRender) {\r\n        // remove element\r\n        removeIfBinding(cache);\r\n    } else {\r\n        // render element\r\n        renderIfBinding({\r\n            bindingData: cache,\r\n            viewModel: viewModel,\r\n            bindingAttrs: bindingAttrs,\r\n        });\r\n\r\n        // if render once\r\n        // remove this cache from parent array if no child caches\r\n        if (cache.isOnce && !cache.hasIterationBindingCache) {\r\n            // delete cache.fragment;\r\n            removeBindingInQueue({\r\n                viewModel: viewModel,\r\n                cache: cache,\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nconst removeBindingInQueue = ({viewModel, cache}) => {\r\n    let ret = false;\r\n    if (viewModel.APP.postProcessQueue) {\r\n        viewModel.APP.postProcessQueue.push(\r\n            ((cache, index) => () => {\r\n                cache[constants.PARENT_REF].splice(index, 1);\r\n            })(cache, cache[constants.PARENT_REF].indexOf(cache))\r\n        );\r\n        ret = true;\r\n    }\r\n    return ret;\r\n};\r\n\r\nexport default ifBinding;\r\n","import * as config from './config';\r\nimport {Binder} from './binder';\r\n\r\nlet bindingAttrs = config.bindingAttrs;\r\nlet templateSettings = config.templateSettings;\r\n\r\nconst use = (settings = {}) => {\r\n    if (settings.bindingAttrs) {\r\n        bindingAttrs = $.extend({}, settings.bindingAttrs);\r\n    }\r\n    if (settings.templateSettings) {\r\n        templateSettings = $.extend({}, settings.templateSettings);\r\n    }\r\n};\r\n\r\nconst init = ($rootElement, viewModel = null) => {\r\n    _.templateSettings = templateSettings;\r\n    return new Binder($rootElement, viewModel, bindingAttrs);\r\n};\r\n\r\n// expose to global\r\nwindow.dataBind = {\r\n    use: use,\r\n    init: init,\r\n    version: '1.8.1',\r\n};\r\n","import {getViewModelValue} from './util';\r\n\r\n/**\r\n * modelBinding\r\n * @description input element data binding. viewModel -> DOM update\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst modelBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let dataKey = cache.dataKey;\r\n    let newValue = '';\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!dataKey || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    newValue = getViewModelValue(viewModel, dataKey);\r\n\r\n    if (typeof newValue !== 'undefined' && newValue !== null) {\r\n        let $element = $(cache.el);\r\n        let isCheckbox = $element.is(':checkbox');\r\n        let isRadio = $element.is(':radio');\r\n        let inputName = $element[0].name;\r\n        let $radioGroup = isRadio ? $('input[name=\"' + inputName + '\"]') : null;\r\n        let oldValue = isCheckbox ? $element.prop('checked') : $element.val();\r\n\r\n        // update element value\r\n        if (newValue !== oldValue) {\r\n            if (isCheckbox) {\r\n                $element.prop('checked', Boolean(newValue));\r\n            } else if (isRadio) {\r\n                $radioGroup.val([newValue]);\r\n            } else {\r\n                $element.val(newValue);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport default modelBinding;\r\n","import * as util from './util';\r\n\r\n/**\r\n *  pubSub\r\n * @description use jQuery object as pubSub\r\n * @example EVENTS object strucure:\r\n *  EVENTS = {\r\n        'EVENT-NAME': [{ 'comp-id': fn }],\r\n        'EVENT-NAME2': [{ 'comp-id': fn }]\r\n    };\r\n */\r\n\r\nlet EVENTS = {};\r\n\r\nconst subscribeEvent = (instance = null, eventName = '', fn, isOnce = false) => {\r\n    if (!instance || !instance.compId || !eventName || typeof fn !== 'function') {\r\n        return;\r\n    }\r\n\r\n    let subscriber;\r\n    let isSubscribed = false;\r\n\r\n    eventName = eventName.replace(util.REGEX.WHITESPACES, '');\r\n    EVENTS[eventName] = EVENTS[eventName] || [];\r\n    // check if already subscribed and update callback fn\r\n    isSubscribed = EVENTS[eventName].some((subscriber) => {\r\n        if (subscriber[instance.compId]) {\r\n            subscriber[instance.compId] = fn.bind(instance.viewModel);\r\n            subscriber.isOnce = isOnce;\r\n            return true;\r\n        }\r\n    });\r\n    // push if not yet subscribe\r\n    if (!isSubscribed) {\r\n        subscriber = {};\r\n        subscriber[instance.compId] = fn.bind(instance.viewModel);\r\n        subscriber.isOnce = isOnce;\r\n        EVENTS[eventName].push(subscriber);\r\n    }\r\n};\r\n\r\nconst subscribeEventOnce = (instance = null, eventName = '', fn) => {\r\n    subscribeEvent(instance, eventName, fn, true);\r\n};\r\n\r\nconst unsubscribeEvent = (compId = '', eventName = '') => {\r\n    if (!compId || !eventName) {\r\n        return;\r\n    }\r\n\r\n    let i = 0;\r\n    let subscribersLength = 0;\r\n    let subscriber;\r\n\r\n    eventName = eventName.replace(util.REGEX.WHITESPACES, '');\r\n\r\n    if (EVENTS[eventName]) {\r\n        subscribersLength = EVENTS[eventName].length;\r\n        for (i = 0; i < subscribersLength; i += 1) {\r\n            subscriber = EVENTS[eventName][i];\r\n            if (subscriber[compId]) {\r\n                EVENTS[eventName].splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    // delete the event if no more subscriber\r\n    if (!EVENTS[eventName].length) {\r\n        delete EVENTS[eventName];\r\n    }\r\n};\r\n\r\n/**\r\n * unsubscribeAllEvent\r\n * @description unsubscribe all event by compId. eg when a component removed\r\n * @param {string} compId\r\n */\r\nconst unsubscribeAllEvent = (compId = '') => {\r\n    if (!compId) {\r\n        return;\r\n    }\r\n    Object.keys(EVENTS).forEach((eventName) => {\r\n        unsubscribeEvent(compId, eventName);\r\n    });\r\n};\r\n\r\nconst publishEvent = (eventName = '', ...args) => {\r\n    if (!eventName || !EVENTS[eventName]) {\r\n        return;\r\n    }\r\n\r\n    eventName = eventName.replace(util.REGEX.WHITESPACES, '');\r\n\r\n    EVENTS[eventName].forEach((subscriber) => {\r\n        Object.keys(subscriber).forEach((compId) => {\r\n            if (typeof subscriber[compId] === 'function') {\r\n                let ret = subscriber[compId](...args);\r\n                if (subscriber.isOnce) {\r\n                    unsubscribeEvent(compId, eventName);\r\n                }\r\n                return ret;\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\nexport {subscribeEvent, subscribeEventOnce, unsubscribeEvent, unsubscribeAllEvent, publishEvent};\r\n","/* eslint-disable no-invalid-this */\r\nimport {bindingAttrs as configBindingAttrs, bindingDataReference} from './config';\r\nimport {getViewModelPropValue, isArray, isPlainObject, throwErrorMessage, cloneDomNode, isEmptyObject} from './util';\r\nimport createBindingCache from './domWalker';\r\nimport {renderIteration} from './binder';\r\nimport {wrapCommentAround, removeElemnetsByCommentWrap, insertRenderedElements} from './commentWrapper';\r\n\r\nconst renderForOfBinding = ({bindingData, viewModel, bindingAttrs}) => {\r\n    if (!bindingData || !viewModel || !bindingAttrs) {\r\n        return;\r\n    }\r\n    let keys;\r\n    let iterationDataLength;\r\n    let iterationData = getViewModelPropValue(viewModel, bindingData.iterator);\r\n    let isRegenerate = false;\r\n\r\n    // check iterationData and set iterationDataLength\r\n    if (isArray(iterationData)) {\r\n        iterationDataLength = iterationData.length;\r\n    } else if (isPlainObject(iterationData)) {\r\n        keys = Object.keys(iterationData);\r\n        iterationDataLength = keys.length;\r\n    } else {\r\n        // throw error but let script contince to run\r\n        return throwErrorMessage(null, 'iterationData is not an plain object or array');\r\n    }\r\n\r\n    // flag as pared for-of logic with bindingData.type\r\n    if (!bindingData.type) {\r\n        bindingData.type = configBindingAttrs.forOf;\r\n        wrapCommentAround(bindingData, bindingData.el);\r\n    }\r\n\r\n    // assign forOf internal id to bindingData once\r\n    if (typeof bindingData.iterationSize === 'undefined') {\r\n        // store iterationDataLength\r\n        bindingData.iterationSize = iterationDataLength;\r\n        // remove orignal node for-of attributes\r\n        bindingData.el.removeAttribute(bindingAttrs.forOf);\r\n        isRegenerate = true;\r\n    } else {\r\n        // only regenerate cache if iterationDataLength changed\r\n        isRegenerate = bindingData.iterationSize !== iterationDataLength;\r\n        // update iterationSize\r\n        bindingData.iterationSize = iterationDataLength;\r\n    }\r\n\r\n    if (!isRegenerate) {\r\n        bindingData.iterationBindingCache.forEach(function(elementCache, i) {\r\n            if (!isEmptyObject(elementCache)) {\r\n                let iterationVm = createIterationViewModel({\r\n                    bindingData: bindingData,\r\n                    viewModel: viewModel,\r\n                    iterationData: iterationData,\r\n                    keys: keys,\r\n                    index: i,\r\n                });\r\n                renderIteration({\r\n                    elementCache: elementCache,\r\n                    iterationVm: iterationVm,\r\n                    bindingAttrs: bindingAttrs,\r\n                    isRegenerate: false,\r\n                });\r\n            }\r\n        });\r\n\r\n        return;\r\n    }\r\n\r\n    // generate forOfBinding elements into fragment\r\n    let fragment = generateForOfElements(bindingData, viewModel, bindingAttrs, iterationData, keys);\r\n\r\n    removeElemnetsByCommentWrap(bindingData);\r\n\r\n    // insert fragment content into DOM\r\n    return insertRenderedElements(bindingData, fragment);\r\n};\r\n\r\nconst createIterationViewModel = ({bindingData, viewModel, iterationData, keys, index}) => {\r\n    let iterationVm = {};\r\n    iterationVm[bindingData.iterator.alias] = keys ? iterationData[keys[index]] : iterationData[index];\r\n    // populate common binding data reference\r\n    iterationVm[bindingDataReference.rootDataKey] = viewModel.$root || viewModel;\r\n    iterationVm[bindingDataReference.currentData] = iterationVm[bindingData.iterator.alias];\r\n    iterationVm[bindingDataReference.currentIndex] = index;\r\n    return iterationVm;\r\n};\r\n\r\nconst generateForOfElements = (bindingData, viewModel, bindingAttrs, iterationData, keys) => {\r\n    let fragment = document.createDocumentFragment();\r\n    let iterationDataLength = bindingData.iterationSize;\r\n    let clonedItem;\r\n    let iterationVm;\r\n    let iterationBindingCache;\r\n    let i = 0;\r\n\r\n    // create or clear exisitng iterationBindingCache\r\n    if (isArray(bindingData.iterationBindingCache)) {\r\n        bindingData.iterationBindingCache.length = 0;\r\n    } else {\r\n        bindingData.iterationBindingCache = [];\r\n    }\r\n\r\n    // generate forOf and append to DOM\r\n    for (i = 0; i < iterationDataLength; i += 1) {\r\n        clonedItem = cloneDomNode(bindingData.el);\r\n\r\n        // create bindingCache per iteration\r\n        iterationBindingCache = createBindingCache({\r\n            rootNode: clonedItem,\r\n            bindingAttrs: bindingAttrs,\r\n        });\r\n\r\n        bindingData.iterationBindingCache.push(iterationBindingCache);\r\n\r\n        if (!isEmptyObject(iterationBindingCache)) {\r\n            // create an iterationVm match iterator alias\r\n            iterationVm = createIterationViewModel({\r\n                bindingData: bindingData,\r\n                viewModel: viewModel,\r\n                iterationData: iterationData,\r\n                keys: keys,\r\n                index: i,\r\n            });\r\n\r\n            renderIteration({\r\n                elementCache: bindingData.iterationBindingCache[i],\r\n                iterationVm: iterationVm,\r\n                bindingAttrs: bindingAttrs,\r\n                isRegenerate: true,\r\n            });\r\n        }\r\n\r\n        fragment.appendChild(clonedItem);\r\n    }\r\n\r\n    return fragment;\r\n};\r\n\r\nexport default renderForOfBinding;\r\n","import {isEmptyObject} from './util';\r\nimport {renderIteration} from './binder';\r\nimport createBindingCache from './domWalker';\r\nimport {commentSuffix} from './config';\r\nimport {removeElemnetsByCommentWrap, insertRenderedElements} from './commentWrapper';\r\n\r\n/**\r\n * isTargetDomRemoved\r\n * @description check if DOM between 'start' and 'end' comment tag has been removed\r\n * @param {object} bindingData\r\n * @return {boolean}\r\n */\r\nconst isTargetDomRemoved = (bindingData) => {\r\n    let ret = false;\r\n    if (bindingData && bindingData.previousNonTemplateElement) {\r\n        let commentStartTextContent = bindingData.previousNonTemplateElement.textContent;\r\n        let endCommentTag = bindingData.previousNonTemplateElement.nextSibling;\r\n\r\n        if (endCommentTag.nodeType === 8) {\r\n            if (endCommentTag.textContent === commentStartTextContent + commentSuffix) {\r\n                ret = true;\r\n            }\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\nconst renderIfBinding = ({bindingData, viewModel, bindingAttrs}) => {\r\n    if (!bindingData.fragment) {\r\n        return;\r\n    }\r\n\r\n    const isDomRemoved = isTargetDomRemoved(bindingData);\r\n    let rootElement = bindingData.el;\r\n\r\n    // remove current old DOM.\r\n    // TODO: try preserve DOM\r\n    if (!isDomRemoved && !bindingData.isOnce) {\r\n        removeIfBinding(bindingData);\r\n        // use fragment for create iterationBindingCache\r\n        rootElement = bindingData.fragment.firstChild.cloneNode(true);\r\n    }\r\n\r\n    // walk clonedElement to create iterationBindingCache once\r\n    if (!bindingData.iterationBindingCache || !bindingData.hasIterationBindingCache) {\r\n        bindingData.iterationBindingCache = createBindingCache({\r\n            rootNode: rootElement,\r\n            bindingAttrs: bindingAttrs,\r\n        });\r\n    }\r\n\r\n    // only render if has iterationBindingCache\r\n    // means has other dataBindings to be render\r\n    if (!isEmptyObject(bindingData.iterationBindingCache)) {\r\n        bindingData.hasIterationBindingCache = true;\r\n        renderIteration({\r\n            elementCache: bindingData.iterationBindingCache,\r\n            iterationVm: viewModel,\r\n            bindingAttrs: bindingAttrs,\r\n            isRegenerate: true,\r\n        });\r\n    }\r\n\r\n    // insert to new rendered DOM\r\n    // TODO: check unnecessary insertion when DOM is preserved\r\n    insertRenderedElements(bindingData, rootElement);\r\n};\r\n\r\nconst removeIfBinding = (bindingData) => {\r\n    removeElemnetsByCommentWrap(bindingData);\r\n    // remove cache.IterationBindingCache to prevent memory leak\r\n    if (bindingData.hasIterationBindingCache) {\r\n        delete bindingData.iterationBindingCache;\r\n        delete bindingData.hasIterationBindingCache;\r\n    }\r\n};\r\n\r\nexport {renderIfBinding, removeIfBinding};\r\n","import {dataIndexAttr} from './config';\r\nimport {parseStringToJson, getViewModelPropValue} from './util';\r\n\r\nlet $domFragment = null;\r\nlet $templateRoot = null;\r\nlet nestTemplatesCount = 0;\r\nlet templateCache = {};\r\n\r\n/**\r\n * compileTemplate\r\n * @description compile underscore template and store in templateCache\r\n * @param {string} id\r\n * @param {object} templateData\r\n * @return {string} rendered html string\r\n */\r\nconst compileTemplate = (id, templateData = null) => {\r\n    let templateString;\r\n    let templateElement;\r\n\r\n    if (!templateCache[id]) {\r\n        templateElement = document.getElementById(id);\r\n        templateString = templateElement ? templateElement.innerHTML : '';\r\n        templateCache[id] = _.template(templateString, {\r\n            variable: 'data',\r\n        });\r\n    }\r\n\r\n    return templateCache[id](templateData);\r\n};\r\n\r\n/**\r\n * renderTemplate\r\n * @description\r\n * get template setting from DOM attribute then call compileTemplate\r\n * to render and append to target DOM\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {object} elementCache\r\n */\r\nconst renderTemplate = (cache, viewModel, bindingAttrs, elementCache) => {\r\n    let settings = typeof cache.dataKey === 'string' ? parseStringToJson(cache.dataKey) : cache.dataKey;\r\n    let viewData = settings.data;\r\n    let isAppend = settings.append;\r\n    let isPrepend = settings.prepend;\r\n    let html;\r\n    let $element;\r\n    let $index;\r\n    let $currentElement;\r\n    let $nestedTemplates;\r\n\r\n    cache.dataKey = settings;\r\n\r\n    viewData =\r\n        typeof viewData === 'undefined' || viewData === '$root'\r\n            ? viewModel\r\n            : getViewModelPropValue(viewModel, {\r\n                dataKey: settings.data,\r\n                parameters: cache.parameters,\r\n            });\r\n\r\n    if (!viewData) {\r\n        return;\r\n    }\r\n\r\n    $element = $(cache.el);\r\n    $index = typeof viewModel.$index !== 'undefined' ? viewModel.$index : $element.attr(dataIndexAttr);\r\n    if (typeof $index !== 'undefined') {\r\n        viewData.$index = $index;\r\n    }\r\n    $domFragment = $domFragment ? $domFragment : $('<div/>');\r\n    $templateRoot = $templateRoot ? $templateRoot : $element;\r\n    html = compileTemplate(settings.id, viewData);\r\n\r\n    // domFragment should be empty in first run\r\n    // append rendered html\r\n    if (!$domFragment.children().length) {\r\n        $currentElement = $domFragment;\r\n        $domFragment.append(html);\r\n    } else {\r\n        $currentElement = $element;\r\n        if (!isAppend && !isPrepend) {\r\n            $currentElement.empty();\r\n        }\r\n        if (isPrepend) {\r\n            $currentElement.prepend(html);\r\n        } else {\r\n            $currentElement.append(html);\r\n        }\r\n    }\r\n\r\n    // check if there are nested template then recurisive render them\r\n    $nestedTemplates = $currentElement.find('[' + bindingAttrs.tmp + ']');\r\n\r\n    if ($nestedTemplates.length) {\r\n        nestTemplatesCount += $nestedTemplates.length;\r\n        $nestedTemplates.each(function(index, element) {\r\n            let thisTemplateCache = {\r\n                el: element,\r\n                dataKey: element.getAttribute(bindingAttrs.tmp),\r\n            };\r\n            elementCache[bindingAttrs.tmp].push(thisTemplateCache);\r\n            // recursive template render\r\n            renderTemplate(thisTemplateCache, viewModel, bindingAttrs, elementCache);\r\n            nestTemplatesCount -= 1;\r\n        });\r\n    }\r\n\r\n    // no more nested tempalted to render, start to append $domFragment into $templateRoot\r\n    if (nestTemplatesCount === 0) {\r\n        // append to DOM once\r\n        if (!isAppend && !isPrepend) {\r\n            $templateRoot.empty();\r\n        }\r\n        if (isPrepend) {\r\n            $templateRoot.prepend($domFragment.html());\r\n        } else {\r\n            $templateRoot.append($domFragment.html());\r\n        }\r\n        // clear cached fragment\r\n        $domFragment = $templateRoot = null;\r\n        // trigger callback if provided\r\n        if (typeof viewModel.afterTemplateRender === 'function') {\r\n            viewModel.afterTemplateRender(viewData);\r\n        }\r\n    }\r\n};\r\n\r\nexport default renderTemplate;\r\n","import {getViewModelPropValue} from './util';\r\n\r\n/**\r\n * showBinding\r\n * @description\r\n * DOM decleartive show binding. Make binding show/hide according to viewModel data (boolean)\r\n * viewModel data can function but must return boolean\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n */\r\nconst showBinding = (cache, viewModel, bindingAttrs) => {\r\n    const dataKey = cache.dataKey;\r\n    let currentInlineSytle = {};\r\n    let currentInlineDisplaySytle = '';\r\n    let shouldShow = true;\r\n\r\n    if (!dataKey) {\r\n        return;\r\n    }\r\n\r\n    cache.elementData = cache.elementData || {};\r\n\r\n    let oldShowStatus = cache.elementData.viewModelPropValue;\r\n\r\n    // store current element display default style once only\r\n    if (\r\n        typeof cache.elementData.displayStyle === 'undefined' ||\r\n        typeof cache.elementData.computedStyle === 'undefined'\r\n    ) {\r\n        currentInlineSytle = cache.el.style;\r\n        currentInlineDisplaySytle = currentInlineSytle.display;\r\n        // use current inline style if defined\r\n        if (currentInlineDisplaySytle) {\r\n            // set to 'block' if is 'none'\r\n            cache.elementData.displayStyle = currentInlineDisplaySytle === 'none' ? 'block' : currentInlineDisplaySytle;\r\n            cache.elementData.computedStyle = null;\r\n        } else {\r\n            let computeStyle = window.getComputedStyle(cache.el, null).getPropertyValue('display');\r\n            cache.elementData.displayStyle = null;\r\n            cache.elementData.computedStyle = computeStyle;\r\n        }\r\n    }\r\n\r\n    shouldShow = getViewModelPropValue(viewModel, cache);\r\n\r\n    // treat undefined || null as false.\r\n    // eg if property doesn't exsits in viewModel, it will treat as false to hide element\r\n    shouldShow = Boolean(shouldShow);\r\n\r\n    // reject if nothing changed\r\n    if (oldShowStatus === shouldShow) {\r\n        return;\r\n    }\r\n\r\n    if (!shouldShow) {\r\n        if (cache.el.style.display !== 'none') {\r\n            cache.el.style.setProperty('display', 'none');\r\n        }\r\n    } else {\r\n        if (cache.elementData.computedStyle || cache.el.style.display === 'none') {\r\n            if (cache.elementData.computedStyle === 'none') {\r\n                // default display is none in css rule, so use display 'block'\r\n                cache.el.style.setProperty('display', 'block');\r\n            } else {\r\n                // has default displayable type so just remove inline display 'none'\r\n                if (currentInlineSytle.length > 1) {\r\n                    cache.el.style.removeProperty('display');\r\n                } else {\r\n                    cache.el.removeAttribute('style');\r\n                }\r\n            }\r\n        } else {\r\n            // element default display was inline style, so restore it\r\n            cache.el.style.setProperty('display', cache.elementData.displayStyle);\r\n        }\r\n    }\r\n\r\n    // store new show status\r\n    cache.elementData.viewModelPropValue = shouldShow;\r\n};\r\n\r\nexport default showBinding;\r\n","import {getViewModelValue, resolveViewModelContext, resolveParamList, getFormData} from './util';\r\n\r\n/**\r\n * submitBinding\r\n * @description on form submit binding. pass current form data as json object to handler\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst submitBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let handlerName = cache.dataKey;\r\n    let paramList = cache.parameters;\r\n    let handlerFn;\r\n    let $element;\r\n    let viewModelContext;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    if (!handlerName || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    handlerFn = getViewModelValue(viewModel, handlerName);\r\n    $element = $(cache.el);\r\n\r\n    if (typeof handlerFn === 'function') {\r\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n        // assing on change event\r\n        $element.off('submit.databind').on('submit.databind', function(e) {\r\n            let args = [e, $element, getFormData($element)].concat(paramList);\r\n            handlerFn.apply(viewModelContext, args);\r\n        });\r\n    }\r\n};\r\n\r\nexport default submitBinding;\r\n","import {getViewModelPropValue} from './util';\r\nimport {createClonedElementCache, wrapCommentAround} from './commentWrapper';\r\nimport {renderIfBinding, removeIfBinding} from './renderIfBinding';\r\n/**\r\n * switch-Binding\r\n * @description\r\n * DOM decleartive switch binding.\r\n * switch parent element wrap direct child with case bindings\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n */\r\nconst switchBinding = (cache, viewModel, bindingAttrs) => {\r\n    let dataKey = cache.dataKey;\r\n\r\n    if (!dataKey) {\r\n        return;\r\n    }\r\n\r\n    cache.elementData = cache.elementData || {};\r\n\r\n    let newExpression = getViewModelPropValue(viewModel, cache);\r\n\r\n    if (newExpression === cache.elementData.viewModelPropValue) {\r\n        return;\r\n    }\r\n\r\n    cache.elementData.viewModelPropValue = newExpression;\r\n\r\n    // build switch cases if not yet defined\r\n    if (!cache.cases) {\r\n        let childrenElements = cache.el.children;\r\n        if (!childrenElements.length) {\r\n            return;\r\n        }\r\n        cache.cases = [];\r\n        for (let i = 0, elementLength = childrenElements.length; i < elementLength; i += 1) {\r\n            let caseData = null;\r\n            if (childrenElements[i].hasAttribute(bindingAttrs.case)) {\r\n                caseData = createCaseData(childrenElements[i], bindingAttrs.case);\r\n            } else if (childrenElements[i].hasAttribute(bindingAttrs.default)) {\r\n                caseData = createCaseData(childrenElements[i], bindingAttrs.default);\r\n                caseData.isDefault = true;\r\n            }\r\n            // create fragment by clone node\r\n            // wrap with comment tag\r\n            if (caseData) {\r\n                wrapCommentAround(caseData, caseData.el);\r\n                // remove binding attribute for later dataBind parse\r\n                if (caseData.isDefault) {\r\n                    caseData.el.removeAttribute(bindingAttrs.default);\r\n                } else {\r\n                    caseData.el.removeAttribute(bindingAttrs.case);\r\n                }\r\n                createClonedElementCache(caseData);\r\n                cache.cases.push(caseData);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (cache.cases.length) {\r\n        let hasMatch = false;\r\n        // do switch operation - reuse if binding logic\r\n        for (let j = 0, casesLength = cache.cases.length; j < casesLength; j += 1) {\r\n            let newCaseValue;\r\n            if (cache.cases[j].dataKey) {\r\n                // set back to dataKey if nothing found in viewModel\r\n                newCaseValue = getViewModelPropValue(viewModel, cache.cases[j]) || cache.cases[j].dataKey;\r\n            }\r\n\r\n            if (newCaseValue === cache.elementData.viewModelPropValue || cache.cases[j].isDefault) {\r\n                hasMatch = true;\r\n                // render element\r\n                renderIfBinding({\r\n                    bindingData: cache.cases[j],\r\n                    viewModel: viewModel,\r\n                    bindingAttrs: bindingAttrs,\r\n                });\r\n\r\n                // remove other elements\r\n                removeUnmatchCases(cache.cases, j);\r\n                break;\r\n            }\r\n        }\r\n        // no match remove all cases\r\n        if (!hasMatch) {\r\n            removeUnmatchCases(cache.cases);\r\n        }\r\n    }\r\n};\r\n\r\nfunction removeUnmatchCases(cases, matchedIndex) {\r\n    cases.forEach((caseData, index) => {\r\n        if (index !== matchedIndex || typeof matchedIndex === 'undefined') {\r\n            removeIfBinding(caseData);\r\n            // remove cache.IterationBindingCache to prevent memory leak\r\n            if (caseData.hasIterationBindingCache) {\r\n                caseData.iterationBindingCache = null;\r\n                caseData.hasIterationBindingCache = false;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction createCaseData(node, attrName) {\r\n    let caseData = {\r\n        el: node,\r\n        dataKey: node.getAttribute(attrName),\r\n        type: attrName,\r\n    };\r\n    return caseData;\r\n}\r\n\r\nexport default switchBinding;\r\n","import {getViewModelPropValue} from './util';\r\n\r\n/**\r\n * textBinding\r\n * * @description\r\n * DOM decleartive text binding update dom textnode with viewModel data\r\n * @param {object} cache\r\n * @param {object} viewModel\r\n * @param {object} bindingAttrs\r\n * @param {boolean} forceRender\r\n */\r\nconst textBinding = (cache, viewModel, bindingAttrs, forceRender) => {\r\n    let dataKey = cache.dataKey;\r\n    let APP = viewModel.APP || viewModel.$root.APP;\r\n\r\n    // NOTE: this doesn't work for for-of, if and switch bindings because element was not in DOM\r\n    if (!dataKey || (!forceRender && !APP.$rootElement.contains(cache.el))) {\r\n        return;\r\n    }\r\n\r\n    let newValue = getViewModelPropValue(viewModel, cache);\r\n    let oldValue = cache.el.textContent;\r\n\r\n    if (typeof newValue !== 'undefined' && typeof newValue !== 'object' && newValue !== null) {\r\n        if (newValue !== oldValue) {\r\n            cache.el.textContent = newValue;\r\n        }\r\n    }\r\n};\r\n\r\nexport default textBinding;\r\n","import * as config from './config';\r\n\r\n// require to use lodash\r\n_ = window._ || {};\r\n\r\nconst hasIsArray = Array.isArray;\r\n\r\nconst REGEX = {\r\n    FUNCTIONPARAM: /\\((.*?)\\)/,\r\n    WHITESPACES: /\\s+/g,\r\n    FOROF: /(.*?)\\s+(?:in|of)\\s+(.*)/,\r\n    PIPE: /\\|/,\r\n};\r\n\r\nconst generateElementCache = (bindingAttrs) => {\r\n    let elementCache = {};\r\n    $.each(bindingAttrs, function(k, v) {\r\n        elementCache[v] = [];\r\n    });\r\n    return elementCache;\r\n};\r\n\r\nconst isArray = (obj) => {\r\n    return hasIsArray ? Array.isArray(obj) : Object.prototype.toString.call(obj) === '[object Array]';\r\n};\r\n\r\nconst isJsObject = (obj) => {\r\n    return obj !== null && typeof obj === 'object' && Object.prototype.toString.call(obj) === '[object Object]';\r\n};\r\n\r\nconst isPlainObject = (obj) => {\r\n    let ctor;\r\n    let prot;\r\n\r\n    if (!isJsObject(obj)) {\r\n        return false;\r\n    }\r\n\r\n    // If has modified constructor\r\n    ctor = obj.constructor;\r\n    if (typeof ctor !== 'function') return false;\r\n\r\n    // If has modified prototype\r\n    prot = ctor.prototype;\r\n    if (isJsObject(prot) === false) return false;\r\n\r\n    // If constructor does not have an Object-specific method\r\n    if (prot.hasOwnProperty('isPrototypeOf') === false) {\r\n        return false;\r\n    }\r\n\r\n    // Most likely a plain Object\r\n    return true;\r\n};\r\n\r\nconst isEmptyObject = (obj) => {\r\n    if (isJsObject(obj)) {\r\n        return Object.getOwnPropertyNames(obj).length === 0;\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * getViewModelValue\r\n * @description walk a object by provided string path. eg 'a.b.c'\r\n * @param {object} viewModel\r\n * @param {string} prop\r\n * @return {object}\r\n */\r\nconst getViewModelValue = (viewModel, prop) => {\r\n    return _.get(viewModel, prop);\r\n};\r\n\r\n/**\r\n * setViewModelValue\r\n * @description populate viewModel object by path string\r\n * @param {object} obj\r\n * @param {string} prop\r\n * @param {string} value\r\n * @return {call} underscore set\r\n */\r\nconst setViewModelValue = (obj, prop, value) => {\r\n    return _.set(obj, prop, value);\r\n};\r\n\r\nconst getViewModelPropValue = (viewModel, bindingCache) => {\r\n    let dataKey = bindingCache.dataKey;\r\n    let paramList = bindingCache.parameters;\r\n    let isInvertBoolean = dataKey.charAt(0) === '!';\r\n\r\n    if (isInvertBoolean) {\r\n        dataKey = isInvertBoolean ? dataKey.substring(1) : dataKey;\r\n    }\r\n\r\n    let ret = getViewModelValue(viewModel, dataKey);\r\n\r\n    if (typeof ret === 'function') {\r\n        let viewModelContext = resolveViewModelContext(viewModel, dataKey);\r\n        let oldViewModelProValue = bindingCache.elementData ? bindingCache.elementData.viewModelProValue : null;\r\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\r\n        // let args = [oldViewModelProValue, bindingCache.el].concat(paramList);\r\n        let args = paramList.concat([oldViewModelProValue, bindingCache.el]);\r\n        ret = ret.apply(viewModelContext, args);\r\n    }\r\n\r\n    ret = isInvertBoolean ? !Boolean(ret) : ret;\r\n\r\n    // call through fitlers to get final value\r\n    ret = filtersViewModelPropValue({\r\n        value: ret,\r\n        viewModel: viewModel,\r\n        bindingCache: bindingCache,\r\n    });\r\n\r\n    return ret;\r\n};\r\n\r\nconst filtersViewModelPropValue = ({value, viewModel, bindingCache}) => {\r\n    let ret = value;\r\n    if (bindingCache.filters) {\r\n        each(bindingCache.filters, (index, filter) => {\r\n            let viewModelContext = resolveViewModelContext(viewModel, filter);\r\n            let filterFn = getViewModelValue.call(viewModelContext, viewModelContext, filter);\r\n            try {\r\n                ret = filterFn.call(viewModelContext, ret);\r\n            } catch (err) {\r\n                throwErrorMessage(err, `Invalid filter: ${filter}`);\r\n            }\r\n        });\r\n    }\r\n    return ret;\r\n};\r\n\r\nconst parseStringToJson = (str) => {\r\n    // fix unquote or single quote keys and replace single quote to double quote\r\n    let ret = str.replace(/(\\s*?{\\s*?|\\s*?,\\s*?)(['\"])?([a-zA-Z0-9]+)(['\"])?:/g, '$1\"$3\":').replace(/'/g, '\"');\r\n    return JSON.parse(ret);\r\n};\r\n\r\n/**\r\n * arrayRemoveMatch\r\n * @description remove match items in fromArray out of toArray\r\n * @param {array} toArray\r\n * @param {array} frommArray\r\n * @return {boolean}\r\n */\r\nconst arrayRemoveMatch = (toArray, frommArray) => {\r\n    return toArray.filter((value, index) => {\r\n        return frommArray.indexOf(value) < 0;\r\n    });\r\n};\r\n\r\nconst getFormData = ($form) => {\r\n    let sArray = $form.serializeArray();\r\n    let data = {};\r\n\r\n    sArray.map((n) => {\r\n        data[n['name']] = n['value'];\r\n    });\r\n\r\n    return data;\r\n};\r\n\r\n/**\r\n * getFunctionParameterList\r\n * @description convert parameter string to arrary\r\n * eg. '(\"a\",\"b\",\"c\")' > [\"a\",\"b\",\"c\"]\r\n * @param {string} str\r\n * @return {array} paramlist\r\n */\r\nconst getFunctionParameterList = (str) => {\r\n    if (!str || str.length > config.maxDatakeyLength) {\r\n        return;\r\n    }\r\n    let paramlist = str.match(REGEX.FUNCTIONPARAM);\r\n\r\n    if (paramlist && paramlist[1]) {\r\n        paramlist = paramlist[1].split(',');\r\n        paramlist.forEach(function(v, i) {\r\n            paramlist[i] = v.trim();\r\n        });\r\n    }\r\n    return paramlist;\r\n};\r\n\r\nconst extractFilterList = (cacheData) => {\r\n    if (!cacheData || !cacheData.dataKey || cacheData.dataKey.length > config.maxDatakeyLength) {\r\n        return cacheData;\r\n    }\r\n    let filterList = cacheData.dataKey.split(REGEX.PIPE);\r\n    let isOnceIndex;\r\n    cacheData.dataKey = filterList[0].trim();\r\n    if (filterList.length > 1) {\r\n        filterList.shift(0);\r\n        filterList.forEach(function(v, i) {\r\n            filterList[i] = v.trim();\r\n            if (filterList[i] === config.constants.filters.ONCE) {\r\n                cacheData.isOnce = true;\r\n                isOnceIndex = i;\r\n            }\r\n        });\r\n        if (isOnceIndex >= 0) {\r\n            filterList.splice(isOnceIndex, 1);\r\n        }\r\n        cacheData.filters = filterList;\r\n    }\r\n    return cacheData;\r\n};\r\n\r\nconst invertObj = (sourceObj) => {\r\n    return Object.keys(sourceObj).reduce(function(obj, key) {\r\n        obj[sourceObj[key]] = key;\r\n        return obj;\r\n    }, {});\r\n};\r\n\r\n/**\r\n * debounce\r\n * @description decorate a function to be debounce using requestAnimationFrame\r\n * @param {function} fn\r\n * @param {context} ctx\r\n * @return {function}\r\n */\r\nconst debounceRaf = (fn, ctx = null) => {\r\n    return (function(fn, ctx) {\r\n        let dfObj = $.Deferred(); // eslint-disable-line new-cap\r\n        let rafId = 0;\r\n\r\n        // return decorated fn\r\n        return function() {\r\n            let args;\r\n            /* eslint-disable prefer-rest-params */\r\n            args = Array.from ? Array.from(arguments) : Array.prototype.slice.call(arguments);\r\n\r\n            window.cancelAnimationFrame(rafId);\r\n            rafId = window.requestAnimationFrame(() => {\r\n                $.when(fn.apply(ctx, args)).then(\r\n                    dfObj.resolve.apply(ctx, arguments),\r\n                    dfObj.reject.apply(ctx, arguments),\r\n                    dfObj.notify.apply(ctx, arguments)\r\n                );\r\n                dfObj = $.Deferred(); // eslint-disable-line new-cap\r\n                window.cancelAnimationFrame(rafId);\r\n            });\r\n            /* eslint-enable prefer-rest-params */\r\n            return dfObj.promise();\r\n        };\r\n    })(fn, ctx);\r\n};\r\n\r\n/**\r\n * getNodeAttrObj\r\n * @description convert Node attributes object to a json object\r\n * @param {object} node\r\n * @param {array} skipList\r\n * @return {object}\r\n */\r\nconst getNodeAttrObj = (node, skipList) => {\r\n    let attrObj;\r\n    let attributesLength = 0;\r\n    let skipArray;\r\n\r\n    if (!node || node.nodeType !== 1 || !node.hasAttributes()) {\r\n        return attrObj;\r\n    }\r\n    if (skipList) {\r\n        skipArray = [];\r\n        skipArray = typeof skipList === 'string' ? skipArray.push(skipList) : skipList;\r\n    }\r\n    attrObj = {};\r\n    attributesLength = node.attributes.length;\r\n\r\n    if (attributesLength) {\r\n        for (let i = 0; i < attributesLength; i += 1) {\r\n            let attribute = node.attributes.item(i);\r\n            attrObj[attribute.nodeName] = attribute.nodeValue;\r\n        }\r\n    }\r\n\r\n    if (isArray(skipArray)) {\r\n        skipArray.forEach((item) => {\r\n            if (attrObj[item]) {\r\n                delete attrObj[item];\r\n            }\r\n        });\r\n    }\r\n    return attrObj;\r\n};\r\n\r\n/**\r\n * extend\r\n * @param {boolean} isDeepMerge\r\n * @param {object} target\r\n * @param {object} sources\r\n * @return {object} merged object\r\n */\r\nconst extend = (isDeepMerge = false, target, ...sources) => {\r\n    if (!sources.length) {\r\n        return target;\r\n    }\r\n    const source = sources.shift();\r\n    if (source === undefined) {\r\n        return target;\r\n    }\r\n\r\n    if (!isDeepMerge) {\r\n        return Object.assign(target, ...sources);\r\n    }\r\n\r\n    if (isMergebleObject(target) && isMergebleObject(source)) {\r\n        Object.keys(source).forEach((key) => {\r\n            if (isMergebleObject(source[key])) {\r\n                if (!target[key]) {\r\n                    target[key] = {};\r\n                }\r\n                extend(target[key], source[key]);\r\n            } else {\r\n                target[key] = source[key];\r\n            }\r\n        });\r\n    }\r\n\r\n    return extend(true, target, ...sources);\r\n};\r\n\r\nconst each = (obj, fn) => {\r\n    if (typeof obj !== 'object' || typeof fn !== 'function') {\r\n        return;\r\n    }\r\n    let keys = [];\r\n    let keysLength = 0;\r\n    let isArrayObj = isArray(obj);\r\n    let key;\r\n    let value;\r\n    let i = 0;\r\n\r\n    if (isArrayObj) {\r\n        keysLength = obj.length;\r\n    } else if (isJsObject(obj)) {\r\n        keys = Object.keys(obj);\r\n        keysLength = keys.length;\r\n    } else {\r\n        throw new TypeError('Object is not an array or object');\r\n    }\r\n\r\n    for (i = 0; i < keysLength; i += 1) {\r\n        if (isArrayObj) {\r\n            key = i;\r\n            value = obj[i];\r\n        } else {\r\n            key = keys[i];\r\n            value = obj[key];\r\n        }\r\n        fn(key, value);\r\n    }\r\n};\r\n\r\nconst isMergebleObject = (item) => {\r\n    return isJsObject(item) && !isArray(item);\r\n};\r\n\r\n/**\r\n * cloneDomNode\r\n * @param {object} element\r\n * @return {object} cloned element\r\n * @description helper function to clone node\r\n */\r\nconst cloneDomNode = (element) => {\r\n    return element.cloneNode(true);\r\n};\r\n\r\n/**\r\n * insertAfter\r\n * @param {object} parentNode\r\n * @param {object} newNode\r\n * @param {object} referenceNode\r\n * @return {object} node\r\n * @description helper function to insert new node before the reference node\r\n */\r\nconst insertAfter = (parentNode, newNode, referenceNode) => {\r\n    let refNextElement = referenceNode && referenceNode.nextSibling ? referenceNode.nextSibling : null;\r\n    return parentNode.insertBefore(newNode, refNextElement);\r\n};\r\n\r\nconst resolveViewModelContext = (viewModel, datakey) => {\r\n    let ret = viewModel;\r\n    let bindingDataContext;\r\n    if (typeof datakey !== 'string') {\r\n        return ret;\r\n    }\r\n    bindingDataContext = datakey.split('.');\r\n    if (bindingDataContext.length > 1) {\r\n        if (bindingDataContext[0] === config.bindingDataReference.rootDataKey) {\r\n            ret = viewModel[config.bindingDataReference.rootDataKey] || viewModel;\r\n        } else if (bindingDataContext[0] === config.bindingDataReference.currentData) {\r\n            ret = viewModel[config.bindingDataReference.currentData] || viewModel;\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\nconst resolveParamList = (viewModel, paramList) => {\r\n    if (!viewModel || !isArray(paramList)) {\r\n        return;\r\n    }\r\n    return paramList.map((param) => {\r\n        param = param.trim();\r\n\r\n        if (param === config.bindingDataReference.currentIndex) {\r\n            // convert '$index' to value\r\n            param = viewModel[config.bindingDataReference.currentIndex];\r\n        } else if (param === config.bindingDataReference.currentData) {\r\n            // convert '$data' to value or current viewModel\r\n            param = viewModel[config.bindingDataReference.currentData] || viewModel;\r\n        } else if (param === config.bindingDataReference.rootDataKey) {\r\n            // convert '$root' to root viewModel\r\n            param = viewModel[config.bindingDataReference.rootDataKey] || viewModel;\r\n        }\r\n        return param;\r\n    });\r\n};\r\n\r\nconst removeElement = (el) => {\r\n    if (el && el.parentNode) {\r\n        el.parentNode.removeChild(el);\r\n    }\r\n};\r\n\r\nconst throwErrorMessage = (err = null, errorMessage = '') => {\r\n    let message = err && err.message ? err.message : errorMessage;\r\n    if (typeof console.error === 'function') {\r\n        return console.error(message);\r\n    }\r\n    return console.log(message);\r\n};\r\n\r\nexport {\r\n    REGEX,\r\n    arrayRemoveMatch,\r\n    cloneDomNode,\r\n    debounceRaf,\r\n    each,\r\n    extend,\r\n    extractFilterList,\r\n    generateElementCache,\r\n    getFormData,\r\n    getFunctionParameterList,\r\n    getNodeAttrObj,\r\n    getViewModelPropValue,\r\n    getViewModelValue,\r\n    insertAfter,\r\n    invertObj,\r\n    isArray,\r\n    isEmptyObject,\r\n    isJsObject,\r\n    isPlainObject,\r\n    parseStringToJson,\r\n    removeElement,\r\n    resolveParamList,\r\n    resolveViewModelContext,\r\n    setViewModelValue,\r\n    throwErrorMessage,\r\n};\r\n"]}