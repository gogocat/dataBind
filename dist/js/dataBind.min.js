!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function a(e,t){e.forEach(function(e,n){n===t&&void 0!==t||(Oe(e),e.hasIterationBindingCache&&(e.iterationBindingCache=null,e.hasIterationBindingCache=!1))})}function r(e,t){return{el:e,dataKey:e.getAttribute(t),type:t}}var o={comp:"data-jq-comp",tmp:"data-jq-tmp",text:"data-jq-text",click:"data-jq-click",dblclick:"data-jq-dblclick",blur:"data-jq-blur",focus:"data-jq-focus",hover:"data-jq-hover",change:"data-jq-change",submit:"data-jq-submit",model:"data-jq-model",show:"data-jq-show",css:"data-jq-css",attr:"data-jq-attr",forOf:"data-jq-for",if:"data-jq-if",switch:"data-jq-switch",case:"data-jq-case",default:"data-jq-default"},l="data-server-rendered",c={forOf:"data-forOf_",if:"data-if_",case:"data-case_",default:"data-default_"},d={evaluate:/<%([\s\S]+?)%>/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{(.+?)\}\}/g},s={rootDataKey:"$root",currentData:"$data",currentIndex:"$index",mouseEnterHandlerName:"in",mouseLeaveHandlerName:"out"},u={serverRendered:"SERVER-RENDERED",init:"INIT"},f={filters:{ONCE:"once"},PARENT_REF:"_parent"};_=window._||{};var p,h=Array.isArray,m="function"==typeof window.Promise,v={FUNCTIONPARAM:/\((.*?)\)/,WHITESPACES:/\s+/g,FOROF:/(.*?)\s+(?:in|of)\s+(.*)/,PIPE:/\|/},g=function(e){return h?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},y=function(t){return null!==t&&"object"===e(t)&&"[object Object]"===Object.prototype.toString.call(t)},b=function(e){if(!y(e))return!1;var t=e.constructor;if("function"!=typeof t)return!1;var n=t.prototype;return!1!==y(n)&&!1!==n.hasOwnProperty("isPrototypeOf")},E=function(e){return!!y(e)&&0===Object.getOwnPropertyNames(e).length},A=function(e,t){return _.get(e,t)},P=function(e,t,n){return _.set(e,t,n)},w=function(e,t){var n=t.dataKey,i=t.parameters,a="!"===n.charAt(0);a&&(n=a?n.substring(1):n);var r=A(e,n);if("function"==typeof r){var o=V(e,n),l=t.elementData?t.elementData.viewModelProValue:null,c=(i=i?q(e,i):[]).concat([l,t.el]);r=r.apply(o,c)}return r=a?!Boolean(r):r,r=C({value:r,viewModel:e,bindingCache:t})},C=function(e){var t=e.value,n=e.viewModel,i=e.bindingCache,a=t;return i.filters&&j(i.filters,function(e,t){var i=V(n,t),r=A.call(i,i,t);try{a=r.call(i,a)}catch(e){H(e,"Invalid filter: ".concat(t))}}),a},B=function(e){var t=e.replace(/(\s*?{\s*?|\s*?,\s*?)(['"])?([a-zA-Z0-9]+)(['"])?:/g,'$1"$3":').replace(/'/g,'"');return JSON.parse(t)},D=function(e,t){return e.filter(function(e,n){return t.indexOf(e)<0})},O=function(e){var t={};return e.serializeArray().map(function(e){t[e.name]=e.value}),t},S=function(e){if(e&&!(e.length>50)){var t=e.match(v.FUNCTIONPARAM);return t&&t[1]&&(t=t[1].split(",")).forEach(function(e,n){t[n]=e.trim()}),t}},R=function(e){if(!e||!e.dataKey||e.dataKey.length>50)return e;var t,n=e.dataKey.split(v.PIPE);return e.dataKey=n[0].trim(),n.length>1&&(n.shift(0),n.forEach(function(i,a){n[a]=i.trim(),n[a]===f.filters.ONCE&&(e.isOnce=!0,t=a)}),t>=0&&n.splice(t,1),e.filters=n),e},k=function(e){return Object.keys(e).reduce(function(t,n){return t[e[n]]=n,t},{})},x=function(){var e={};return m?e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}):e=$.Deferred(),e},M=function(e){return function(e,t){var n=x(),i=0;return function(){var a=Array.from?Array.from(arguments):Array.prototype.slice.call(arguments);return window.cancelAnimationFrame(i),i=window.requestAnimationFrame(function(){try{e.apply(t,a),n.resolve(t)}catch(e){n.reject(t,e)}n=x(),window.cancelAnimationFrame(i)}),m?n.promise:n.promise()}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},N=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,i=arguments.length,a=new Array(i>2?i-2:0),r=2;r<i;r++)a[r-2]=arguments[r];if(!a.length)return n;var o=a.shift();return void 0===o?n:t?(K(n)&&K(o)&&Object.keys(o).forEach(function(t){K(o[t])?(n[t]||(n[t]={}),e(n[t],o[t])):n[t]=o[t]}),e.apply(void 0,[!0,n].concat(a))):Object.assign.apply(Object,[n].concat(a))},j=function(t,n){if("object"===e(t)&&"function"==typeof n){var i,a,r=[],o=0,l=g(t),c=0;if(l)o=t.length;else{if(!y(t))throw new TypeError("Object is not an array or object");o=(r=Object.keys(t)).length}for(c=0;c<o;c+=1)l?(i=c,a=t[c]):a=t[i=r[c]],n(i,a)}},K=function(e){return y(e)&&!g(e)},T=function(e){return e.cloneNode(!0)},I=function(e,t,n){var i=n&&n.nextSibling?n.nextSibling:null;return e.insertBefore(t,i)},V=function(e,t){var n=e;if("string"!=typeof t)return n;var i=t.split(".");return i.length>1&&(i[0]===s.rootDataKey?n=e[s.rootDataKey]||e:i[0]===s.currentData&&(n=e[s.currentData]||e)),n},q=function(e,t){if(e&&g(t))return t.map(function(t){return t=t.trim(),t===s.currentIndex?t=e[s.currentIndex]:t===s.currentData?t=e[s.currentData]||e:t===s.rootDataKey&&(t=e[s.rootDataKey]||e),t})},F=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.message?e.message:t;return"function"==typeof console.error?console.error(n):console.log(n)},Q=null,z=null,W=0,J={},L=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return J[e]||(t=(n=document.getElementById(e))?n.innerHTML:"",J[e]=_.template(t,{variable:"data"})),J[e](i)},U=function e(t,n,i,a){var r,o="string"==typeof t.dataKey?B(t.dataKey):t.dataKey,l=o.data,c=o.append,d=o.prepend;if(t.dataKey=o,l=void 0===l||"$root"===l?n:w(n,{dataKey:o.data,parameters:t.parameters})){var s=$(t.el),u=void 0!==n.$index?n.$index:s.attr("data-index");void 0!==u&&(l.$index=u),Q=Q||$("<div/>"),z=z||s;var f=L(o.id,l);Q.children().length?(r=s,c||d||r.empty(),d?r.prepend(f):r.append(f)):(r=Q,Q.append(f));var p=r.find("["+i.tmp+"]");p.length&&(W+=p.length,p.each(function(t,r){var o={el:r,dataKey:r.getAttribute(i.tmp)};a[i.tmp].push(o),e(o,n,i,a),W-=1})),0===W&&(c||d||z.empty(),d?z.prepend(Q.html()):z.append(Q.html()),Q=z=null,"function"==typeof n.afterTemplateRender&&n.afterTemplateRender(l))}},G=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=A(t,r);"function"==typeof c&&(a=V(t,r),o=o?q(t,o):[],$(e.el).off("click.databind").on("click.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}},Z=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=A(t,r);"function"==typeof c&&(a=V(t,r),o=o?q(t,o):[],$(e.el).off("dblclick.databind").on("dblclick.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}},X=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=A(t,r);"function"==typeof c&&(a=V(t,r),o=o?q(t,o):[],$(e.el).off("blur.databind").on("blur.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}},Y=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=A(t,r);"function"==typeof c&&(a=V(t,r),o=o?q(t,o):[],$(e.el).off("focus.databind").on("focus.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}},ee=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=s.mouseEnterHandlerName,c=s.mouseLeaveHandlerName,d=t.APP||t.$root.APP;if(e.elementData=e.elementData||{},r&&(i||d.$rootElement.contains(e.el))){var u=A(t,r);u&&"function"==typeof u[l]&&"function"==typeof u[c]&&(a=V(t,r),o=o?q(t,o):[],$(e.el).off("mouseenter.databind mouseleave.databind").hover(function(t){var n=[t,e.el].concat(o);u[l].apply(a,n)},function(t){var n=[t,e.el].concat(o);u[c].apply(a,n)}))}},te=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=e.el.getAttribute(n.model),c="",d="",s=t.APP||t.$root.APP;if(r&&(i||s.$rootElement.contains(e.el))){var u=A(t,r);"function"==typeof u&&(a=V(t,r),o=o?q(t,o):[],$(e.el).off("change.databind").on("change.databind",function(e){var n=$(this),i=n.is(":checkbox");c=i?n.prop("checked"):_.escape(n.val()),l&&(d=A(t,l),P(t,l,c));var r=[e,n,c,d].concat(o);u.apply(a,r),d=c}))}},ne=function(e,t,n,i){var a=e.dataKey,r="",o=t.APP||t.$root.APP;if(a&&(i||o.$rootElement.contains(e.el))&&void 0!==(r=A(t,a))&&null!==r){var l=$(e.el),c=l.is(":checkbox"),d=l.is(":radio"),s=l[0].name,u=d?$('input[name="'+s+'"]'):null;r!==(c?l.prop("checked"):l.val())&&(c?l.prop("checked",Boolean(r)):d?u.val([r]):l.val(r))}},ie=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=A(t,r),d=$(e.el);"function"==typeof c&&(a=V(t,r),o=o?q(t,o):[],d.off("submit.databind").on("submit.databind",function(e){var t=[e,d,O(d)].concat(o);c.apply(a,t)}))}},ae=function(t,n,i,a){var r=t.dataKey,o=n.APP||n.$root.APP;if(r&&(a||o.$rootElement.contains(t.el))){var l=w(n,t),c=t.el.textContent;void 0!==l&&"object"!==e(l)&&null!==l&&l!==c&&(t.el.textContent=l)}},re=function(e,t,n){var i={},a="",r=!0;if(e.dataKey){e.elementData=e.elementData||{};var o=e.elementData.viewModelPropValue;if(void 0===e.elementData.displayStyle||void 0===e.elementData.computedStyle)if(i=e.el.style,a=i.display)e.elementData.displayStyle="none"===a?"block":a,e.elementData.computedStyle=null;else{var l=window.getComputedStyle(e.el,null).getPropertyValue("display");e.elementData.displayStyle=null,e.elementData.computedStyle=l}r=w(t,e),o!==(r=Boolean(r))&&(r?e.elementData.computedStyle||"none"===e.el.style.display?"none"===e.elementData.computedStyle?e.el.style.setProperty("display","block"):i.length>1?e.el.style.removeProperty("display"):e.el.removeAttribute("style"):e.el.style.setProperty("display",e.elementData.displayStyle):"none"!==e.el.style.display&&e.el.style.setProperty("display","none"),e.elementData.viewModelPropValue=r)}},oe=function(e,t,n,i){var a=e.dataKey,r=t.APP||t.$root.APP;if(a&&(i||r.$rootElement.contains(e.el))){e.elementData=e.elementData||{},e.elementData.viewModelPropValue=e.elementData.viewModelPropValue||"";var o=e.elementData.viewModelPropValue,l="",c=w(t,e),d=[],s=!1,u=!1,f=[];if("string"==typeof c)u=!0;else{if(!b(c))return;s=!0}if(s?l=JSON.stringify(c):d=(l=c.replace(/\s\s+/g," ").trim()).split(" "),o!==l){for(var p=e.el.classList,h=p.length,m=0;m<h;m+=1)f.push(p[m]);s?j(c,function(e,t){var n=f.indexOf(e);!0===t?f.push(e):-1!==n&&f.splice(n,1)}):u&&(f=D(f,o),f=f.concat(d)),f=f.filter(function(e,t,n){return n.indexOf(e)===t}),f=f.join(" "),e.elementData.viewModelPropValue=l,e.el.setAttribute("class",f)}}},le=function(e,t,n){if(e.dataKey){e.elementData=e.elementData||{},e.elementData.viewModelProValue=e.elementData.viewModelProValue||{};var i=e.elementData.viewModelProValue,a=w(t,e);b(a)&&JSON.stringify(i)!==JSON.stringify(a)&&(e.elementData.viewModelProValue={},E(i)?j(a,function(t,n){e.el.setAttribute(t,n),e.elementData.viewModelProValue[t]=n}):(j(i,function(t,n){void 0===a[t]&&e.el.removeAttribute(t)}),j(a,function(t,n){i[t]!==a[t]&&e.el.setAttribute(t,a[t]),e.elementData.viewModelProValue[t]=n})))}},ce=function e(t,n){for(t=t.firstElementChild;t;)n(t)&&e(t,n),t=t.nextElementSibling},de=function(e){var t={};return Array.prototype.slice.call(e.attributes).forEach(function(e){t[e.name]=e.value}),t},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return[t.forOf,t.if,t.case,t.default].filter(function(t){return void 0!==e[t]})},ue=function(e){return"SVG"===e.tagName},fe=function(e,t){return"SVG"===e.tagName||e.hasAttribute(t.comp)},pe=function(e){var t,n,i=e.node,a=e.attrObj,r=e.bindingCache,o=e.type;if(p&&p[o]&&void 0!==a[o]){r[o]=r[o]||[],t=a[o].trim(),n=R(n={el:i,dataKey:t});var l=S(n.dataKey);l&&(n.parameters=l,n.dataKey=n.dataKey.replace(v.FUNCTIONPARAM,"").trim()),n[f.PARENT_REF]=r[o],r[o].push(n)}return r},he=function(e){var t=e.rootNode,n=void 0===t?null:t,i=e.bindingAttrs,a=void 0===i?{}:i,r=e.skipCheck,o=e.isRenderedTemplate,l=void 0!==o&&o,c={};if(!n instanceof window.Node)throw new TypeError("walkDOM: Expected a DOM node");p=p||k(a);var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe,n=!1;if(1!==e.nodeType||!e.hasAttributes())return!0;if(t(e,a)||"function"==typeof r&&r(e))return!1;var i=de(e),o=se(i,a),d=[];if(o.length)n=!0,d=o;else{if(l&&i[a.tmp])return!0;d=Object.keys(i)}return d.forEach(function(t){t!==a.case&&t!==a.default&&(c=pe({node:e,attrObj:i,bindingCache:c,type:t}))}),!n};return d(n,ue)&&ce(n,d),c},me=function(e){var t=e.el.cloneNode(!0);return e.fragment=document.createDocumentFragment(),e.fragment.appendChild(t),e},ve=function(e){if(e&&e.type){var t="",n=e.dataKey?e.dataKey.replace(v.WHITESPACES,"_"):"";switch(e.type){case o.forOf:t=c.forOf;break;case o.if:t=c.if;break;case o.case:t=c.case;break;case o.default:t=c.default}return e.commentPrefix=t+n,e}},ge=function e(t,n){n.commentPrefix||ve(n);var i=n.commentPrefix+"_end";if(t=t.nextSibling){if(8===t.nodeType&&t.textContent===i)return n.docRange.setEndBefore(t);e(t,n)}},ye=function(e,t){var n="";e.commentPrefix||ve(e),n=e.commentPrefix;var i=document.createComment(n),a=document.createComment(n+"_end");return 11===t.nodeType?(t.insertBefore(i,t.firstChild),t.appendChild(a)):t.parentNode&&(t.parentNode.insertBefore(i,t),I(t.parentNode,a,t),e.previousNonTemplateElement=t.previousSibling,e.nextNonTemplateElement=t.nextSibling,e.parentElement=t.previousSibling.parentElement),t},be=function(e){e.docRange||(e.docRange=document.createRange());try{e.previousNonTemplateElement?(e.docRange.setStartBefore(e.previousNonTemplateElement.nextSibling),ge(e.previousNonTemplateElement.nextSibling,e)):(e.docRange.setStartBefore(e.parentElement.firstChild),ge(e.parentElement.firstChild,e))}catch(e){console.log("error removeElemnetsByCommentWrap: ",e.message)}return e.docRange.deleteContents()},Ee=function(e,t){e.previousNonTemplateElement?I(e.parentElement,t,e.previousNonTemplateElement):e.nextNonTemplateElement?e.parentElement.insertBefore(t,e.nextNonTemplateElement):e.parentElement&&e.parentElement.appendChild(t)},Ae=function(e){var t=e.bindingData,n=e.viewModel,i=e.bindingAttrs;if(t&&n&&i){var a,r,l=w(n,t.iterator),c=!1;if(g(l))r=l.length;else{if(!b(l))return H(null,"iterationData is not an plain object or array");r=(a=Object.keys(l)).length}if(t.type||(t.type=o.forOf,ye(t,t.el)),void 0===t.iterationSize?(t.iterationSize=r,t.el.removeAttribute(i.forOf),c=!0):(c=t.iterationSize!==r,t.iterationSize=r),!c)return void t.iterationBindingCache.forEach(function(e,r){if(!E(e)){var o=Pe({bindingData:t,viewModel:n,iterationData:l,keys:a,index:r});Fe({elementCache:e,iterationVm:o,bindingAttrs:i,isRegenerate:!1})}});var d=we(t,n,i,l,a);return be(t),Ee(t,d)}},Pe=function(e){var t=e.bindingData,n=e.viewModel,i=e.iterationData,a=e.keys,r=e.index,o={};return o[t.iterator.alias]=a?i[a[r]]:i[r],o[s.rootDataKey]=n.$root||n,o[s.currentData]=o[t.iterator.alias],o[s.currentIndex]=r,o},we=function(e,t,n,i,a){var r,o,l,c=document.createDocumentFragment(),d=e.iterationSize,s=0;for(g(e.iterationBindingCache)?e.iterationBindingCache.length=0:e.iterationBindingCache=[],s=0;s<d;s+=1)r=T(e.el),l=he({rootNode:r,bindingAttrs:n}),e.iterationBindingCache.push(l),E(l)||(o=Pe({bindingData:e,viewModel:t,iterationData:i,keys:a,index:s}),Fe({elementCache:e.iterationBindingCache[s],iterationVm:o,bindingAttrs:n,isRegenerate:!0})),c.appendChild(r);return c},Ce=function(e,t,n){var i=e.dataKey;if(i&&!(i.length>50)){if(!e.iterator){if(i.length>50)return;e.dataKey=e.dataKey.replace(v.WHITESPACES," ");var a=i.match(v.FOROF);if(!a)return;e.iterator={},e.iterator.alias=a[1].trim(),a[2]&&(e.iterator.dataKey=a[2].trim(),e.parentElement=e.el.parentElement,e.previousNonTemplateElement=e.el.previousSibling,e.nextNonTemplateElement=e.el.nextSibling)}Ae({bindingData:e,viewModel:t,bindingAttrs:n})}},Be=function(e){var t=!1;if(e&&e.previousNonTemplateElement){var n=e.previousNonTemplateElement.textContent,i=e.previousNonTemplateElement.nextSibling;8===i.nodeType&&i.textContent===n+"_end"&&(t=!0)}return t},De=function(e){var t=e.bindingData,n=e.viewModel,i=e.bindingAttrs;if(t.fragment){var a=Be(t),r=t.el;a||t.isOnce||(Oe(t),r=t.fragment.firstChild.cloneNode(!0)),t.iterationBindingCache&&t.hasIterationBindingCache||(t.iterationBindingCache=he({rootNode:r,bindingAttrs:i})),E(t.iterationBindingCache)||(t.hasIterationBindingCache=!0,Fe({elementCache:t.iterationBindingCache,iterationVm:n,bindingAttrs:i,isRegenerate:!0})),Ee(t,r)}},Oe=function(e){be(e),e.hasIterationBindingCache&&(delete e.iterationBindingCache,delete e.hasIterationBindingCache)},Se=function(e,t,n){if(e.dataKey&&(!e.isOnce||!1!==e.hasIterationBindingCache)){e.elementData=e.elementData||{},e.type=e.type||o.if;var i=e.elementData.viewModelPropValue,a=w(t,e)||!1;if(i!==a||e.hasIterationBindingCache){var r=Boolean(a);if(!r&&e.isOnce&&e.el.parentNode)return F(e.el),void Re({viewModel:t,cache:e});e.elementData.viewModelPropValue=a,e.fragment||(ye(e,e.el),e.el.removeAttribute(n.if),me(e)),r?(De({bindingData:e,viewModel:t,bindingAttrs:n}),e.isOnce&&!e.hasIterationBindingCache&&Re({viewModel:t,cache:e})):Oe(e)}}},Re=function(e){var t=e.viewModel,n=e.cache,i=!1;return t.APP.postProcessQueue&&(t.APP.postProcessQueue.push(function(e,t){return function(){e[f.PARENT_REF].splice(t,1)}}(n,n[f.PARENT_REF].indexOf(n))),i=!0),i},$e=function(e,t,n){if(e.dataKey){e.elementData=e.elementData||{};var i=w(t,e);if(i!==e.elementData.viewModelPropValue){if(e.elementData.viewModelPropValue=i,!e.cases){var o=e.el.children;if(!o.length)return;e.cases=[];for(var l=0,c=o.length;l<c;l+=1){var d=null;o[l].hasAttribute(n.case)?d=r(o[l],n.case):o[l].hasAttribute(n.default)&&((d=r(o[l],n.default)).isDefault=!0),d&&(ye(d,d.el),d.isDefault?d.el.removeAttribute(n.default):d.el.removeAttribute(n.case),me(d),e.cases.push(d))}}if(e.cases.length){for(var s=!1,u=0,f=e.cases.length;u<f;u+=1){var p=void 0;if(e.cases[u].dataKey&&(p=w(t,e.cases[u])||e.cases[u].dataKey),p===e.elementData.viewModelPropValue||e.cases[u].isDefault){s=!0,De({bindingData:e.cases[u],viewModel:t,bindingAttrs:n}),a(e.cases,u);break}}s||a(e.cases)}}}},ke={},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&e.compId&&t&&"function"==typeof n){var a;t=t.replace(v.WHITESPACES,""),ke[t]=ke[t]||[],ke[t].some(function(t){if(t[e.compId])return t[e.compId]=n.bind(e.viewModel),t.isOnce=i,!0})||((a={})[e.compId]=n.bind(e.viewModel),a.isOnce=i,ke[t].push(a))}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;xe(e,t,n,!0)},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&t){var n=0,i=0;if(t=t.replace(v.WHITESPACES,""),ke[t])for(i=ke[t].length,n=0;n<i;n+=1)if(ke[t][n][e]){ke[t].splice(n,1);break}ke[t].length||delete ke[t]}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&Object.keys(ke).forEach(function(t){Ne(e,t)})},Ke=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e&&ke[e]&&(e=e.replace(v.WHITESPACES,""),ke[e].forEach(function(t){Object.keys(t).forEach(function(i){if("function"==typeof t[i]){var a=t[i].apply(t,n);return t.isOnce&&Ne(i,e),a}})}))},Te=Object.freeze({subscribeEvent:xe,subscribeEventOnce:Me,unsubscribeEvent:Ne,unsubscribeAllEvent:je,publishEvent:Ke}),Ie=0,Ve=function(){function n(i,a,r){if(t(this,n),i instanceof window.jQuery&&i.length&&(i=i.eq(0)[0]),!i||1!==i.nodeType||null===a||"object"!==e(a))throw new TypeError("$rootElement or viewModel is invalid");return this.initRendered=!1,this.compId=Ie+=1,this.$rootElement=i,this.viewModel=a,this.bindingAttrs=r,this.render=M(this.render,this),this.isServerRendered=null!==this.$rootElement.getAttribute(l),this.viewModel.APP=this,this.viewModel.$root=this.viewModel,this.parseView(),window.jQuery?window.jQuery(this.$rootElement).data(s.rootDataKey,this.viewModel):this.$rootElement[s.rootDataKey]=this.viewModel,this}return i(n,[{key:"parseView",value:function(){return this.elementCache=he({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs}),this.isServerRendered&&!this.initRendered&&this.updateElementCache({templateCache:!0}),this}},{key:"updateElementCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.elementCache||this.elementCache;t.allCache&&(this.elementCache=he({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs})),(t.allCache||t.templateCache)&&n[this.bindingAttrs.tmp]&&n[this.bindingAttrs.tmp].length&&n[this.bindingAttrs.tmp].forEach(function(n){var i=null;n.el.hasAttribute(e.bindingAttrs.forOf)&&(i=function(){return!0}),n.bindingCache=he({rootNode:n.el,bindingAttrs:e.bindingAttrs,skipCheck:i,isRenderedTemplate:t.isRenderedTemplates})})}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};this.initRendered?t=_e("",e):this.isServerRendered?(this.$rootElement.removeAttribute(l),t=_e(u.serverRendered,e)):t=_e(u.init,e),this.postProcessQueue=[],qe({ctx:this,elementCache:this.elementCache,updateOption:t,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),n.applyBinding({ctx:this,elementCache:this.elementCache,updateOption:t,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),n.postProcess(this.postProcessQueue),this.postProcessQueue.length=0,delete this.postProcessQueue,this.initRendered=!0}},{key:"subscribe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return xe(this,e,t),this}},{key:"subscribeOnce",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return Me(this,e,t),this}},{key:"unsubscribe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ne(this.compId,e),this}},{key:"unsubscribeAll",value:function(){return je(this.compId),this}},{key:"publish",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ke.apply(Te,[e].concat(n)),this}}],[{key:"applyBinding",value:function(e){e.ctx;var t=e.elementCache,n=e.updateOption,i=e.bindingAttrs,a=e.viewModel;t&&n&&(n.forOfBinding&&t[i.forOf]&&t[i.forOf].length&&t[i.forOf].forEach(function(e){Ce(e,a,i,n.forceRender)}),n.attrBinding&&t[i.attr]&&t[i.attr].length&&t[i.attr].forEach(function(e){le(e,a,0,n.forceRender)}),n.ifBinding&&t[i.if]&&t[i.if].length&&t[i.if].forEach(function(e){Se(e,a,i,n.forceRender)}),n.showBinding&&t[i.show]&&t[i.show].length&&t[i.show].forEach(function(e){re(e,a,0,n.forceRender)}),n.switchBinding&&t[i.switch]&&t[i.switch].length&&t[i.switch].forEach(function(e){$e(e,a,i,n.forceRender)}),n.textBinding&&t[i.text]&&t[i.text].length&&t[i.text].forEach(function(e){ae(e,a,0,n.forceRender)}),n.cssBinding&&t[i.css]&&t[i.css].length&&t[i.css].forEach(function(e){oe(e,a,0,n.forceRender)}),n.modelBinding&&t[i.model]&&t[i.model].length&&t[i.model].forEach(function(e){ne(e,a,0,n.forceRender)}),n.changeBinding&&t[i.change]&&t[i.change].length&&t[i.change].forEach(function(e){te(e,a,i,n.forceRender)}),n.submitBinding&&t[i.submit]&&t[i.submit].length&&t[i.submit].forEach(function(e){ie(e,a,0,n.forceRender)}),n.clickBinding&&t[i.click]&&t[i.click].length&&t[i.click].forEach(function(e){G(e,a,0,n.forceRender)}),n.dblclickBinding&&t[i.dblclick]&&t[i.dblclick].length&&t[i.dblclick].forEach(function(e){Z(e,a,0,n.forceRender)}),n.blurBinding&&t[i.blur]&&t[i.blur].length&&t[i.blur].forEach(function(e){X(e,a,0,n.forceRender)}),n.focusBinding&&t[i.focus]&&t[i.focus].length&&t[i.focus].forEach(function(e){Y(e,a,0,n.forceRender)}),n.hoverBinding&&t[i.hover]&&t[i.hover].length&&t[i.hover].forEach(function(e){ee(e,a,0,n.forceRender)}))}},{key:"postProcess",value:function(e){e&&e.length&&j(e,function(e,t){if("function"==typeof t)try{t()}catch(e){H(e,"Error postProcess: "+String(t))}})}}]),n}(),qe=function(e){var t=e.ctx,n=e.elementCache,i=e.updateOption,a=e.bindingAttrs,r=e.viewModel;return!(!n||!a)&&(n[a.tmp]&&n[a.tmp].length&&(i.templateBinding&&(i=_e(u.init),n[a.tmp].forEach(function(e){U(e,r,a,n)}),t.updateElementCache({templateCache:!0,elementCache:n,isRenderedTemplates:!0})),i.forceRender=!0,n[a.tmp].forEach(function(e){Ve.applyBinding({elementCache:e.bindingCache,updateOption:i,bindingAttrs:a,viewModel:r})})),!0)},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={templateBinding:!1,textBinding:!0,cssBinding:!0,ifBinding:!0,showBinding:!0,modelBinding:!0,attrBinding:!0,forOfBinding:!0,switchBinding:!0},i={changeBinding:!0,clickBinding:!0,dblclickBinding:!0,blurBinding:!0,focusBinding:!0,hoverBinding:!0,submitBinding:!0},a={templateBinding:!1,textBinding:!1,cssBinding:!1,ifBinding:!1,showBinding:!1,modelBinding:!1,attrBinding:!1,forOfBinding:!1,switchBinding:!1},r={};switch(e){case u.serverRendered:r=N({},i,a,t);break;case u.init:t.templateBinding=!0,r=N({},n,i,t);break;default:r=N({},n,t)}return r},Fe=function(e){var t=e.elementCache,n=e.iterationVm,i=e.bindingAttrs,a=e.isRegenerate?_e(u.init):_e();a.forceRender=!0,qe({ctx:n.$root?n.$root.APP:n.APP,elementCache:t,updateOption:a,bindingAttrs:i,viewModel:n}),Ve.applyBinding({elementCache:t,updateOption:a,bindingAttrs:i,viewModel:n})},He=o,Qe=d,ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.bindingAttrs&&(He=$.extend({},e.bindingAttrs)),e.templateSettings&&(Qe=$.extend({},e.templateSettings))},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _.templateSettings=Qe,new Ve(e,t,He)};window.dataBind={use:ze,init:We,version:"@version@"}}();
//# sourceMappingURL=dataBind.min.js.map
