!function(){"use strict";const e={comp:"data-jq-comp",tmp:"data-jq-tmp",text:"data-jq-text",click:"data-jq-click",dblclick:"data-jq-dblclick",blur:"data-jq-blur",focus:"data-jq-focus",hover:"data-jq-hover",change:"data-jq-change",submit:"data-jq-submit",model:"data-jq-model",show:"data-jq-show",css:"data-jq-css",attr:"data-jq-attr",forOf:"data-jq-for",if:"data-jq-if",switch:"data-jq-switch",case:"data-jq-case",default:"data-jq-default"},t="data-server-rendered",n="data-forOf_",i="data-if_",r="data-case_",a="data-default_",o="_end",l="$root",s="$data",c="$index",d="in",u="out",f="SERVER-RENDERED",p="INIT",h={ONCE:"once"},m="_parent";_=window._||{};const g=Array.isArray,y="function"==typeof window.Promise,b=/\((.*?)\)/,v=/\s+/g,w=/(.*?)\s+(?:in|of)\s+(.*)/,E=/\|/,A=/^[\s]*<([a-z][^\/\s>]+)/i,C=/<(script|del)(?=[\s>])[\w\W]*?<\/\1\s*>/gi,B="content"in document.createElement("template"),P={div:["div","<div>","</div>"],thead:["table","<table>","</table>"],col:["colgroup","<table><colgroup>","</colgroup></table>"],tr:["tbody","<table><tbody>","</tbody></table>"],td:["tr","<table><tr>","</tr></table>"]};P.caption=P.colgroup=P.tbody=P.tfoot=P.thead,P.th=P.td;const D=e=>g?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e),O=e=>null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e),M=e=>{if(!O(e))return!1;const t=e.constructor;if("function"!=typeof t)return!1;const n=t.prototype;return!1!==O(n)&&!1!==n.hasOwnProperty("isPrototypeOf")},x=e=>!!O(e)&&0===Object.getOwnPropertyNames(e).length;function R(e){if("string"!=typeof e)return null;if(B){const t=document.createElement("template");return t.innerHTML=function(e=""){return e.replace(C,"")}(e),t.content}const t=document.createDocumentFragment(),n=document.createElement("div"),i=function(e){const t=e.match(A);return t?t[1]:null}(e),r=P[i||"div"];if("div"===r[0])return document.createRange().createContextualFragment(e);n.insertAdjacentHTML("beforeend",`${r[1]}${e}${r[2]}`);const a=n.querySelector(r[0]);for(;a.firstChild;)t.appendChild(a.firstChild);return t}const S=(e,t)=>_.get(e,t),j=(e,t)=>{let n=t.dataKey,i=t.parameters;const r="!"===n.charAt(0);r&&(n=r?n.substring(1):n);let a=S(e,n);if("function"==typeof a){const r=I(e,n),o=t.elementData?t.elementData.viewModelProValue:null;i=i?L(e,i):[];const l=i.concat([o,t.el]);a=a.apply(r,l)}return a=r?!Boolean(a):a,a=k({value:a,viewModel:e,bindingCache:t}),a},k=({value:e,viewModel:t,bindingCache:n})=>{let i=e;return n.filters&&K(n.filters,((e,n)=>{const r=I(t,n),a=S.call(r,r,n);try{i=a.call(r,i)}catch(e){z(e,`Invalid filter: ${n}`)}})),i},N=()=>{let e={};return y?e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})):e=$.Deferred(),e},T=(e=!1,t,...n)=>{if(!n.length)return t;const i=n.shift();return void 0===i?t:e?(V(t)&&V(i)&&Object.keys(i).forEach((e=>{V(i[e])?(t[e]||(t[e]={}),T(t[e],i[e])):t[e]=i[e]})),T(!0,t,...n)):Object.assign(t,...n)},K=(e,t)=>{if("object"!=typeof e||"function"!=typeof t)return;let n=[],i=0;const r=D(e);let a,o,l=0;if(r)i=e.length;else{if(!O(e))throw new TypeError("Object is not an array or object");n=Object.keys(e),i=n.length}for(l=0;l<i;l+=1)r?(a=l,o=e[l]):(a=n[l],o=e[a]),t(a,o)},V=e=>O(e)&&!D(e),q=(e,t,n)=>{const i=n&&n.nextSibling?n.nextSibling:null;return e.insertBefore(t,i)},I=(e,t)=>{let n=e;if("string"!=typeof t)return n;const i=t.split(".");return i.length>1&&(i[0]===l?n=e[l]||e:i[0]===s&&(n=e[s]||e)),n},L=(e,t)=>{if(e&&D(t))return t.map((t=>((t=t.trim())===c?t=e[c]:t===s?t=e[s]||e:t===l&&(t=e[l]||e),t)))},F=e=>{if(e&&e.firstChild)for(;e.firstChild;)e.removeChild(e.firstChild);return e},z=(e=null,t="")=>{const n=e&&e.message?e.message:t;return"function"==typeof console.error?console.error(n):console.log(n)};let Q=null,H=null,J=0;const G={},W=(e,t,n,i)=>{const r="string"==typeof e.dataKey?(e=>{const t=e.replace(/(\s*?{\s*?|\s*?,\s*?)(['"])?([a-zA-Z0-9]+)(['"])?:/g,'$1"$3":').replace(/'/g,'"');return JSON.parse(t)})(e.dataKey):e.dataKey;let a=r.data;const o=r.append,l=r.prepend;let s;if(e.dataKey=r,a=void 0===a||"$root"===a?t:j(t,{dataKey:r.data,parameters:e.parameters}),!a)return;const c=e.el,d=void 0!==t.$index?t.$index:c.getAttribute("data-index");void 0!==d&&(a.$index=d),Q=Q||document.createDocumentFragment(),H=H||c;const u=R(((e,t=null)=>{let n,i;return G[e]||(i=document.getElementById(e),n=i?i.innerHTML:"",G[e]=_.template(n,{variable:"data"})),G[e](t)})(r.id,a));Q.childNodes.length?(s=c,o||l||(s=F(s)),l?s.insertBefore(u,s.firstChild):s.appendChild(u)):(s=Q,Q.appendChild(u));const f=s.querySelectorAll("["+n.tmp+"]"),p=f.length;if(p){J+=p;for(let e=0;e<p;e+=1){const r={el:f[e],dataKey:f[e].getAttribute(n.tmp)};i[n.tmp].push(r),W(r,t,n,i),J-=1}}0===J&&(o||l||(H=F(H)),l?H.insertBefore(Q,H.firstChild):H.appendChild(Q),Q=H=null,"function"==typeof t.afterTemplateRender&&t.afterTemplateRender(a))},Z=(e,t,n,i)=>{const r=e.dataKey;let a=e.parameters;const o=e.el.getAttribute(n.model);let l,s="",c="";const d=t.APP||t.$root.APP;if(!r||!i&&!d.$rootElement.contains(e.el))return;const u=S(t,r);if("function"==typeof u){function n(e){const n=this,i="checkbox"===n.type;var r,d,f;s=i?n.checked:_.escape(n.value),o&&(c=S(t,o),r=t,d=o,f=s,_.set(r,d,f));const p=[e,e.currentTarget,s,c].concat(a);u.apply(l,p),c=s}l=I(t,r),a=a?L(t,a):[],e.el.removeEventListener("change",n,!1),e.el.addEventListener("change",n,!1)}};let U;const X=(e,t)=>{let n=!0;for(e=e.firstElementChild;e;)n=t(e),n&&X(e,t),e=e.nextElementSibling},Y=e=>"SVG"===e.tagName,ee=(e,t)=>"SVG"===e.tagName||e.hasAttribute(t.comp),te=({node:e,attrObj:t,bindingCache:n,type:i})=>{let r,a;if(U&&U[i]&&void 0!==t[i]){n[i]=n[i]||[],r=t[i].trim(),a={el:e,dataKey:r},a=(e=>{if(!e||!e.dataKey||e.dataKey.length>50)return e;const t=e.dataKey.split(E);let n;return e.dataKey=t[0].trim(),t.length>1&&(t.shift(0),t.forEach((function(i,r){t[r]=i.trim(),t[r]===h.ONCE&&(e.isOnce=!0,n=r)})),n>=0&&t.splice(n,1),e.filters=t),e})(a);const o=(e=>{if(!e||e.length>50)return;let t=e.match(b);return t&&t[1]&&(t=t[1].split(","),t.forEach((function(e,n){t[n]=e.trim()}))),t})(a.dataKey);o&&(a.parameters=o,a.dataKey=a.dataKey.replace(b,"").trim()),a[m]=n[i],n[i].push(a)}return n},ne=({rootNode:e=null,bindingAttrs:t={},skipCheck:n,isRenderedTemplate:i=!1})=>{let r={};if(!e instanceof window.Node)throw new TypeError("walkDOM: Expected a DOM node");var a;U=U||(a=t,Object.keys(a).reduce((function(e,t){return e[a[t]]=t,e}),{}));const o=(e,a=ee)=>{let o=!1;if(1!==e.nodeType||!e.hasAttributes())return!0;if(a(e,t)||"function"==typeof n&&n(e))return!1;const l=(e=>{const t={};return Array.prototype.slice.call(e.attributes).forEach((e=>{t[e.name]=e.value})),t})(e),s=((e={},t)=>[t.forOf,t.if,t.case,t.default].filter((t=>void 0!==e[t])))(l,t);let c=[];if(s.length)o=!0,c=s;else{if(i&&l[t.tmp])return!0;c=Object.keys(l)}return c.forEach((n=>{n!==t.case&&n!==t.default&&(r=te({node:e,attrObj:l,bindingCache:r,type:n}))})),!o};return o(e,Y)&&X(e,o),r},ie=e=>{const t=e.el.cloneNode(!0);return e.fragment=document.createDocumentFragment(),e.fragment.appendChild(t),e},re=t=>{if(!t||!t.type)return t;let o="";const l=t.dataKey?t.dataKey.replace(v,"_"):"";switch(t.type){case e.forOf:o=n;break;case e.if:o=i;break;case e.case:o=r;break;case e.default:o=a}return t.commentPrefix=o+l,t},ae=(e,t)=>{t.commentPrefix||re(t);const n=t.commentPrefix+o;if(e=e.nextSibling){if(8===e.nodeType&&e.textContent===n)return t.docRange.setEndBefore(e);ae(e,t)}},oe=(e,t)=>{let n="";e.commentPrefix||re(e),n=e.commentPrefix;const i=document.createComment(n),r=document.createComment(n+o);return 11===t.nodeType?(t.insertBefore(i,t.firstChild),t.appendChild(r)):t.parentNode&&(t.parentNode.insertBefore(i,t),q(t.parentNode,r,t),e.previousNonTemplateElement=t.previousSibling,e.nextNonTemplateElement=t.nextSibling,e.parentElement=t.previousSibling.parentElement),t},le=e=>{e.docRange||(e.docRange=document.createRange());try{e.previousNonTemplateElement?(e.docRange.setStartBefore(e.previousNonTemplateElement.nextSibling),ae(e.previousNonTemplateElement.nextSibling,e)):(e.docRange.setStartBefore(e.parentElement.firstChild),ae(e.parentElement.firstChild,e))}catch(e){console.log("error removeElemnetsByCommentWrap: ",e.message)}return e.docRange.deleteContents()},se=(e,t)=>{e.previousNonTemplateElement?q(e.parentElement,t,e.previousNonTemplateElement):e.nextNonTemplateElement?e.parentElement.insertBefore(t,e.nextNonTemplateElement):e.parentElement&&e.parentElement.appendChild(t)},ce=({bindingData:e,viewModel:t,iterationData:n,keys:i,index:r})=>{const a={};return a[e.iterator.alias]=i?n[i[r]]:n[r],a[l]=t.$root||t,a[s]=a[e.iterator.alias],a[c]=r,a},de=(e,t,n,i,r)=>{const a=document.createDocumentFragment(),o=e.iterationSize;let l,s,c,d=0;for(D(e.iterationBindingCache)?e.iterationBindingCache.length=0:e.iterationBindingCache=[],d=0;d<o;d+=1)l=e.el.cloneNode(!0),c=ne({rootNode:l,bindingAttrs:n}),e.iterationBindingCache.push(c),x(c)||(s=ce({bindingData:e,viewModel:t,iterationData:i,keys:r,index:d}),Be({elementCache:e.iterationBindingCache[d],iterationVm:s,bindingAttrs:n,isRegenerate:!0})),a.appendChild(l);return a},ue=(t,n,i)=>{const r=t.dataKey;if(r&&!(r.length>50)){if(!t.iterator){if(r.length>50)return;t.dataKey=t.dataKey.replace(v," ");const e=r.match(w);if(!e)return;t.iterator={},t.iterator.alias=e[1].trim(),e[2]&&(t.iterator.dataKey=e[2].trim(),t.parentElement=t.el.parentElement,t.previousNonTemplateElement=t.el.previousSibling,t.nextNonTemplateElement=t.el.nextSibling)}(({bindingData:t,viewModel:n,bindingAttrs:i})=>{if(!t||!n||!i)return;let r,a;const o=j(n,t.iterator);let l=!1;if(D(o))a=o.length;else{if(!M(o))return z(null,"iterationData is not an plain object or array");r=Object.keys(o),a=r.length}if(t.type||(t.type=e.forOf,oe(t,t.el)),void 0===t.iterationSize?(t.iterationSize=a,t.el.removeAttribute(i.forOf),l=!0):(l=t.iterationSize!==a,t.iterationSize=a),!l)return void t.iterationBindingCache.forEach((function(e,a){if(!x(e)){const l=ce({bindingData:t,viewModel:n,iterationData:o,keys:r,index:a});Be({elementCache:e,iterationVm:l,bindingAttrs:i,isRegenerate:!1})}}));const s=de(t,n,i,o,r);le(t),se(t,s)})({bindingData:t,viewModel:n,bindingAttrs:i})}},fe=({bindingData:e,viewModel:t,bindingAttrs:n})=>{if(!e.fragment)return;const i=(e=>{let t=!1;if(e&&e.previousNonTemplateElement){const n=e.previousNonTemplateElement.textContent,i=e.previousNonTemplateElement.nextSibling;8===i.nodeType&&i.textContent===n+o&&(t=!0)}return t})(e);let r=e.el;i||e.isOnce||(pe(e),r=e.fragment.firstChild.cloneNode(!0)),e.iterationBindingCache&&e.hasIterationBindingCache||(e.iterationBindingCache=ne({rootNode:r,bindingAttrs:n})),x(e.iterationBindingCache)||(e.hasIterationBindingCache=!0,Be({elementCache:e.iterationBindingCache,iterationVm:t,bindingAttrs:n,isRegenerate:!0})),se(e,r)},pe=e=>{le(e),e.hasIterationBindingCache&&(delete e.iterationBindingCache,delete e.hasIterationBindingCache)},he=({viewModel:e,cache:t})=>{let n=!1;return e.APP.postProcessQueue&&(e.APP.postProcessQueue.push(((e,t)=>()=>{e[m].splice(t,1)})(t,t[m].indexOf(t))),n=!0),n};function me(e,t){e.forEach(((e,n)=>{n===t&&void 0!==t||(pe(e),e.hasIterationBindingCache&&(e.iterationBindingCache=null,e.hasIterationBindingCache=!1))}))}function ge(e,t){return{el:e,dataKey:e.getAttribute(t),type:t}}const ye={},be=(e=null,t="",n,i=!1)=>{if(!e||!e.compId||!t||"function"!=typeof n)return;let r,a=!1;t=t.replace(v,""),ye[t]=ye[t]||[],a=ye[t].some((t=>{if(t[e.compId])return t[e.compId]=n.bind(e.viewModel),t.isOnce=i,!0})),a||(r={},r[e.compId]=n.bind(e.viewModel),r.isOnce=i,ye[t].push(r))},ve=(e="",t="")=>{if(!e||!t)return;let n,i=0,r=0;if(t=t.replace(v,""),ye[t])for(r=ye[t].length,i=0;i<r;i+=1)if(n=ye[t][i],n[e]){ye[t].splice(i,1);break}ye[t].length||delete ye[t]};let we=0;class Ee{constructor(e,n,i){if(!e||1!==e.nodeType||null===n||"object"!=typeof n)throw new TypeError("$rootElement or viewModel is invalid");return this.initRendered=!1,this.compId=we+=1,this.$rootElement=e,this.viewModel=n,this.bindingAttrs=i,this.render=((e,t=null)=>function(e,t){let n=N(),i=0;return function(){const r=Array.from?Array.from(arguments):Array.prototype.slice.call(arguments);return window.cancelAnimationFrame(i),i=window.requestAnimationFrame((()=>{try{e.apply(t,r),n.resolve(t)}catch(e){console.error("error in rendering: ",e),n.reject(e)}n=N(),window.cancelAnimationFrame(i)})),y?n.promise:n.promise()}}(e,t))(this.render,this),this.isServerRendered=null!==this.$rootElement.getAttribute(t),this.viewModel.APP=this,this.viewModel.$root=this.viewModel,this.parseView(),this.$rootElement[l]=this.viewModel,this}parseView(){return this.elementCache=ne({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs}),this.isServerRendered&&!this.initRendered&&this.updateElementCache({templateCache:!0}),this}updateElementCache(e={}){const t=e.elementCache||this.elementCache;e.allCache&&(this.elementCache=ne({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs})),(e.allCache||e.templateCache)&&t[this.bindingAttrs.tmp]&&t[this.bindingAttrs.tmp].length&&t[this.bindingAttrs.tmp].forEach((t=>{let n=null;t.el.hasAttribute(this.bindingAttrs.forOf)&&(n=()=>!0),t.bindingCache=ne({rootNode:t.el,bindingAttrs:this.bindingAttrs,skipCheck:n,isRenderedTemplate:e.isRenderedTemplates})}))}render(e={}){let n={};this.initRendered?n=Ce("",e):this.isServerRendered?(this.$rootElement.removeAttribute(t),n=Ce(f,e)):n=Ce(p,e),this.postProcessQueue=[],Ae({ctx:this,elementCache:this.elementCache,updateOption:n,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),Ee.applyBinding({ctx:this,elementCache:this.elementCache,updateOption:n,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),Ee.postProcess(this.postProcessQueue),this.postProcessQueue.length=0,delete this.postProcessQueue,this.initRendered=!0}static applyBinding({ctx:t,elementCache:n,updateOption:i,bindingAttrs:r,viewModel:a}){n&&i&&(i.forOfBinding&&n[r.forOf]&&n[r.forOf].length&&n[r.forOf].forEach((e=>{ue(e,a,r,i.forceRender)})),i.attrBinding&&n[r.attr]&&n[r.attr].length&&n[r.attr].forEach((e=>{((e,t,n)=>{if(!e.dataKey)return;e.elementData=e.elementData||{},e.elementData.viewModelProValue=e.elementData.viewModelProValue||{};const i=e.elementData.viewModelProValue,r=j(t,e);M(r)&&JSON.stringify(i)!==JSON.stringify(r)&&(e.elementData.viewModelProValue={},x(i)?K(r,((t,n)=>{e.el.setAttribute(t,n),e.elementData.viewModelProValue[t]=n})):(K(i,((t,n)=>{void 0===r[t]&&e.el.removeAttribute(t)})),K(r,((t,n)=>{i[t]!==r[t]&&e.el.setAttribute(t,r[t]),e.elementData.viewModelProValue[t]=n}))))})(e,a,0,i.forceRender)})),i.ifBinding&&n[r.if]&&n[r.if].length&&n[r.if].forEach((t=>{((t,n,i)=>{if(!t.dataKey||t.isOnce&&!1===t.hasIterationBindingCache)return;t.elementData=t.elementData||{},t.type=t.type||e.if;const r=t.elementData.viewModelPropValue,a=j(n,t)||!1;if(r===a&&!t.hasIterationBindingCache)return;const o=Boolean(a);if(!o&&t.isOnce&&t.el.parentNode)return(l=t.el)&&l.parentNode&&l.parentNode.removeChild(l),void he({viewModel:n,cache:t});var l;t.elementData.viewModelPropValue=a,t.fragment||(oe(t,t.el),t.el.removeAttribute(i.if),ie(t)),o?(fe({bindingData:t,viewModel:n,bindingAttrs:i}),t.isOnce&&!t.hasIterationBindingCache&&he({viewModel:n,cache:t})):pe(t)})(t,a,r,i.forceRender)})),i.showBinding&&n[r.show]&&n[r.show].length&&n[r.show].forEach((e=>{((e,t,n)=>{let i={},r="",a=!0;if(!e.dataKey)return;e.elementData=e.elementData||{};const o=e.elementData.viewModelPropValue;if(void 0===e.elementData.displayStyle||void 0===e.elementData.computedStyle)if(i=e.el.style,r=i.display,r)e.elementData.displayStyle="none"===r?"block":r,e.elementData.computedStyle=null;else{const t=window.getComputedStyle(e.el,null).getPropertyValue("display");e.elementData.displayStyle=null,e.elementData.computedStyle=t}a=j(t,e),a=Boolean(a),o!==a&&(a?e.elementData.computedStyle||"none"===e.el.style.display?"none"===e.elementData.computedStyle?e.el.style.setProperty("display","block"):i.length>1?e.el.style.removeProperty("display"):e.el.removeAttribute("style"):e.el.style.setProperty("display",e.elementData.displayStyle):"none"!==e.el.style.display&&e.el.style.setProperty("display","none"),e.elementData.viewModelPropValue=a)})(e,a,0,i.forceRender)})),i.switchBinding&&n[r.switch]&&n[r.switch].length&&n[r.switch].forEach((e=>{((e,t,n)=>{if(!e.dataKey)return;e.elementData=e.elementData||{};const i=j(t,e);if(i!==e.elementData.viewModelPropValue){if(e.elementData.viewModelPropValue=i,!e.cases){const t=e.el.children;if(!t.length)return;e.cases=[];for(let i=0,r=t.length;i<r;i+=1){let r=null;t[i].hasAttribute(n.case)?r=ge(t[i],n.case):t[i].hasAttribute(n.default)&&(r=ge(t[i],n.default),r.isDefault=!0),r&&(oe(r,r.el),r.isDefault?r.el.removeAttribute(n.default):r.el.removeAttribute(n.case),ie(r),e.cases.push(r))}}if(e.cases.length){let i=!1;for(let r=0,a=e.cases.length;r<a;r+=1){let a;if(e.cases[r].dataKey&&(a=j(t,e.cases[r])||e.cases[r].dataKey),a===e.elementData.viewModelPropValue||e.cases[r].isDefault){i=!0,fe({bindingData:e.cases[r],viewModel:t,bindingAttrs:n}),me(e.cases,r);break}}i||me(e.cases)}}})(e,a,r,i.forceRender)})),i.textBinding&&n[r.text]&&n[r.text].length&&n[r.text].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey,a=t.APP||t.$root.APP;if(!r||!i&&!a.$rootElement.contains(e.el))return;const o=j(t,e),l=e.el.textContent;void 0!==o&&"object"!=typeof o&&null!==o&&o!==l&&(e.el.textContent=o)})(e,a,0,i.forceRender)})),i.cssBinding&&n[r.css]&&n[r.css].length&&n[r.css].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey,a=t.APP||t.$root.APP;if(!r||!i&&!a.$rootElement.contains(e.el))return;e.elementData=e.elementData||{},e.elementData.viewModelPropValue=e.elementData.viewModelPropValue||"";const o=e.elementData.viewModelPropValue;let l="";const s=j(t,e);let c=[],d=!1,u=!1,f=[];if("string"==typeof s)u=!0;else{if(!M(s))return;d=!0}if(d?l=JSON.stringify(s):(l=s.replace(/\s\s+/g," ").trim(),c=l.split(" ")),o===l)return;const p=e.el.classList,h=p.length;for(let e=0;e<h;e+=1)f.push(p[e]);var m;d?K(s,(function(e,t){const n=f.indexOf(e);!0===t?f.push(e):-1!==n&&f.splice(n,1)})):u&&(m=o,f=f.filter(((e,t)=>m.indexOf(e)<0)),f=f.concat(c)),f=f.filter(((e,t,n)=>n.indexOf(e)===t)),f=f.join(" "),e.elementData.viewModelPropValue=l,e.el.setAttribute("class",f)})(e,a,0,i.forceRender)})),i.modelBinding&&n[r.model]&&n[r.model].length&&n[r.model].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey;let a="";const o=t.APP||t.$root.APP;if(r&&(i||o.$rootElement.contains(e.el))&&(a=S(t,r),null!=a)){const t=e.el,n="checkbox"===t.type,i="radio"===t.type,r=t.name,l=i?o.$rootElement.querySelectorAll(`input[name="${r}"]`):[];if(a!==(n?t.checked:t.value))if(n)t.checked=Boolean(a);else if(i){let e=0;const t=l.length;for(e=0;e<t;e+=1)if(l[e].value===a){l[e].checked=!0;break}}else t.value=a}})(e,a,0,i.forceRender)})),i.changeBinding&&n[r.change]&&n[r.change].length&&n[r.change].forEach((e=>{Z(e,a,r,i.forceRender)})),i.submitBinding&&n[r.submit]&&n[r.submit].length&&n[r.submit].forEach((e=>{Pe({cache:e,forceRender:i.forceRender,type:"submit",viewModel:a})})),i.clickBinding&&n[r.click]&&n[r.click].length&&n[r.click].forEach((e=>{Pe({cache:e,forceRender:i.forceRender,type:"click",viewModel:a})})),i.dblclickBinding&&n[r.dblclick]&&n[r.dblclick].length&&n[r.dblclick].forEach((e=>{Pe({cache:e,forceRender:i.forceRender,type:"dblclick",viewModel:a})})),i.blurBinding&&n[r.blur]&&n[r.blur].length&&n[r.blur].forEach((e=>{Pe({cache:e,forceRender:i.forceRender,type:"blur",viewModel:a})})),i.focusBinding&&n[r.focus]&&n[r.focus].length&&n[r.focus].forEach((e=>{Pe({cache:e,forceRender:i.forceRender,type:"focus",viewModel:a})})),i.hoverBinding&&n[r.hover]&&n[r.hover].length&&n[r.hover].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey;let a=e.parameters;const o=d,l=u;let s;const c=t.APP||t.$root.APP;if(e.elementData=e.elementData||{},!r||!i&&!c.$rootElement.contains(e.el))return;const f=S(t,r);if(f&&"function"==typeof f[o]&&"function"==typeof f[l]){function n(t){const n=[t,e.el].concat(a);f[o].apply(s,n)}function i(t){const n=[t,e.el].concat(a);f[l].apply(s,n)}s=I(t,r),a=a?L(t,a):[],e.el.removeEventListener("mouseenter",n,!1),e.el.removeEventListener("mouseleave",i,!1),e.el.addEventListener("mouseenter",n,!1),e.el.addEventListener("mouseleave",i,!1)}})(e,a,0,i.forceRender)})))}static postProcess(e){e&&e.length&&K(e,((e,t)=>{if("function"==typeof t)try{t()}catch(e){z(e,"Error postProcess: "+String(t))}}))}subscribe(e="",t){return be(this,e,t),this}subscribeOnce(e="",t){return((e=null,t="",n)=>{be(e,t,n,!0)})(this,e,t),this}unsubscribe(e=""){return ve(this.compId,e),this}unsubscribeAll(){return((e="")=>{e&&Object.keys(ye).forEach((t=>{ve(e,t)}))})(this.compId),this}publish(e="",...t){return((e="",...t)=>{e&&ye[e]&&(e=e.replace(v,""),ye[e].forEach((n=>{Object.keys(n).forEach((i=>{if("function"==typeof n[i]){const r=n[i](...t);return n.isOnce&&ve(i,e),r}}))})))})(e,...t),this}}const Ae=({ctx:e,elementCache:t,updateOption:n,bindingAttrs:i,viewModel:r})=>!(!t||!i)&&(t[i.tmp]&&t[i.tmp].length&&(n.templateBinding&&(n=Ce(p),t[i.tmp].forEach((e=>{W(e,r,i,t)})),e.updateElementCache({templateCache:!0,elementCache:t,isRenderedTemplates:!0})),n.forceRender=!0,t[i.tmp].forEach((e=>{Ee.applyBinding({elementCache:e.bindingCache,updateOption:n,bindingAttrs:i,viewModel:r})}))),!0),Ce=(e="",t={})=>{const n={templateBinding:!1,textBinding:!0,cssBinding:!0,ifBinding:!0,showBinding:!0,modelBinding:!0,attrBinding:!0,forOfBinding:!0,switchBinding:!0},i={changeBinding:!0,clickBinding:!0,dblclickBinding:!0,blurBinding:!0,focusBinding:!0,hoverBinding:!0,submitBinding:!0},r={templateBinding:!1,textBinding:!1,cssBinding:!1,ifBinding:!1,showBinding:!1,modelBinding:!1,attrBinding:!1,forOfBinding:!1,switchBinding:!1};let a={};switch(e){case f:a=T({},i,r,t);break;case p:t.templateBinding=!0,a=T({},n,i,t);break;default:a=T({},n,t)}return a},Be=({elementCache:e,iterationVm:t,bindingAttrs:n,isRegenerate:i})=>{const r=i?Ce(p):Ce();r.forceRender=!0,Ae({ctx:t.$root?t.$root.APP:t.APP,elementCache:e,updateOption:r,bindingAttrs:n,viewModel:t}),Ee.applyBinding({elementCache:e,updateOption:r,bindingAttrs:n,viewModel:t})},Pe=({cache:e={},forceRender:t=!1,type:n="",viewModel:i={}})=>{const r=e.dataKey;let a,o=e.parameters;const l=i.APP||i.$root.APP;if(!n||!r||!t&&!l.$rootElement.contains(e.el))return;const s=S(i,r);if("function"==typeof s){a=I(i,r),o=o?L(i,o):[];const t=e=>{let t,i=[];"submit"===n?(t=(e=>{const t={};return!e instanceof HTMLFormElement||new FormData(e).forEach(((e,n)=>{Object.prototype.hasOwnProperty.call(Object,n)?(Array.isArray(t[n])||(t[n]=[t[n]]),t[n].push(e)):t[n]=e})),t})(e.currentTarget),i=[e,e.currentTarget,t].concat(o)):i=[e,e.currentTarget].concat(o),s.apply(a,i)};e.el.removeEventListener(n,t,!1),e.el.addEventListener(n,t,!1)}};let De=e,Oe={evaluate:/<%([\s\S]+?)%>/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{(.+?)\}\}/g};window.dataBind={use:(e={})=>{e.bindingAttrs&&(De=$.extend({},e.bindingAttrs)),e.templateSettings&&(Oe=$.extend({},e.templateSettings))},init:(e,t=null)=>(_.templateSettings=Oe,new Ee(e,t,De)),version:"@version@"}}();
//# sourceMappingURL=dataBind.min.js.map
