!function(){"use strict";function e(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}function t(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function o(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(t){o(e,t)}),(function(n){i[e]={status:"rejected",reason:n},0==--r&&t(i)}))}i[e]={status:"fulfilled",value:n},0==--r&&t(i)}for(var a=0;a<i.length;a++)o(a,i[a])}))}var n=setTimeout;function i(e){return Boolean(e&&void 0!==e.length)}function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,i)}else(1===e._state?l:c)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void u((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,s(e)}catch(t){c(e,t)}var i,r}function c(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&o._immediateFn((function(){e._handled||o._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(e){if(n)return;n=!0,c(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new d(e,t,n)),n},o.prototype.finally=e,o.all=function(e){return new o((function(t,n){if(!i(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function a(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var l=i.then;if("function"==typeof l)return void l.call(i,(function(t){a(e,t)}),n)}r[e]=i,0==--o&&t(r)}catch(e){n(e)}}for(var l=0;l<r.length;l++)a(l,r[l])}))},o.allSettled=t,o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o((function(t){t(e)}))},o.reject=function(e){return new o((function(t,n){n(e)}))},o.race=function(e){return new o((function(t,n){if(!i(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,a=e.length;r<a;r++)o.resolve(e[r]).then(t,n)}))},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var f=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof f.Promise?f.Promise=o:f.Promise.prototype.finally?f.Promise.allSettled||(f.Promise.allSettled=t):f.Promise.prototype.finally=e;const p={comp:"data-jq-comp",tmp:"data-jq-tmp",text:"data-jq-text",click:"data-jq-click",dblclick:"data-jq-dblclick",blur:"data-jq-blur",focus:"data-jq-focus",hover:"data-jq-hover",change:"data-jq-change",submit:"data-jq-submit",model:"data-jq-model",show:"data-jq-show",css:"data-jq-css",attr:"data-jq-attr",forOf:"data-jq-for",if:"data-jq-if",switch:"data-jq-switch",case:"data-jq-case",default:"data-jq-default"},h="data-server-rendered",m="data-forOf_",g="data-if_",y="data-case_",b="data-default_",v="_end",w="$root",E="$data",A="$index",C="in",P="out",B="SERVER-RENDERED",D="INIT",O={ONCE:"once"},j="_parent";_=window._||{};const M=Array.isArray,R=/\((.*?)\)/,S=/\s+/g,x=/(.*?)\s+(?:in|of)\s+(.*)/,k=/\|/,T=/^[\s]*<([a-z][^\/\s>]+)/i,N=/<(script|del)(?=[\s>])[\w\W]*?<\/\1\s*>/gi,$="content"in document.createElement("template"),K={div:["div","<div>","</div>"],thead:["table","<table>","</table>"],col:["colgroup","<table><colgroup>","</colgroup></table>"],tr:["tbody","<table><tbody>","</tbody></table>"],td:["tr","<table><tr>","</tr></table>"]};K.caption=K.colgroup=K.tbody=K.tfoot=K.thead,K.th=K.td;const V=e=>M?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e),q=e=>null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e),I=e=>{if(!q(e))return!1;const t=e.constructor;if("function"!=typeof t)return!1;const n=t.prototype;return!1!==q(n)&&!1!==n.hasOwnProperty("isPrototypeOf")},F=e=>!!q(e)&&0===Object.getOwnPropertyNames(e).length;function L(e){if("string"!=typeof e)return null;if($){const t=document.createElement("template");return t.innerHTML=function(e=""){return e.replace(N,"")}(e),t.content}const t=document.createDocumentFragment(),n=document.createElement("div"),i=function(e){const t=e.match(T);return t?t[1]:null}(e),r=K[i||"div"];if("div"===r[0])return document.createRange().createContextualFragment(e);n.insertAdjacentHTML("beforeend",`${r[1]}${e}${r[2]}`);const o=n.querySelector(r[0]);for(;o.firstChild;)t.appendChild(o.firstChild);return t}const z=(e,t)=>_.get(e,t),Q=(e,t)=>{let n=t.dataKey,i=t.parameters;const r="!"===n.charAt(0);r&&(n=r?n.substring(1):n);let o=z(e,n);if("function"==typeof o){const r=X(e,n),a=t.elementData?t.elementData.viewModelProValue:null;i=i?Y(e,i):[];const l=i.concat([a,t.el]);o=o.apply(r,l)}return o=r?!Boolean(o):o,o=H({value:o,viewModel:e,bindingCache:t}),o},H=({value:e,viewModel:t,bindingCache:n})=>{let i=e;return n.filters&&W(n.filters,((e,n)=>{const r=X(t,n),o=z.call(r,r,n);try{i=o.call(r,i)}catch(e){te(e,`Invalid filter: ${n}`)}})),i},J=()=>{const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e},G=(e=!1,t,...n)=>{if(!n.length)return t;const i=n.shift();return void 0===i?t:e?(U(t)&&U(i)&&Object.keys(i).forEach((e=>{U(i[e])?(t[e]||(t[e]={}),G(t[e],i[e])):t[e]=i[e]})),G(!0,t,...n)):Object.assign(t,...n)},W=(e,t)=>{if("object"!=typeof e||"function"!=typeof t)return;let n=[],i=0;const r=V(e);let o,a,l=0;if(r)i=e.length;else{if(!q(e))throw new TypeError("Object is not an array or object");n=Object.keys(e),i=n.length}for(l=0;l<i;l+=1)r?(o=l,a=e[l]):(o=n[l],a=e[o]),t(o,a)},U=e=>q(e)&&!V(e),Z=(e,t,n)=>{const i=n&&n.nextSibling?n.nextSibling:null;return e.insertBefore(t,i)},X=(e,t)=>{let n=e;if("string"!=typeof t)return n;const i=t.split(".");return i.length>1&&(i[0]===w?n=e[w]||e:i[0]===E&&(n=e[E]||e)),n},Y=(e,t)=>{if(e&&V(t))return t.map((t=>((t=t.trim())===A?t=e[A]:t===E?t=e[E]||e:t===w&&(t=e[w]||e),t)))},ee=e=>{if(e&&e.firstChild)for(;e.firstChild;)e.removeChild(e.firstChild);return e},te=(e=null,t="")=>{const n=e&&e.message?e.message:t;return"function"==typeof console.error?console.error(n):console.log(n)};let ne=null,ie=null,re=0;const oe={},ae=(e,t,n,i)=>{const r="string"==typeof e.dataKey?(e=>{const t=e.replace(/(\s*?{\s*?|\s*?,\s*?)(['"])?([a-zA-Z0-9]+)(['"])?:/g,'$1"$3":').replace(/'/g,'"');return JSON.parse(t)})(e.dataKey):e.dataKey;let o=r.data;const a=r.append,l=r.prepend;let c;if(e.dataKey=r,o=void 0===o||"$root"===o?t:Q(t,{dataKey:r.data,parameters:e.parameters}),!o)return;const s=e.el,d=void 0!==t.$index?t.$index:s.getAttribute("data-index");void 0!==d&&(o.$index=d),ne=ne||document.createDocumentFragment(),ie=ie||s;const u=L(((e,t=null)=>{let n,i;return oe[e]||(i=document.getElementById(e),n=i?i.innerHTML:"",oe[e]=_.template(n,{variable:"data"})),oe[e](t)})(r.id,o));ne.childNodes.length?(c=s,a||l||(c=ee(c)),l?c.insertBefore(u,c.firstChild):c.appendChild(u)):(c=ne,ne.appendChild(u));const f=c.querySelectorAll("["+n.tmp+"]"),p=f.length;if(p){re+=p;for(let e=0;e<p;e+=1){const r={el:f[e],dataKey:f[e].getAttribute(n.tmp)};i[n.tmp].push(r),ae(r,t,n,i),re-=1}}0===re&&(a||l||(ie=ee(ie)),l?ie.insertBefore(ne,ie.firstChild):ie.appendChild(ne),ne=ie=null,"function"==typeof t.afterTemplateRender&&t.afterTemplateRender(o))},le=(e,t,n,i)=>{const r=e.dataKey;let o=e.parameters;const a=e.el.getAttribute(n.model);let l,c="",s="";const d=t.APP||t.$root.APP;if(!r||!i&&!d.$rootElement.contains(e.el))return;const u=z(t,r);if("function"==typeof u){function n(e){const n=this,i="checkbox"===n.type;var r,d,f;c=i?n.checked:_.escape(n.value),a&&(s=z(t,a),r=t,d=a,f=c,_.set(r,d,f));const p=[e,e.currentTarget,c,s].concat(o);u.apply(l,p),s=c}l=X(t,r),o=o?Y(t,o):[],e.el.removeEventListener("change",n,!1),e.el.addEventListener("change",n,!1)}};let ce;const se=(e,t)=>{let n=!0;for(e=e.firstElementChild;e;)n=t(e),n&&se(e,t),e=e.nextElementSibling},de=e=>"SVG"===e.tagName,ue=(e,t)=>"SVG"===e.tagName||e.hasAttribute(t.comp),fe=({node:e,attrObj:t,bindingCache:n,type:i})=>{let r,o;if(ce&&ce[i]&&void 0!==t[i]){n[i]=n[i]||[],r=t[i].trim(),o={el:e,dataKey:r},o=(e=>{if(!e||!e.dataKey||e.dataKey.length>50)return e;const t=e.dataKey.split(k);let n;return e.dataKey=t[0].trim(),t.length>1&&(t.shift(0),t.forEach((function(i,r){t[r]=i.trim(),t[r]===O.ONCE&&(e.isOnce=!0,n=r)})),n>=0&&t.splice(n,1),e.filters=t),e})(o);const a=(e=>{if(!e||e.length>50)return;let t=e.match(R);return t&&t[1]&&(t=t[1].split(","),t.forEach((function(e,n){t[n]=e.trim()}))),t})(o.dataKey);a&&(o.parameters=a,o.dataKey=o.dataKey.replace(R,"").trim()),o[j]=n[i],n[i].push(o)}return n},pe=({rootNode:e=null,bindingAttrs:t={},skipCheck:n,isRenderedTemplate:i=!1})=>{let r={};if(!e instanceof window.Node)throw new TypeError("walkDOM: Expected a DOM node");var o;ce=ce||(o=t,Object.keys(o).reduce((function(e,t){return e[o[t]]=t,e}),{}));const a=(e,o=ue)=>{let a=!1;if(1!==e.nodeType||!e.hasAttributes())return!0;if(o(e,t)||"function"==typeof n&&n(e))return!1;const l=(e=>{const t={};return Array.prototype.slice.call(e.attributes).forEach((e=>{t[e.name]=e.value})),t})(e),c=((e={},t)=>[t.forOf,t.if,t.case,t.default].filter((t=>void 0!==e[t])))(l,t);let s=[];if(c.length)a=!0,s=c;else{if(i&&l[t.tmp])return!0;s=Object.keys(l)}return s.forEach((n=>{n!==t.case&&n!==t.default&&(r=fe({node:e,attrObj:l,bindingCache:r,type:n}))})),!a};return a(e,de)&&se(e,a),r},he=e=>{const t=e.el.cloneNode(!0);return e.fragment=document.createDocumentFragment(),e.fragment.appendChild(t),e},me=e=>{if(!e||!e.type)return e;let t="";const n=e.dataKey?e.dataKey.replace(S,"_"):"";switch(e.type){case p.forOf:t=m;break;case p.if:t=g;break;case p.case:t=y;break;case p.default:t=b}return e.commentPrefix=t+n,e},ge=(e,t)=>{t.commentPrefix||me(t);const n=t.commentPrefix+v;if(e=e.nextSibling){if(8===e.nodeType&&e.textContent===n)return t.docRange.setEndBefore(e);ge(e,t)}},ye=(e,t)=>{let n="";e.commentPrefix||me(e),n=e.commentPrefix;const i=document.createComment(n),r=document.createComment(n+v);return 11===t.nodeType?(t.insertBefore(i,t.firstChild),t.appendChild(r)):t.parentNode&&(t.parentNode.insertBefore(i,t),Z(t.parentNode,r,t),e.previousNonTemplateElement=t.previousSibling,e.nextNonTemplateElement=t.nextSibling,e.parentElement=t.previousSibling.parentElement),t},be=e=>{e.docRange||(e.docRange=document.createRange());try{e.previousNonTemplateElement?(e.docRange.setStartBefore(e.previousNonTemplateElement.nextSibling),ge(e.previousNonTemplateElement.nextSibling,e)):(e.docRange.setStartBefore(e.parentElement.firstChild),ge(e.parentElement.firstChild,e))}catch(e){console.log("error removeElemnetsByCommentWrap: ",e.message)}return e.docRange.deleteContents()},ve=(e,t)=>{e.previousNonTemplateElement?Z(e.parentElement,t,e.previousNonTemplateElement):e.nextNonTemplateElement?e.parentElement.insertBefore(t,e.nextNonTemplateElement):e.parentElement&&e.parentElement.appendChild(t)},we=({bindingData:e,viewModel:t,iterationData:n,keys:i,index:r})=>{const o={};return o[e.iterator.alias]=i?n[i[r]]:n[r],o[w]=t.$root||t,o[E]=o[e.iterator.alias],o[A]=r,o},Ee=(e,t,n,i,r)=>{const o=document.createDocumentFragment(),a=e.iterationSize;let l,c,s,d=0;for(V(e.iterationBindingCache)?e.iterationBindingCache.length=0:e.iterationBindingCache=[],d=0;d<a;d+=1)l=e.el.cloneNode(!0),s=pe({rootNode:l,bindingAttrs:n}),e.iterationBindingCache.push(s),F(s)||(c=we({bindingData:e,viewModel:t,iterationData:i,keys:r,index:d}),Te({elementCache:e.iterationBindingCache[d],iterationVm:c,bindingAttrs:n,isRegenerate:!0})),o.appendChild(l);return o},Ae=(e,t,n)=>{const i=e.dataKey;if(i&&!(i.length>50)){if(!e.iterator){if(i.length>50)return;e.dataKey=e.dataKey.replace(S," ");const t=i.match(x);if(!t)return;e.iterator={},e.iterator.alias=t[1].trim(),t[2]&&(e.iterator.dataKey=t[2].trim(),e.parentElement=e.el.parentElement,e.previousNonTemplateElement=e.el.previousSibling,e.nextNonTemplateElement=e.el.nextSibling)}(({bindingData:e,viewModel:t,bindingAttrs:n})=>{if(!e||!t||!n)return;let i,r;const o=Q(t,e.iterator);let a=!1;if(V(o))r=o.length;else{if(!I(o))return te(null,"iterationData is not an plain object or array");i=Object.keys(o),r=i.length}if(e.type||(e.type=p.forOf,ye(e,e.el)),void 0===e.iterationSize?(e.iterationSize=r,e.el.removeAttribute(n.forOf),a=!0):(a=e.iterationSize!==r,e.iterationSize=r),!a)return void e.iterationBindingCache.forEach((function(r,a){if(!F(r)){const l=we({bindingData:e,viewModel:t,iterationData:o,keys:i,index:a});Te({elementCache:r,iterationVm:l,bindingAttrs:n,isRegenerate:!1})}}));const l=Ee(e,t,n,o,i);be(e),ve(e,l)})({bindingData:e,viewModel:t,bindingAttrs:n})}},Ce=({bindingData:e,viewModel:t,bindingAttrs:n})=>{if(!e.fragment)return;const i=(e=>{let t=!1;if(e&&e.previousNonTemplateElement){const n=e.previousNonTemplateElement.textContent,i=e.previousNonTemplateElement.nextSibling;8===i.nodeType&&i.textContent===n+v&&(t=!0)}return t})(e);let r=e.el;i||e.isOnce||(Pe(e),r=e.fragment.firstChild.cloneNode(!0)),e.iterationBindingCache&&e.hasIterationBindingCache||(e.iterationBindingCache=pe({rootNode:r,bindingAttrs:n})),F(e.iterationBindingCache)||(e.hasIterationBindingCache=!0,Te({elementCache:e.iterationBindingCache,iterationVm:t,bindingAttrs:n,isRegenerate:!0})),ve(e,r)},Pe=e=>{be(e),e.hasIterationBindingCache&&(delete e.iterationBindingCache,delete e.hasIterationBindingCache)},Be=({viewModel:e,cache:t})=>{let n=!1;return e.APP.postProcessQueue&&(e.APP.postProcessQueue.push(((e,t)=>()=>{e[j].splice(t,1)})(t,t[j].indexOf(t))),n=!0),n};function De(e,t){e.forEach(((e,n)=>{n===t&&void 0!==t||(Pe(e),e.hasIterationBindingCache&&(e.iterationBindingCache=null,e.hasIterationBindingCache=!1))}))}function Oe(e,t){return{el:e,dataKey:e.getAttribute(t),type:t}}const je={},Me=(e=null,t="",n,i=!1)=>{if(!e||!e.compId||!t||"function"!=typeof n)return;let r,o=!1;t=t.replace(S,""),je[t]=je[t]||[],o=je[t].some((t=>{if(t[e.compId])return t[e.compId]=n.bind(e.viewModel),t.isOnce=i,!0})),o||(r={},r[e.compId]=n.bind(e.viewModel),r.isOnce=i,je[t].push(r))},Re=(e="",t="")=>{if(!e||!t)return;let n,i=0,r=0;if(t=t.replace(S,""),je[t])for(r=je[t].length,i=0;i<r;i+=1)if(n=je[t][i],n[e]){je[t].splice(i,1);break}je[t].length||delete je[t]};let Se=0;class xe{constructor(e,t,n){if(!e||1!==e.nodeType||null===t||"object"!=typeof t)throw new TypeError("$rootElement or viewModel is invalid");return this.initRendered=!1,this.compId=Se+=1,this.$rootElement=e,this.viewModel=t,this.bindingAttrs=n,this.render=((e,t=null)=>function(e,t){let n=J(),i=0;return function(){const r=Array.from?Array.from(arguments):Array.prototype.slice.call(arguments);return window.cancelAnimationFrame(i),i=window.requestAnimationFrame((()=>{try{e.apply(t,r),n.resolve(t)}catch(e){console.error("error in rendering: ",e),n.reject(e)}n=J(),window.cancelAnimationFrame(i)})),n.promise}}(e,t))(this.render,this),this.isServerRendered=null!==this.$rootElement.getAttribute(h),this.viewModel.APP=this,this.viewModel.$root=this.viewModel,this.parseView(),this.$rootElement[w]=this.viewModel,this}parseView(){return this.elementCache=pe({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs}),this.isServerRendered&&!this.initRendered&&this.updateElementCache({templateCache:!0}),this}updateElementCache(e={}){const t=e.elementCache||this.elementCache;e.allCache&&(this.elementCache=pe({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs})),(e.allCache||e.templateCache)&&t[this.bindingAttrs.tmp]&&t[this.bindingAttrs.tmp].length&&t[this.bindingAttrs.tmp].forEach((t=>{let n=null;t.el.hasAttribute(this.bindingAttrs.forOf)&&(n=()=>!0),t.bindingCache=pe({rootNode:t.el,bindingAttrs:this.bindingAttrs,skipCheck:n,isRenderedTemplate:e.isRenderedTemplates})}))}render(e={}){let t={};this.initRendered?t=_e("",e):this.isServerRendered?(this.$rootElement.removeAttribute(h),t=_e(B,e)):t=_e(D,e),this.postProcessQueue=[],ke({ctx:this,elementCache:this.elementCache,updateOption:t,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),xe.applyBinding({ctx:this,elementCache:this.elementCache,updateOption:t,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),xe.postProcess(this.postProcessQueue),this.postProcessQueue.length=0,delete this.postProcessQueue,this.initRendered=!0}static applyBinding({ctx:e,elementCache:t,updateOption:n,bindingAttrs:i,viewModel:r}){t&&n&&(n.forOfBinding&&t[i.forOf]&&t[i.forOf].length&&t[i.forOf].forEach((e=>{Ae(e,r,i,n.forceRender)})),n.attrBinding&&t[i.attr]&&t[i.attr].length&&t[i.attr].forEach((e=>{((e,t,n)=>{if(!e.dataKey)return;e.elementData=e.elementData||{},e.elementData.viewModelProValue=e.elementData.viewModelProValue||{};const i=e.elementData.viewModelProValue,r=Q(t,e);I(r)&&JSON.stringify(i)!==JSON.stringify(r)&&(e.elementData.viewModelProValue={},F(i)?W(r,((t,n)=>{e.el.setAttribute(t,n),e.elementData.viewModelProValue[t]=n})):(W(i,((t,n)=>{void 0===r[t]&&e.el.removeAttribute(t)})),W(r,((t,n)=>{i[t]!==r[t]&&e.el.setAttribute(t,r[t]),e.elementData.viewModelProValue[t]=n}))))})(e,r,0,n.forceRender)})),n.ifBinding&&t[i.if]&&t[i.if].length&&t[i.if].forEach((e=>{((e,t,n)=>{if(!e.dataKey||e.isOnce&&!1===e.hasIterationBindingCache)return;e.elementData=e.elementData||{},e.type=e.type||p.if;const i=e.elementData.viewModelPropValue,r=Q(t,e)||!1;if(i===r&&!e.hasIterationBindingCache)return;const o=Boolean(r);if(!o&&e.isOnce&&e.el.parentNode)return(a=e.el)&&a.parentNode&&a.parentNode.removeChild(a),void Be({viewModel:t,cache:e});var a;e.elementData.viewModelPropValue=r,e.fragment||(ye(e,e.el),e.el.removeAttribute(n.if),he(e)),o?(Ce({bindingData:e,viewModel:t,bindingAttrs:n}),e.isOnce&&!e.hasIterationBindingCache&&Be({viewModel:t,cache:e})):Pe(e)})(e,r,i,n.forceRender)})),n.showBinding&&t[i.show]&&t[i.show].length&&t[i.show].forEach((e=>{((e,t,n)=>{let i={},r="",o=!0;if(!e.dataKey)return;e.elementData=e.elementData||{};const a=e.elementData.viewModelPropValue;if(void 0===e.elementData.displayStyle||void 0===e.elementData.computedStyle)if(i=e.el.style,r=i.display,r)e.elementData.displayStyle="none"===r?"block":r,e.elementData.computedStyle=null;else{const t=window.getComputedStyle(e.el,null).getPropertyValue("display");e.elementData.displayStyle=null,e.elementData.computedStyle=t}o=Q(t,e),o=Boolean(o),a!==o&&(o?e.elementData.computedStyle||"none"===e.el.style.display?"none"===e.elementData.computedStyle?e.el.style.setProperty("display","block"):i.length>1?e.el.style.removeProperty("display"):e.el.removeAttribute("style"):e.el.style.setProperty("display",e.elementData.displayStyle):"none"!==e.el.style.display&&e.el.style.setProperty("display","none"),e.elementData.viewModelPropValue=o)})(e,r,0,n.forceRender)})),n.switchBinding&&t[i.switch]&&t[i.switch].length&&t[i.switch].forEach((e=>{((e,t,n)=>{if(!e.dataKey)return;e.elementData=e.elementData||{};const i=Q(t,e);if(i!==e.elementData.viewModelPropValue){if(e.elementData.viewModelPropValue=i,!e.cases){const t=e.el.children;if(!t.length)return;e.cases=[];for(let i=0,r=t.length;i<r;i+=1){let r=null;t[i].hasAttribute(n.case)?r=Oe(t[i],n.case):t[i].hasAttribute(n.default)&&(r=Oe(t[i],n.default),r.isDefault=!0),r&&(ye(r,r.el),r.isDefault?r.el.removeAttribute(n.default):r.el.removeAttribute(n.case),he(r),e.cases.push(r))}}if(e.cases.length){let i=!1;for(let r=0,o=e.cases.length;r<o;r+=1){let o;if(e.cases[r].dataKey&&(o=Q(t,e.cases[r])||e.cases[r].dataKey),o===e.elementData.viewModelPropValue||e.cases[r].isDefault){i=!0,Ce({bindingData:e.cases[r],viewModel:t,bindingAttrs:n}),De(e.cases,r);break}}i||De(e.cases)}}})(e,r,i,n.forceRender)})),n.textBinding&&t[i.text]&&t[i.text].length&&t[i.text].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey,o=t.APP||t.$root.APP;if(!r||!i&&!o.$rootElement.contains(e.el))return;const a=Q(t,e),l=e.el.textContent;void 0!==a&&"object"!=typeof a&&null!==a&&a!==l&&(e.el.textContent=a)})(e,r,0,n.forceRender)})),n.cssBinding&&t[i.css]&&t[i.css].length&&t[i.css].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey,o=t.APP||t.$root.APP;if(!r||!i&&!o.$rootElement.contains(e.el))return;e.elementData=e.elementData||{},e.elementData.viewModelPropValue=e.elementData.viewModelPropValue||"";const a=e.elementData.viewModelPropValue;let l="";const c=Q(t,e);let s=[],d=!1,u=!1,f=[];if("string"==typeof c)u=!0;else{if(!I(c))return;d=!0}if(d?l=JSON.stringify(c):(l=c.replace(/\s\s+/g," ").trim(),s=l.split(" ")),a===l)return;const p=e.el.classList,h=p.length;for(let e=0;e<h;e+=1)f.push(p[e]);var m;d?W(c,(function(e,t){const n=f.indexOf(e);!0===t?f.push(e):-1!==n&&f.splice(n,1)})):u&&(m=a,f=f.filter(((e,t)=>m.indexOf(e)<0)),f=f.concat(s)),f=f.filter(((e,t,n)=>n.indexOf(e)===t)),f=f.join(" "),e.elementData.viewModelPropValue=l,e.el.setAttribute("class",f)})(e,r,0,n.forceRender)})),n.modelBinding&&t[i.model]&&t[i.model].length&&t[i.model].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey;let o="";const a=t.APP||t.$root.APP;if(r&&(i||a.$rootElement.contains(e.el))&&(o=z(t,r),null!=o)){const t=e.el,n="checkbox"===t.type,i="radio"===t.type,r=t.name,l=i?a.$rootElement.querySelectorAll(`input[name="${r}"]`):[];if(o!==(n?t.checked:t.value))if(n)t.checked=Boolean(o);else if(i){let e=0;const t=l.length;for(e=0;e<t;e+=1)if(l[e].value===o){l[e].checked=!0;break}}else t.value=o}})(e,r,0,n.forceRender)})),n.changeBinding&&t[i.change]&&t[i.change].length&&t[i.change].forEach((e=>{le(e,r,i,n.forceRender)})),n.submitBinding&&t[i.submit]&&t[i.submit].length&&t[i.submit].forEach((e=>{Ne({cache:e,forceRender:n.forceRender,type:"submit",viewModel:r})})),n.clickBinding&&t[i.click]&&t[i.click].length&&t[i.click].forEach((e=>{Ne({cache:e,forceRender:n.forceRender,type:"click",viewModel:r})})),n.dblclickBinding&&t[i.dblclick]&&t[i.dblclick].length&&t[i.dblclick].forEach((e=>{Ne({cache:e,forceRender:n.forceRender,type:"dblclick",viewModel:r})})),n.blurBinding&&t[i.blur]&&t[i.blur].length&&t[i.blur].forEach((e=>{Ne({cache:e,forceRender:n.forceRender,type:"blur",viewModel:r})})),n.focusBinding&&t[i.focus]&&t[i.focus].length&&t[i.focus].forEach((e=>{Ne({cache:e,forceRender:n.forceRender,type:"focus",viewModel:r})})),n.hoverBinding&&t[i.hover]&&t[i.hover].length&&t[i.hover].forEach((e=>{((e,t,n,i)=>{const r=e.dataKey;let o=e.parameters;const a=C,l=P;let c;const s=t.APP||t.$root.APP;if(e.elementData=e.elementData||{},!r||!i&&!s.$rootElement.contains(e.el))return;const d=z(t,r);if(d&&"function"==typeof d[a]&&"function"==typeof d[l]){function n(t){const n=[t,e.el].concat(o);d[a].apply(c,n)}function i(t){const n=[t,e.el].concat(o);d[l].apply(c,n)}c=X(t,r),o=o?Y(t,o):[],e.el.removeEventListener("mouseenter",n,!1),e.el.removeEventListener("mouseleave",i,!1),e.el.addEventListener("mouseenter",n,!1),e.el.addEventListener("mouseleave",i,!1)}})(e,r,0,n.forceRender)})))}static postProcess(e){e&&e.length&&W(e,((e,t)=>{if("function"==typeof t)try{t()}catch(e){te(e,"Error postProcess: "+String(t))}}))}subscribe(e="",t){return Me(this,e,t),this}subscribeOnce(e="",t){return((e=null,t="",n)=>{Me(e,t,n,!0)})(this,e,t),this}unsubscribe(e=""){return Re(this.compId,e),this}unsubscribeAll(){return((e="")=>{e&&Object.keys(je).forEach((t=>{Re(e,t)}))})(this.compId),this}publish(e="",...t){return((e="",...t)=>{e&&je[e]&&(e=e.replace(S,""),je[e].forEach((n=>{Object.keys(n).forEach((i=>{if("function"==typeof n[i]){const r=n[i](...t);return n.isOnce&&Re(i,e),r}}))})))})(e,...t),this}}const ke=({ctx:e,elementCache:t,updateOption:n,bindingAttrs:i,viewModel:r})=>!(!t||!i)&&(t[i.tmp]&&t[i.tmp].length&&(n.templateBinding&&(n=_e(D),t[i.tmp].forEach((e=>{ae(e,r,i,t)})),e.updateElementCache({templateCache:!0,elementCache:t,isRenderedTemplates:!0})),n.forceRender=!0,t[i.tmp].forEach((e=>{xe.applyBinding({elementCache:e.bindingCache,updateOption:n,bindingAttrs:i,viewModel:r})}))),!0),_e=(e="",t={})=>{const n={templateBinding:!1,textBinding:!0,cssBinding:!0,ifBinding:!0,showBinding:!0,modelBinding:!0,attrBinding:!0,forOfBinding:!0,switchBinding:!0},i={changeBinding:!0,clickBinding:!0,dblclickBinding:!0,blurBinding:!0,focusBinding:!0,hoverBinding:!0,submitBinding:!0},r={templateBinding:!1,textBinding:!1,cssBinding:!1,ifBinding:!1,showBinding:!1,modelBinding:!1,attrBinding:!1,forOfBinding:!1,switchBinding:!1};let o={};switch(e){case B:o=G({},i,r,t);break;case D:t.templateBinding=!0,o=G({},n,i,t);break;default:o=G({},n,t)}return o},Te=({elementCache:e,iterationVm:t,bindingAttrs:n,isRegenerate:i})=>{const r=i?_e(D):_e();r.forceRender=!0,ke({ctx:t.$root?t.$root.APP:t.APP,elementCache:e,updateOption:r,bindingAttrs:n,viewModel:t}),xe.applyBinding({elementCache:e,updateOption:r,bindingAttrs:n,viewModel:t})},Ne=({cache:e={},forceRender:t=!1,type:n="",viewModel:i={}})=>{const r=e.dataKey;let o,a=e.parameters;const l=i.APP||i.$root.APP;if(!n||!r||!t&&!l.$rootElement.contains(e.el))return;const c=z(i,r);if("function"==typeof c){o=X(i,r),a=a?Y(i,a):[];const t=e=>{let t,i=[];"submit"===n?(t=(e=>{const t={};return!e instanceof HTMLFormElement||new FormData(e).forEach(((e,n)=>{Object.prototype.hasOwnProperty.call(Object,n)?(Array.isArray(t[n])||(t[n]=[t[n]]),t[n].push(e)):t[n]=e})),t})(e.currentTarget),i=[e,e.currentTarget,t].concat(a)):i=[e,e.currentTarget].concat(a),c.apply(o,i)};e.el.removeEventListener(n,t,!1),e.el.addEventListener(n,t,!1)}};let $e=p,Ke={evaluate:/<%([\s\S]+?)%>/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{(.+?)\}\}/g};window.dataBind={use:(e={})=>{e.bindingAttrs&&($e=G({},e.bindingAttrs)),e.templateSettings&&(Ke=G({},e.templateSettings))},init:(e,t=null)=>(_.templateSettings=Ke,new xe(e,t,$e)),version:"@version@"}}();
//# sourceMappingURL=dataBind.min.js.map
