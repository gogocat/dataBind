!function(){"use strict";var e={comp:"data-jq-comp",tmp:"data-jq-tmp",text:"data-jq-text",click:"data-jq-click",dblclick:"data-jq-dblclick",blur:"data-jq-blur",focus:"data-jq-focus",hover:"data-jq-hover",change:"data-jq-change",submit:"data-jq-submit",model:"data-jq-model",show:"data-jq-show",css:"data-jq-css",attr:"data-jq-attr",forOf:"data-jq-for",if:"data-jq-if",switch:"data-jq-switch",case:"data-jq-case",default:"data-jq-default"},t="data-server-rendered",n="data-forOf_",i="data-if_",a="data-case_",r="data-default_",o={rootDataKey:"$root",currentData:"$data",currentIndex:"$index",mouseEnterHandlerName:"in",mouseLeaveHandlerName:"out"},l="SERVER-RENDERED",c="INIT",d={ONCE:"once"},s="_parent";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}_=window._||{};var p,h=Array.isArray,m="function"==typeof window.Promise,v=/\((.*?)\)/,g=/\s+/g,y=/(.*?)\s+(?:in|of)\s+(.*)/,b=/\|/,w=function(e){return h?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},A=function(e){return null!==e&&"object"===u(e)&&"[object Object]"===Object.prototype.toString.call(e)},E=function(e){if(!A(e))return!1;var t=e.constructor;if("function"!=typeof t)return!1;var n=t.prototype;return!1!==A(n)&&!1!==n.hasOwnProperty("isPrototypeOf")},P=function(e){return!!A(e)&&0===Object.getOwnPropertyNames(e).length},B=function(e,t){return _.get(e,t)},C=function(e,t){var n=t.dataKey,i=t.parameters,a="!"===n.charAt(0);a&&(n=a?n.substring(1):n);var r=B(e,n);if("function"==typeof r){var o=K(e,n),l=t.elementData?t.elementData.viewModelProValue:null,c=(i=i?N(e,i):[]).concat([l,t.el]);r=r.apply(o,c)}return r=a?!Boolean(r):r,r=D({value:r,viewModel:e,bindingCache:t})},D=function(e){var t=e.value,n=e.viewModel,i=e.bindingCache,a=t;return i.filters&&M(i.filters,function(e,t){var i=K(n,t),r=B.call(i,i,t);try{a=r.call(i,a)}catch(e){R(e,"Invalid filter: ".concat(t))}}),a},O=function(){var e={};return m?e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}):e=$.Deferred(),e},k=function(e){return function(e,t){var n=O(),i=0;return function(){var a=Array.from?Array.from(arguments):Array.prototype.slice.call(arguments);return window.cancelAnimationFrame(i),i=window.requestAnimationFrame(function(){try{e.apply(t,a),n.resolve(t)}catch(e){n.reject(t,e)}n=O(),window.cancelAnimationFrame(i)}),m?n.promise:n.promise()}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},x=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,i=arguments.length,a=new Array(i>2?i-2:0),r=2;r<i;r++)a[r-2]=arguments[r];if(!a.length)return n;var o=a.shift();return void 0===o?n:t?(j(n)&&j(o)&&Object.keys(o).forEach(function(t){j(o[t])?(n[t]||(n[t]={}),e(n[t],o[t])):n[t]=o[t]}),e.apply(void 0,[!0,n].concat(a))):Object.assign.apply(Object,[n].concat(a))},M=function(e,t){if("object"===u(e)&&"function"==typeof t){var n,i,a=[],r=0,o=w(e),l=0;if(o)r=e.length;else{if(!A(e))throw new TypeError("Object is not an array or object");r=(a=Object.keys(e)).length}for(l=0;l<r;l+=1)o?(n=l,i=e[l]):i=e[n=a[l]],t(n,i)}},j=function(e){return A(e)&&!w(e)},S=function(e,t,n){var i=n&&n.nextSibling?n.nextSibling:null;return e.insertBefore(t,i)},K=function(e,t){var n=e;if("string"!=typeof t)return n;var i=t.split(".");return i.length>1&&(i[0]===o.rootDataKey?n=e[o.rootDataKey]||e:i[0]===o.currentData&&(n=e[o.currentData]||e)),n},N=function(e,t){if(e&&w(t))return t.map(function(t){return(t=t.trim())===o.currentIndex?t=e[o.currentIndex]:t===o.currentData?t=e[o.currentData]||e:t===o.rootDataKey&&(t=e[o.rootDataKey]||e),t})},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.message?e.message:t;return"function"==typeof console.error?console.error(n):console.log(n)},T=null,V=null,I=0,q={},Q=function e(t,n,i,a){var r,o,l,c="string"==typeof t.dataKey?(r=t.dataKey,o=r.replace(/(\s*?{\s*?|\s*?,\s*?)(['"])?([a-zA-Z0-9]+)(['"])?:/g,'$1"$3":').replace(/'/g,'"'),JSON.parse(o)):t.dataKey,d=c.data,s=c.append,u=c.prepend;if(t.dataKey=c,d=void 0===d||"$root"===d?n:C(n,{dataKey:c.data,parameters:t.parameters})){var f=$(t.el),p=void 0!==n.$index?n.$index:f.attr("data-index");void 0!==p&&(d.$index=p),T=T||$("<div/>"),V=V||f;var h=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return q[e]||(t=(n=document.getElementById(e))?n.innerHTML:"",q[e]=_.template(t,{variable:"data"})),q[e](i)}(c.id,d);T.children().length?(l=f,s||u||l.empty(),u?l.prepend(h):l.append(h)):(l=T,T.append(h));var m=l.find("["+i.tmp+"]");m.length&&(I+=m.length,m.each(function(t,r){var o={el:r,dataKey:r.getAttribute(i.tmp)};a[i.tmp].push(o),e(o,n,i,a),I-=1})),0===I&&(s||u||V.empty(),u?V.prepend(T.html()):V.append(T.html()),T=V=null,"function"==typeof n.afterTemplateRender&&n.afterTemplateRender(d))}},z=function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=e.el.getAttribute(n.model),c="",d="",s=t.APP||t.$root.APP;if(r&&(i||s.$rootElement.contains(e.el))){var u=B(t,r);"function"==typeof u&&(a=K(t,r),o=o?N(t,o):[],$(e.el).off("change.databind").on("change.databind",function(e){var n,i,r,s=$(this),f=s.is(":checkbox");c=f?s.prop("checked"):_.escape(s.val()),l&&(d=B(t,l),n=t,i=l,r=c,_.set(n,i,r));var p=[e,s,c,d].concat(o);u.apply(a,p),d=c}))}},F=function(e){return"SVG"===e.tagName},H=function(e,t){return"SVG"===e.tagName||e.hasAttribute(t.comp)},J=function(e){var t,n=e.node,i=e.attrObj,a=e.bindingCache,r=e.type;if(p&&p[r]&&void 0!==i[r]){a[r]=a[r]||[];var o=function(e){if(e&&!(e.length>50)){var t=e.match(v);return t&&t[1]&&(t=t[1].split(",")).forEach(function(e,n){t[n]=e.trim()}),t}}((t=function(e){if(!e||!e.dataKey||e.dataKey.length>50)return e;var t,n=e.dataKey.split(b);return e.dataKey=n[0].trim(),n.length>1&&(n.shift(0),n.forEach(function(i,a){n[a]=i.trim(),n[a]===d.ONCE&&(e.isOnce=!0,t=a)}),t>=0&&n.splice(t,1),e.filters=n),e}(t={el:n,dataKey:i[r].trim()})).dataKey);o&&(t.parameters=o,t.dataKey=t.dataKey.replace(v,"").trim()),t[s]=a[r],a[r].push(t)}return a},L=function(e){var t,n=e.rootNode,i=void 0===n?null:n,a=e.bindingAttrs,r=void 0===a?{}:a,o=e.skipCheck,l=e.isRenderedTemplate,c=void 0!==l&&l,d={};if(!i instanceof window.Node)throw new TypeError("walkDOM: Expected a DOM node");p=p||(t=r,Object.keys(t).reduce(function(e,n){return e[t[n]]=n,e},{}));var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=!1;if(1!==e.nodeType||!e.hasAttributes())return!0;if(t(e,r)||"function"==typeof o&&o(e))return!1;var i=function(e){var t={};return Array.prototype.slice.call(e.attributes).forEach(function(e){t[e.name]=e.value}),t}(e),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return[t.forOf,t.if,t.case,t.default].filter(function(t){return void 0!==e[t]})}(i,r),l=[];if(a.length)n=!0,l=a;else{if(c&&i[r.tmp])return!0;l=Object.keys(i)}return l.forEach(function(t){t!==r.case&&t!==r.default&&(d=J({node:e,attrObj:i,bindingCache:d,type:t}))}),!n};return s(i,F)&&function e(t,n){for(t=t.firstElementChild;t;)n(t)&&e(t,n),t=t.nextElementSibling}(i,s),d},G=function(e){var t=e.el.cloneNode(!0);return e.fragment=document.createDocumentFragment(),e.fragment.appendChild(t),e},W=function(t){if(t&&t.type){var o="",l=t.dataKey?t.dataKey.replace(g,"_"):"";switch(t.type){case e.forOf:o=n;break;case e.if:o=i;break;case e.case:o=a;break;case e.default:o=r}return t.commentPrefix=o+l,t}},Z=function e(t,n){n.commentPrefix||W(n);var i=n.commentPrefix+"_end";if(t=t.nextSibling){if(8===t.nodeType&&t.textContent===i)return n.docRange.setEndBefore(t);e(t,n)}},U=function(e,t){var n;e.commentPrefix||W(e),n=e.commentPrefix;var i=document.createComment(n),a=document.createComment(n+"_end");return 11===t.nodeType?(t.insertBefore(i,t.firstChild),t.appendChild(a)):t.parentNode&&(t.parentNode.insertBefore(i,t),S(t.parentNode,a,t),e.previousNonTemplateElement=t.previousSibling,e.nextNonTemplateElement=t.nextSibling,e.parentElement=t.previousSibling.parentElement),t},X=function(e){e.docRange||(e.docRange=document.createRange());try{e.previousNonTemplateElement?(e.docRange.setStartBefore(e.previousNonTemplateElement.nextSibling),Z(e.previousNonTemplateElement.nextSibling,e)):(e.docRange.setStartBefore(e.parentElement.firstChild),Z(e.parentElement.firstChild,e))}catch(e){console.log("error removeElemnetsByCommentWrap: ",e.message)}return e.docRange.deleteContents()},Y=function(e,t){e.previousNonTemplateElement?S(e.parentElement,t,e.previousNonTemplateElement):e.nextNonTemplateElement?e.parentElement.insertBefore(t,e.nextNonTemplateElement):e.parentElement&&e.parentElement.appendChild(t)},ee=function(e){var t=e.bindingData,n=e.viewModel,i=e.iterationData,a=e.keys,r=e.index,l={};return l[t.iterator.alias]=a?i[a[r]]:i[r],l[o.rootDataKey]=n.$root||n,l[o.currentData]=l[t.iterator.alias],l[o.currentIndex]=r,l},te=function(e,t,n,i,a){var r,o,l,c=document.createDocumentFragment(),d=e.iterationSize,s=0;for(w(e.iterationBindingCache)?e.iterationBindingCache.length=0:e.iterationBindingCache=[],s=0;s<d;s+=1)r=e.el.cloneNode(!0),l=L({rootNode:r,bindingAttrs:n}),e.iterationBindingCache.push(l),P(l)||(o=ee({bindingData:e,viewModel:t,iterationData:i,keys:a,index:s}),be({elementCache:e.iterationBindingCache[s],iterationVm:o,bindingAttrs:n,isRegenerate:!0})),c.appendChild(r);return c},ne=function(t,n,i){var a=t.dataKey;if(a&&!(a.length>50)){if(!t.iterator){if(a.length>50)return;t.dataKey=t.dataKey.replace(g," ");var r=a.match(y);if(!r)return;t.iterator={},t.iterator.alias=r[1].trim(),r[2]&&(t.iterator.dataKey=r[2].trim(),t.parentElement=t.el.parentElement,t.previousNonTemplateElement=t.el.previousSibling,t.nextNonTemplateElement=t.el.nextSibling)}!function(t){var n=t.bindingData,i=t.viewModel,a=t.bindingAttrs;if(n&&i&&a){var r,o,l=C(i,n.iterator),c=!1;if(w(l))o=l.length;else{if(!E(l))return R(null,"iterationData is not an plain object or array");o=(r=Object.keys(l)).length}if(n.type||(n.type=e.forOf,U(n,n.el)),void 0===n.iterationSize?(n.iterationSize=o,n.el.removeAttribute(a.forOf),c=!0):(c=n.iterationSize!==o,n.iterationSize=o),c){var d=te(n,i,a,l,r);return X(n),Y(n,d)}n.iterationBindingCache.forEach(function(e,t){if(!P(e)){var o=ee({bindingData:n,viewModel:i,iterationData:l,keys:r,index:t});be({elementCache:e,iterationVm:o,bindingAttrs:a,isRegenerate:!1})}})}}({bindingData:t,viewModel:n,bindingAttrs:i})}},ie=function(e){var t=e.bindingData,n=e.viewModel,i=e.bindingAttrs;if(t.fragment){var a=function(e){var t=!1;if(e&&e.previousNonTemplateElement){var n=e.previousNonTemplateElement.textContent,i=e.previousNonTemplateElement.nextSibling;8===i.nodeType&&i.textContent===n+"_end"&&(t=!0)}return t}(t),r=t.el;a||t.isOnce||(ae(t),r=t.fragment.firstChild.cloneNode(!0)),t.iterationBindingCache&&t.hasIterationBindingCache||(t.iterationBindingCache=L({rootNode:r,bindingAttrs:i})),P(t.iterationBindingCache)||(t.hasIterationBindingCache=!0,be({elementCache:t.iterationBindingCache,iterationVm:n,bindingAttrs:i,isRegenerate:!0})),Y(t,r)}},ae=function(e){X(e),e.hasIterationBindingCache&&(delete e.iterationBindingCache,delete e.hasIterationBindingCache)},re=function(e){var t=e.viewModel,n=e.cache,i=!1;return t.APP.postProcessQueue&&(t.APP.postProcessQueue.push(function(e,t){return function(){e[s].splice(t,1)}}(n,n[s].indexOf(n))),i=!0),i};function oe(e,t){e.forEach(function(e,n){n===t&&void 0!==t||(ae(e),e.hasIterationBindingCache&&(e.iterationBindingCache=null,e.hasIterationBindingCache=!1))})}function le(e,t){return{el:e,dataKey:e.getAttribute(t),type:t}}var ce={},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&e.compId&&t&&"function"==typeof n){var a;t=t.replace(g,""),ce[t]=ce[t]||[],ce[t].some(function(t){if(t[e.compId])return t[e.compId]=n.bind(e.viewModel),t.isOnce=i,!0})||((a={})[e.compId]=n.bind(e.viewModel),a.isOnce=i,ce[t].push(a))}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;de(e,t,n,!0)},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&t){var n=0,i=0;if(t=t.replace(g,""),ce[t])for(i=ce[t].length,n=0;n<i;n+=1)if(ce[t][n][e]){ce[t].splice(n,1);break}ce[t].length||delete ce[t]}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&Object.keys(ce).forEach(function(t){ue(e,t)})},pe=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e&&ce[e]&&(e=e.replace(g,""),ce[e].forEach(function(t){Object.keys(t).forEach(function(i){if("function"==typeof t[i]){var a=t[i].apply(t,n);return t.isOnce&&ue(i,e),a}})}))},he=Object.freeze({subscribeEvent:de,subscribeEventOnce:se,unsubscribeEvent:ue,unsubscribeAllEvent:fe,publishEvent:pe}),me=0,ve=function(){function n(e,i,a){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e instanceof window.jQuery&&e.length&&(e=e.eq(0)[0]),!e||1!==e.nodeType||null===i||"object"!==u(i))throw new TypeError("$rootElement or viewModel is invalid");return this.initRendered=!1,this.compId=me+=1,this.$rootElement=e,this.viewModel=i,this.bindingAttrs=a,this.render=k(this.render,this),this.isServerRendered=null!==this.$rootElement.getAttribute(t),this.viewModel.APP=this,this.viewModel.$root=this.viewModel,this.parseView(),window.jQuery?window.jQuery(this.$rootElement).data(o.rootDataKey,this.viewModel):this.$rootElement[o.rootDataKey]=this.viewModel,this}var i,a,r;return i=n,r=[{key:"applyBinding",value:function(t){t.ctx;var n=t.elementCache,i=t.updateOption,a=t.bindingAttrs,r=t.viewModel;n&&i&&(i.forOfBinding&&n[a.forOf]&&n[a.forOf].length&&n[a.forOf].forEach(function(e){ne(e,r,a,i.forceRender)}),i.attrBinding&&n[a.attr]&&n[a.attr].length&&n[a.attr].forEach(function(e){!function(e,t,n){if(e.dataKey){e.elementData=e.elementData||{},e.elementData.viewModelProValue=e.elementData.viewModelProValue||{};var i=e.elementData.viewModelProValue,a=C(t,e);E(a)&&JSON.stringify(i)!==JSON.stringify(a)&&(e.elementData.viewModelProValue={},P(i)?M(a,function(t,n){e.el.setAttribute(t,n),e.elementData.viewModelProValue[t]=n}):(M(i,function(t,n){void 0===a[t]&&e.el.removeAttribute(t)}),M(a,function(t,n){i[t]!==a[t]&&e.el.setAttribute(t,a[t]),e.elementData.viewModelProValue[t]=n})))}}(e,r,0,i.forceRender)}),i.ifBinding&&n[a.if]&&n[a.if].length&&n[a.if].forEach(function(t){!function(t,n,i){if(t.dataKey&&(!t.isOnce||!1!==t.hasIterationBindingCache)){t.elementData=t.elementData||{},t.type=t.type||e.if;var a=t.elementData.viewModelPropValue,r=C(n,t)||!1;if(a!==r||t.hasIterationBindingCache){var o,l=Boolean(r);if(!l&&t.isOnce&&t.el.parentNode)return(o=t.el)&&o.parentNode&&o.parentNode.removeChild(o),void re({viewModel:n,cache:t});t.elementData.viewModelPropValue=r,t.fragment||(U(t,t.el),t.el.removeAttribute(i.if),G(t)),l?(ie({bindingData:t,viewModel:n,bindingAttrs:i}),t.isOnce&&!t.hasIterationBindingCache&&re({viewModel:n,cache:t})):ae(t)}}}(t,r,a,i.forceRender)}),i.showBinding&&n[a.show]&&n[a.show].length&&n[a.show].forEach(function(e){!function(e,t,n){var i={},a="",r=!0;if(e.dataKey){e.elementData=e.elementData||{};var o=e.elementData.viewModelPropValue;if(void 0===e.elementData.displayStyle||void 0===e.elementData.computedStyle)if(a=(i=e.el.style).display)e.elementData.displayStyle="none"===a?"block":a,e.elementData.computedStyle=null;else{var l=window.getComputedStyle(e.el,null).getPropertyValue("display");e.elementData.displayStyle=null,e.elementData.computedStyle=l}r=C(t,e),o!==(r=Boolean(r))&&(r?e.elementData.computedStyle||"none"===e.el.style.display?"none"===e.elementData.computedStyle?e.el.style.setProperty("display","block"):i.length>1?e.el.style.removeProperty("display"):e.el.removeAttribute("style"):e.el.style.setProperty("display",e.elementData.displayStyle):"none"!==e.el.style.display&&e.el.style.setProperty("display","none"),e.elementData.viewModelPropValue=r)}}(e,r,0,i.forceRender)}),i.switchBinding&&n[a.switch]&&n[a.switch].length&&n[a.switch].forEach(function(e){!function(e,t,n){if(e.dataKey){e.elementData=e.elementData||{};var i=C(t,e);if(i!==e.elementData.viewModelPropValue){if(e.elementData.viewModelPropValue=i,!e.cases){var a=e.el.children;if(!a.length)return;e.cases=[];for(var r=0,o=a.length;r<o;r+=1){var l=null;a[r].hasAttribute(n.case)?l=le(a[r],n.case):a[r].hasAttribute(n.default)&&((l=le(a[r],n.default)).isDefault=!0),l&&(U(l,l.el),l.isDefault?l.el.removeAttribute(n.default):l.el.removeAttribute(n.case),G(l),e.cases.push(l))}}if(e.cases.length){for(var c=!1,d=0,s=e.cases.length;d<s;d+=1){var u=void 0;if(e.cases[d].dataKey&&(u=C(t,e.cases[d])||e.cases[d].dataKey),u===e.elementData.viewModelPropValue||e.cases[d].isDefault){c=!0,ie({bindingData:e.cases[d],viewModel:t,bindingAttrs:n}),oe(e.cases,d);break}}c||oe(e.cases)}}}}(e,r,a,i.forceRender)}),i.textBinding&&n[a.text]&&n[a.text].length&&n[a.text].forEach(function(e){!function(e,t,n,i){var a=e.dataKey,r=t.APP||t.$root.APP;if(a&&(i||r.$rootElement.contains(e.el))){var o=C(t,e),l=e.el.textContent;void 0!==o&&"object"!==u(o)&&null!==o&&o!==l&&(e.el.textContent=o)}}(e,r,0,i.forceRender)}),i.cssBinding&&n[a.css]&&n[a.css].length&&n[a.css].forEach(function(e){!function(e,t,n,i){var a=e.dataKey,r=t.APP||t.$root.APP;if(a&&(i||r.$rootElement.contains(e.el))){e.elementData=e.elementData||{},e.elementData.viewModelPropValue=e.elementData.viewModelPropValue||"";var o=e.elementData.viewModelPropValue,l="",c=C(t,e),d=[],s=!1,u=!1,f=[];if("string"==typeof c)u=!0;else{if(!E(c))return;s=!0}if(s?l=JSON.stringify(c):d=(l=c.replace(/\s\s+/g," ").trim()).split(" "),o!==l){for(var p,h=e.el.classList,m=h.length,v=0;v<m;v+=1)f.push(h[v]);s?M(c,function(e,t){var n=f.indexOf(e);!0===t?f.push(e):-1!==n&&f.splice(n,1)}):u&&(p=o,f=(f=f.filter(function(e,t){return p.indexOf(e)<0})).concat(d)),f=(f=f.filter(function(e,t,n){return n.indexOf(e)===t})).join(" "),e.elementData.viewModelPropValue=l,e.el.setAttribute("class",f)}}}(e,r,0,i.forceRender)}),i.modelBinding&&n[a.model]&&n[a.model].length&&n[a.model].forEach(function(e){!function(e,t,n,i){var a,r=e.dataKey,o=t.APP||t.$root.APP;if(r&&(i||o.$rootElement.contains(e.el))&&null!=(a=B(t,r))){var l=$(e.el),c=l.is(":checkbox"),d=l.is(":radio"),s=l[0].name,u=d?$('input[name="'+s+'"]'):null;a!==(c?l.prop("checked"):l.val())&&(c?l.prop("checked",Boolean(a)):d?u.val([a]):l.val(a))}}(e,r,0,i.forceRender)}),i.changeBinding&&n[a.change]&&n[a.change].length&&n[a.change].forEach(function(e){z(e,r,a,i.forceRender)}),i.submitBinding&&n[a.submit]&&n[a.submit].length&&n[a.submit].forEach(function(e){!function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=B(t,r),d=$(e.el);"function"==typeof c&&(a=K(t,r),o=o?N(t,o):[],d.off("submit.databind").on("submit.databind",function(e){var t,n,i,r=[e,d,(t=d,n=t.serializeArray(),i={},n.map(function(e){i[e.name]=e.value}),i)].concat(o);c.apply(a,r)}))}}(e,r,0,i.forceRender)}),i.clickBinding&&n[a.click]&&n[a.click].length&&n[a.click].forEach(function(e){!function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=B(t,r);"function"==typeof c&&(a=K(t,r),o=o?N(t,o):[],$(e.el).off("click.databind").on("click.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}}(e,r,0,i.forceRender)}),i.dblclickBinding&&n[a.dblclick]&&n[a.dblclick].length&&n[a.dblclick].forEach(function(e){!function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=B(t,r);"function"==typeof c&&(a=K(t,r),o=o?N(t,o):[],$(e.el).off("dblclick.databind").on("dblclick.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}}(e,r,0,i.forceRender)}),i.blurBinding&&n[a.blur]&&n[a.blur].length&&n[a.blur].forEach(function(e){!function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=B(t,r);"function"==typeof c&&(a=K(t,r),o=o?N(t,o):[],$(e.el).off("blur.databind").on("blur.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}}(e,r,0,i.forceRender)}),i.focusBinding&&n[a.focus]&&n[a.focus].length&&n[a.focus].forEach(function(e){!function(e,t,n,i){var a,r=e.dataKey,o=e.parameters,l=t.APP||t.$root.APP;if(r&&(i||l.$rootElement.contains(e.el))){var c=B(t,r);"function"==typeof c&&(a=K(t,r),o=o?N(t,o):[],$(e.el).off("focus.databind").on("focus.databind",function(e){var t=[e,$(this)].concat(o);c.apply(a,t)}))}}(e,r,0,i.forceRender)}),i.hoverBinding&&n[a.hover]&&n[a.hover].length&&n[a.hover].forEach(function(e){!function(e,t,n,i){var a,r=e.dataKey,l=e.parameters,c=o.mouseEnterHandlerName,d=o.mouseLeaveHandlerName,s=t.APP||t.$root.APP;if(e.elementData=e.elementData||{},r&&(i||s.$rootElement.contains(e.el))){var u=B(t,r);u&&"function"==typeof u[c]&&"function"==typeof u[d]&&(a=K(t,r),l=l?N(t,l):[],$(e.el).off("mouseenter.databind mouseleave.databind").hover(function(t){var n=[t,e.el].concat(l);u[c].apply(a,n)},function(t){var n=[t,e.el].concat(l);u[d].apply(a,n)}))}}(e,r,0,i.forceRender)}))}},{key:"postProcess",value:function(e){e&&e.length&&M(e,function(e,t){if("function"==typeof t)try{t()}catch(e){R(e,"Error postProcess: "+String(t))}})}}],(a=[{key:"parseView",value:function(){return this.elementCache=L({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs}),this.isServerRendered&&!this.initRendered&&this.updateElementCache({templateCache:!0}),this}},{key:"updateElementCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.elementCache||this.elementCache;t.allCache&&(this.elementCache=L({rootNode:this.$rootElement,bindingAttrs:this.bindingAttrs})),(t.allCache||t.templateCache)&&n[this.bindingAttrs.tmp]&&n[this.bindingAttrs.tmp].length&&n[this.bindingAttrs.tmp].forEach(function(n){var i=null;n.el.hasAttribute(e.bindingAttrs.forOf)&&(i=function(){return!0}),n.bindingCache=L({rootNode:n.el,bindingAttrs:e.bindingAttrs,skipCheck:i,isRenderedTemplate:t.isRenderedTemplates})})}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={};this.initRendered?i=ye("",e):this.isServerRendered?(this.$rootElement.removeAttribute(t),i=ye(l,e)):i=ye(c,e),this.postProcessQueue=[],ge({ctx:this,elementCache:this.elementCache,updateOption:i,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),n.applyBinding({ctx:this,elementCache:this.elementCache,updateOption:i,bindingAttrs:this.bindingAttrs,viewModel:this.viewModel}),n.postProcess(this.postProcessQueue),this.postProcessQueue.length=0,delete this.postProcessQueue,this.initRendered=!0}},{key:"subscribe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return de(this,e,t),this}},{key:"subscribeOnce",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return se(this,e,t),this}},{key:"unsubscribe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ue(this.compId,e),this}},{key:"unsubscribeAll",value:function(){return fe(this.compId),this}},{key:"publish",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return pe.apply(he,[e].concat(n)),this}}])&&f(i.prototype,a),r&&f(i,r),n}(),ge=function(e){var t=e.ctx,n=e.elementCache,i=e.updateOption,a=e.bindingAttrs,r=e.viewModel;return!(!n||!a)&&(n[a.tmp]&&n[a.tmp].length&&(i.templateBinding&&(i=ye(c),n[a.tmp].forEach(function(e){Q(e,r,a,n)}),t.updateElementCache({templateCache:!0,elementCache:n,isRenderedTemplates:!0})),i.forceRender=!0,n[a.tmp].forEach(function(e){ve.applyBinding({elementCache:e.bindingCache,updateOption:i,bindingAttrs:a,viewModel:r})})),!0)},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={templateBinding:!1,textBinding:!0,cssBinding:!0,ifBinding:!0,showBinding:!0,modelBinding:!0,attrBinding:!0,forOfBinding:!0,switchBinding:!0},i={changeBinding:!0,clickBinding:!0,dblclickBinding:!0,blurBinding:!0,focusBinding:!0,hoverBinding:!0,submitBinding:!0},a={};switch(e){case l:a=x({},i,{templateBinding:!1,textBinding:!1,cssBinding:!1,ifBinding:!1,showBinding:!1,modelBinding:!1,attrBinding:!1,forOfBinding:!1,switchBinding:!1},t);break;case c:t.templateBinding=!0,a=x({},n,i,t);break;default:a=x({},n,t)}return a},be=function(e){var t=e.elementCache,n=e.iterationVm,i=e.bindingAttrs,a=e.isRegenerate?ye(c):ye();a.forceRender=!0,ge({ctx:n.$root?n.$root.APP:n.APP,elementCache:t,updateOption:a,bindingAttrs:i,viewModel:n}),ve.applyBinding({elementCache:t,updateOption:a,bindingAttrs:i,viewModel:n})},we=e,Ae={evaluate:/<%([\s\S]+?)%>/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{(.+?)\}\}/g};window.dataBind={use:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.bindingAttrs&&(we=$.extend({},e.bindingAttrs)),e.templateSettings&&(Ae=$.extend({},e.templateSettings))},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _.templateSettings=Ae,new ve(e,t,we)},version:"@version@"}}();
//# sourceMappingURL=dataBind.min.js.map
